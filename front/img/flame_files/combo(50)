YUI.add("hermes-template-group-top-contributors-view",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<div class='error-state'>\n		<p>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.GROUP_TOP_CONTRIBUTORS_LOADING_ERROR"},data:i}))+"<p>\n		<p><a href='#' class='retry'>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.RETRY"},data:i}))+"</a></p>\n	</div>\n"},3:function(e,t,n,r,i,s,o){var u;return"\n"+((u=n["if"].call(t!=null?t:{},t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(4,i,0,s,o),inverse:e.program(6,i,0,s,o),data:i}))!=null?u:"")+"\n"},4:function(e,t,n,r,i){return"\n"},6:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},t!=null?t.groupTopContributors:t,{name:"if",hash:{},fn:e.program(7,i,0,s,o),inverse:e.program(32,i,0,s,o),data:i}))!=null?u:""},7:function(e,t,n,r,i,s,o){var u,a=t!=null?t:{},f=n.helperMissing,l=e.escapeExpression;return((u=n["if"].call(a,t!=null?t.titleKey:t,{name:"if",hash:{},fn:e.program(8,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'\n			<table class="with-avatar">\n				<tbody>\n					<tr class="header contrib-type">\n						<th class="col5">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_RANK"},data:i}))+'</th>\n						<th class="col35"></th>\n						<th class="col30">'+((u=n["if"].call(a,t!=null?t.showPool:t,{name:"if",hash:{},fn:e.program(13,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'</th>\n						<th class="col10 align-right contrib-photos filterable '+((u=(n.ifCond||t&&t.ifCond||f).call(a,t!=null?t.key:t,"===","photoContributors",{name:"ifCond",hash:{},fn:e.program(15,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_PHOTOS"},data:i}))+'</th>\n						<th class="col10 align-right contrib-topics filterable '+((u=(n.ifCond||t&&t.ifCond||f).call(a,t!=null?t.key:t,"===","discussionContributors",{name:"ifCond",hash:{},fn:e.program(15,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_DISCUSSION_TOPICS"},data:i}))+'</th>\n						<th class="col10 align-right">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_JOINED_GROUP"},data:i}))+"</th>\n					</tr>\n"+((u=n.each.call(a,(u=t!=null?t.groupTopContributors:t)!=null?u.contributors:u,{name:"each",hash:{},fn:e.program(17,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"				</tbody>\n			</table>\n"+((u=n["if"].call(a,t!=null?t.showMoreButton:t,{name:"if",hash:{},fn:e.program(30,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")},8:function(e,t,n,r,i){var s;return"				<h2>\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.showMoreButton:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i}))!=null?s:"")+"				</h2>\n"},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'						<a href="/groups/'+a((s=(s=n.groupId||(t!=null?t.groupId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"groupId",hash:{},data:i}):s))+'/members/" data-track="groupTopContributorsHeadingClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"</a>\n"},11:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"\n"},13:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_LATEST_PHOTO"},data:i}))},15:function(e,t,n,r,i){return"selected"},17:function(e,t,n,r,i,s,o){var u,a=t!=null?t:{},f=n.helperMissing,l=e.escapeExpression,c=e.lambda;return"					<tr>\n						<td>\n							"+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{count:t!=null?t.rank:t,intlName:"groups.RANKING"},data:i}))+'\n						</td>\n						<td class="emphasis">\n\n							<a data-person-nsid="'+l(c(t!=null?t.nsid:t,t))+'" title="'+l(c(t!=null?t.displayname:t,t))+'" href="'+l(c(t!=null?t.poolUrl:t,t))+'" data-track="groupTopContributorsUserClick">\n								<span data-person-nsid="'+l(c(t!=null?t.nsid:t,t))+'" class="avatar person tiny" style="background-image:url('+l(c(t!=null?t.avatarUrl:t,t))+');"></span>'+l(c(t!=null?t.displayname:t,t))+"\n"+((u=n["if"].call(a,t!=null?t.enabledNewPro:t,{name:"if",hash:{},fn:e.program(18,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"							</a>\n\n						</td>\n						<td>\n"+((u=n["if"].call(a,o[2]!=null?o[2].showPool:o[2],{name:"if",hash:{},fn:e.program(21,i,0,s,o),inverse:e.program(26,i,0,s,o),data:i}))!=null?u:"")+'						</td>\n						<td class="align-right">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{num:t!=null?t.groupPhotoCount:t,intlName:"common.NUMBER"},data:i}))+'</td>\n						<td class="align-right">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{num:t!=null?t.groupDiscussionCount:t,intlName:"common.NUMBER"},data:i}))+'</td>\n						<td class="align-right">\n'+((u=(n.friendlySinceDate||t&&t.friendlySinceDate||f).call(a,t!=null?t.dateJoined:t,false,true,{name:"friendlySinceDate",hash:{},fn:e.program(28,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"						</td>\n					</tr>\n"},18:function(e,t,n,r,i){var s;return"									"+((s=n["if"].call(t!=null?t:{},t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},19:function(e,t,n,r,i){return'<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>'},21:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},t!=null?t.latestPhotoUrl:t,{name:"if",hash:{},fn:e.program(22,i,0,s,o),inverse:e.program(24,i,0,s,o),data:i}))!=
null?u:""},22:function(e,t,n,r,i,s,o){var u,a=e.lambda,f=e.escapeExpression;return'									<a title="'+f(a(t!=null?t.latestPhotoTitle:t,t))+'" href="'+f(a(t!=null?t.latestPhotoUrl:t,t))+"in/pool-"+f(a((u=o[2]!=null?o[2].group:o[2])!=null?u.pathAlias:u,t))+'/" data-track="groupTopContributorsLatestPhotoClick">'+f(a(t!=null?t.latestPhotoTitle:t,t))+"</a>\n"},24:function(e,t,n,r,i){return"									-\n"},26:function(e,t,n,r,i){return"								&nbsp;\n"},28:function(e,t,n,r,i){return"								"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{time:t!=null?t.time:t,intlName:t!=null?t.intlName:t},data:i}))+"\n"},30:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'			<div class="see-all-block">\n				<a href="/groups/'+a((s=(s=n.groupId||(t!=null?t.groupId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"groupId",hash:{},data:i}):s))+'/members/" class="see-all-members" data-track="groupTopContributorsViewAllClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.SEE_ALL_MEMBERS"},data:i}))+"</a>\n			</div>\n"},32:function(e,t,n,r,i){return"			"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.NO_CONTRIBUTORS"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},t!=null?t.error:t,{name:"if",hash:{},fn:e.program(1,i,0,s,o),inverse:e.program(3,i,0,s,o),data:i}))!=null?u:""},useData:!0,useDepths:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-top-contributors-view",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-top-contributors-view",function(e){e.namespace("Views")[this.name]=e.Base.create("group-top-contributors-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.titleKey=e.titleKey,this.showPool=e.showPool,e.sort="all",this.get("container").get("innerHTML")===""&&this.setContainerWithTemplate("group-top-contributors-view",{loading:!0,error:!1}),this},loadState:function(){var t=this;return(new e.FlickrPromise({groupTopContributors:this.appContext.getModel("group-top-contributors-models",this.groupId),group:this.appContext.getModel("group-models",this.groupId)})).then(function(e){t.set("groupTopContributors",e.groupTopContributors),t.set("group",e.group)})},buildContainer:function(e){var t=this.get("group"),n,r,i=this;return t?(n=t.getValue("urlPoolPage")+"/",r=this.get("groupTopContributors").toJSON(),e=e||"photoContributors",r[e].forEach(function(e){e.poolUrl=n+(e.pathAlias||e.nsid),e.enabledNewPro=i.appContext.flipper.isFlipped("enable-pro-badge")}),r.contributors=r[e],r.contributors.length===0?this.setContainerHTML(""):this.setContainerWithTemplate("group-top-contributors-view",{groupTopContributors:r,group:t.toJSON(),groupId:this.groupId,titleKey:this.titleKey,key:e,showMoreButton:!0,loading:!1,error:!1,showPool:this.showPool})):this.setContainerHTML(""),this},buildErrorContainer:function(){this.setContainerWithTemplate("group-top-contributors-view",{error:!0})},activate:function(){var e=this.get("container"),t,n=this,r;return e&&(t=e.one(".contrib-topics"),r=e.one(".contrib-photos"),r&&t&&(this.registerEventHandler(r.on("click",function(e){e.preventDefault(),n.buildContainer("photoContributors"),n.activate()})),this.registerEventHandler(t.on("click",function(e){e.preventDefault(),n.buildContainer("discussionContributors"),n.activate()})))),this}})},"@VERSION@",{requires:["flutil","flickr-promise","flickr-view","hermes-template-group-top-contributors-view"],langBundles:["groups","common","relative-dates"]});
YUI.add("hermes-template-group-18-plus-confirmation",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<h1>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"groups.EIGHTTEEN_PLUS_SIGNEDIN"},data:i}))+'</h1>\n	<a href="https://www.flickr.com" class="butt alt large" data-action="decline">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"groups.NO"},data:i}))+'</a>\n	<a href="#" class="butt large" data-action="confirm">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"groups.YES"},data:i}))+"</a>\n"},3:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<h1>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.EIGHTEEN_PLUS_SIGNEDOUT"},data:i}))+'</h1>\n	<a href="/signin" class="butt large">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.signedIn:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-18-plus-confirmation",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-18-plus-confirmation-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="group-18-plus-confirmation"></div>'),this.groupId=e.groupId,this.groupPoolPage=e.groupPoolPage||!1,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("group-18-plus-confirmation",{signedIn:this.appContext.getViewer().signedIn}),this},activate:function(){if(!YUI.Env.isServer){var t;this.container=this.get("container").get("parentNode"),this.removeLoadingState(),this.localStorageKey=this.groupId+this.appContext.getViewer().nsid,e.StorageHelper.getItem(this.localStorageKey)?(this.container.removeClass("needsInterstitial"),this.get("container").remove(),this.loadPage()):(t={":confirm":function(t){t.preventDefault(),e.StorageHelper.setItem(this.localStorageKey,!0),this.loadPage(),this.get("container").remove()},":decline":function(t){t.preventDefault(),window.location.href=e.url()}},this.attachEvents(t))}return this},loadPage:function(){this.groupPoolPage?this.displayPhotos():this.fire("clickSee18Plus")},displayPhotos:function(){this.fire("subviewViewEvent","interstitialClickThru")},removeLoadingState:function(){var e=this.get("container").get("parentNode");e.removeClass("initial-loading")}})},"@VERSION@",{requires:["flickr-view","hermes-template-group-18-plus-confirmation","storage-helper"],langBundles:["common","groups"]});
YUI.add("hermes-template-group-pool-preview",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"	<div class='hidden-state'>\n		<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.POOL_MEMBERS_ONLY"},data:i}))+"<p>\n	</div>\n"},3:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.error:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))!=null?s:""},4:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"		<div class='error-state'>\n			<p>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.GROUP_POOL_LOADING_ERROR"},data:i}))+"<p>\n			<p><a href='#' class='retry'>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.RETRY"},data:i}))+"</a></p>\n		</div>\n\n"},6:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:""},7:function(e,t,n,r,i){return'			<div class="loading">\n				<div class="balls"></div>\n			</div>\n'},9:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.display:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.program(17,i,0),data:i}))!=null?s:""},10:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return"\n"+((s=n["if"].call(u,t!=null?t.titleKey:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				"+((s=n["if"].call(u,t!=null?t.canAddPhotos:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n				<ul class="pool-overview-actions">\n\n'+((s=n["if"].call(u,t!=null?t.isAdmin:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+'					<li class="view-all-li">\n						<a href="'+f((o=(o=n.viewAllUrl||(t!=null?t.viewAllUrl:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"viewAllUrl",hash:{},data:i}):o))+'" class="view-all" data-track="groupPoolPreviewViewAllClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{count:t!=null?t.total:t,intlName:"groups.VIEW_X_PHOTOS"},data:i}))+'</a>\n					</li>\n\n					<li>\n						<a class="search-icon" data-track="addContextGroupPool" title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"groups.SEARCH_POOL"},data:i}))+'"></a>\n					</li>\n				</ul>\n\n				<div class="display-photolist-rows">\n					'+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t.displayPhotolistRows:t,{name:"outlet",hash:{},data:i}))+"\n				</div>\n"},11:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<h2>\n						<a href="'+a((s=(s=n.viewAllUrl||(t!=null?t.viewAllUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"viewAllUrl",hash:{},data:i}):s))+'" data-track="groupPoolPreviewHeadingClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"</a>\n					</h2>\n"},13:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<a href="'+a((s=(s=n.addSomeUrl||(t!=null?t.addSomeUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"addSomeUrl",hash:{},data:i}):s))+'" class="butt add" data-track="groupPoolPreviewAddClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_PHOTO"},data:i}))+"</a>"},15:function(e,t,n,r,i){return'						 <li class="change-number-rows">\n						 	<a href="#">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{count:t!=null?t.poolPreviewRowsVisibleCount:t,intlName:"groups.POOL_PREVIEW"},data:i}))+'</a>\n						 	<span class="change-number-rows-arrow"></span>\n						 </li>\n'},17:function(e,t,n,r,i){var s,o=t!=null?t:{};return'				<div class="empty-state">\n'+((s=n["if"].call(o,t!=null?t.canAddPhotos:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n.unless.call(o,t!=null?t.canAddPhotos:t,{name:"unless",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</div>\n"},18:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"						<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.BE_THE_FIRST"},data:i}))+'</p>\n						<p><a href="'+a((s=(s=n.addSomeUrl||(t!=null?t.addSomeUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"addSomeUrl",hash:{},data:i}):s))+'" data-track="groupPoolPreviewEmptyAddClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_SOME_PHOTOS"},data:i}))+"</a></p>\n"},20:function(e,t,n,r,i){return"						<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.NO_PHOTOS"},data:i}))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.permissionDenied:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-pool-preview",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-pool-preview-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.titleKey=e.titleKey,this.setContainerWithTemplate("group-pool-preview",{loading:!0,error:!1,titleKey:this.titleKey}),this.initialHeight=150,this.initialWidth=1060,this.hasPhotos=!1,this.poolRowsLink=".change-number-rows",this},loadState:function(){var t=this;return(new e.FlickrPromise({groupPool:this.appContext.getModel("group-pool-models",this.groupId),groupActivity:this.appContext.getModel("group-activity-models",this.groupId),groupInfo:this.appContext.getModel("group-info-models",this.groupId)})).then(function(e){return t.set("groupsPoolModel",e.groupPool),t.set("groupActivityModel",e.groupActivity),t.set("groupInfo",e.groupInfo),t.groupPathAlias="pool-"+e.groupInfo.getValue("group").getValue("pathAlias"),e.groupPool.getValue("photoPageList").getPage({page:1,perPage:50}).then(function(e){e.length>0&&(t.hasPhotos=!0),t.set("photos",e);if(YUI.Env.isServer)return t.renderPoolPhotoList()})},function(e){if(e.code!==2)throw e;t.permissionDenied=!0})},buildContainer:function(e){var t=this.get("groupInfo"),n=t.getValue("pathAlias")||t.getValue("id"),r="/groups/"+n+"/pool/add/",i=0,s,o=t&&t.getValue("throttle"),u=!1;return this.hasPhotos&&(s=this.get("photos"),i=this.get("groupsPoolModel").getValue("group").getValue("poolCount")),o&&(u=o.mode!=="disabled"&&o.remaining>0||o.mode==="none",u&&(u=t.getValue("group").getValue("isMember"))),this.setContainerWithTemplate("group-pool-preview",{display:s,url:r,poolPreviewRowsVisibleCount:t.getValue("poolPreviewRowsVisibleCount"),isAdmin:t.getValue("group").getValue("isAdmin"),titleKey:this.titleKey,addSomeUrl:"/groups/"+n+"/pool/add/",viewAllUrl:"/groups/"+n+"/pool/",permissionDenied:this.permissionDenied,total:i,loading:!1,error:!1,canAddPhotos:u,displayPhotolistRows:this.photoListDisplayRows||""}),!YUI.Env.isServer&&s&&i>0&&!e&&this.renderPoolPhotoList(),this},handleSearchClick:function(t){e.fire("add-context-to-search-field",{name:this.get("groupInfo").getValue("group").getValue("title"),id:this.groupId,type:"group",scope:"photos"}),t.target.addClass("active")},handleSearchContextRemoval:function(){this.get("container").one(".search-icon").removeClass("active")},activate:function(){var t=this;this.appContext.getViewer().signedIn&&this.get("groupActivityModel").registry.groupViewed({group_id:this.groupId,user_id:this.appContext.getViewer().nsid,type:"pool"},this.appContext),this.hasPhotos&&(this.registerEventHandler(this.get("container").delegate("click",this.onChangeNumberOfRowsLinkClick.bind(this),this.poolRowsLink)),this.registerEventHandler(this.get("groupInfo").on("valuesChanged",function(e){e.poolPreviewRowsVisibleCount&&t.numberOfRowsChanged()})));var n=this.get("container").one(".search-icon");return n&&this.registerEventHandler(n.on("click",this.handleSearchClick.bind(this))),this.registerEventHandler(e.on("remove-context-in-search-field",this.handleSearchContextRemoval.bind(this))),this},destroy:function(){return this.photoList&&this.photoList.destroy(),this},renderPoolPhotoList:function(){var t=this.get("groupInfo"),n,r,i=this;this.photoList&&this.photoList.destroy(),this.photoList=new e.Views["photo-list-view"]({appContext:this.appContext,keepAwakeOnScroll:!0,photoListConfig:{keepAwakeOnScroll:!0,photos:this.get("photos"),paginateOnScroll:!1,modelParams:{modelIdOrAttributes:this.groupId,registryName:"group-pool-models",collectionAttributeName:"photoPageList",fetchParams:{}},contextSuffix:this.groupPathAlias,layout:{keepAwakeOnScroll:!0,maxNumRows:t.getValue("poolPreviewRowsVisibleCount"),containerPadding:{top:0,right:0,bottom:8,left:0},targetRowHeight:150},parentName:this.name}}),n=this.photoList.initialize(),r=this.get("container").one(".photo-list-view"),r&&r.remove();if(YUI.Env.isServer)return n.then(function(){i.photoListDisplayRows=i.photoList.get("container")});this.get("container").one(".display-photolist-rows").append(this.photoList.get("container"))},onChangeNumberOfRowsLinkClick:function(t,n){t.preventDefault();var r=this,i=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorOffsetHorizontal:14,dismissOnOverlayClick:!0,anchorElement:this.get("container").one(".change-number-rows-arrow"),classList:["group-nb-rows-droparound"],menuItems:[{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:1,nb:1}),rows:1},{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:2,nb:2}),rows:2},{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:4,nb:4}),rows:4},{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:8,nb:8}),rows:8}]});return i.show(),this.registerEventHandler(i.on("selected",function(e){e&&e.menuItem&&e.menuItem.rows&&(r.changeNumberOfRows.call(r,e.menuItem.rows),i.close())}),this),this},changeNumberOfRows:function(t){var n=this.get("groupInfo"),r=this,i=n.getValue("poolPreviewRowsVisibleCount");if(!t)return;n.getValue("group").getValue("isAdmin")&&this.appContext.callAPI("flickr.groups.admin.setPoolRows",{group_id:this.get("groupInfo").getValue("id"),row_count:t}).then(function(r){n.setValue("poolPreviewRowsVisibleCount",t)},function(s){n.setValue("poolPreviewRowsVisibleCount",i),s&&s.stat==="fail"&&(r.errorModal=new e.Views.FluidModal({appContext:r.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:"Oops!",actionButtonLabel:r.intlMessage({intlName:"common.OK"}),message:s.message,darkOverlay:!0}),r.errorModal.show())})},numberOfRowsChanged:function(){this.buildContainer(!0),this.renderPoolPhotoList()}})},"@VERSION@",{requires:["flutil","flickr-view","photo-list-view","flickr-promise","hermes-template-group-pool-preview","fluid-droparound-view"],langBundles:["common","groups","photo-list"]});
YUI.add("hermes-lang-photo-list_fr-fr",function(e,t){e.Intl.add("hermes/photo-list","fr-FR",{FETCHING_PHOTOS:["R\u00e9cup\u00e9ration de photos..."],FETCHING_MORE_PHOTOS:["R\u00e9cup\u00e9ration d\u2019autres photos..."],SEARCHING:["Recherche en cours..."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-group-home-page",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return((s=n.unless.call(t!=null?t:{},t!=null?t.isServerRendered:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+" needsInterstitial"},2:function(e,t,n,r,i){return" initial-loading"},4:function(e,t,n,r,i){return" with-fluid-subnav "},6:function(e,t,n,r,i){return"\n		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["group-18-plus-confirmation-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"},8:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return"\n"+((s=n["if"].call(u,(s=t!=null?t.notification:t)!=null?s.type:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showPendingCount:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showMemberPendingCount:t,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showInvited:t,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n		<div class="main '+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'" role="main">\n\n'+((s=n["if"].call(u,t!=null?t["groups-toolbar-view"]:t,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-blast-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(u,t!=null?t.showPool:t,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.program(30,i,0),data:i}))!=null?s:"")+"\n		"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-discussion-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n		"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-top-contributors-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(u,(s=t!=null?t["group-info"]:t)!=null?s.secureDescription:s,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t["group-info"]:t)!=null?s.secureRules:s,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.additionalField:t,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		</div>\n\n"},9:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+e.escapeExpression((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n'+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","notadded",{name:"ifCond",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","pending",{name:"ifCond",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","donepending",{name:"ifCond",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","deleted",{name:"ifCond",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</div>\n			</div>\n"},10:function(e,t,n,r,i){return" move-to-top "},12:function(e,t,n,r,i){var s;return"						"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{url:(s=t!=null?t["group-info"]:t)!=null?s.groupPoolAddURL:s,intlName:"groups.NOT_ADDED_NOTIFICATION"},data:i}))+"\n"},14:function(e,t,n,r,i){var s;return"						"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{url:(s=t!=null?t["group-info"]:t)!=null?s.groupPoolAddURL:s,intlName:"groups.PENDING_NOTIFICATION"},data:i}))+"\n"},16:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.DONE_PENDING_NOTIFICATION"},data:i}))+"\n"},18:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.DELETED_NOTIFICATION"},data:i}))+"\n"},20:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n					'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{url:t!=null?t.pendingAdminURL:t,pendingCount:t!=null?t.pendingCount:t,intlName:"groups.PENDING_COUNT_NOTIFICATION"},data:i}))+"\n				</div>\n			</div>\n"},22:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n					'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{url
:t!=null?t.pendingMemberURL:t,pendingCount:t!=null?t.pendingMemberCount:t,intlName:"groups.PENDING_MEMBER_COUNT_NOTIFICATION"},data:i}))+"\n				</div>\n			</div>\n"},24:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n					'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"groups.IS_INVITED_NOTIFICATION"},data:i}))+"\n				</div>\n			</div>\n"},26:function(e,t,n,r,i){return"			"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["groups-toolbar-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},28:function(e,t,n,r,i){return"			"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["group-pool-preview-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},30:function(e,t,n,r,i){return"			<div class='hidden-state'>\n				<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.POOL_MEMBERS_ONLY"},data:i}))+"</p>\n			</div>\n"},32:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"			<div class='group-description'>\n				<h2>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_DESCRIPTION"},data:i}))+"</h2>\n				"+a((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||u).call(o,(s=t!=null?t["group-info"]:t)!=null?s.secureDescription:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+"\n			</div>\n"},34:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"			<div class='group-rules'>\n				<h2>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_RULES"},data:i}))+"</h2>\n				"+a((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||u).call(o,(s=t!=null?t["group-info"]:t)!=null?s.secureRules:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+"\n			</div>\n"},36:function(e,t,n,r,i){var s,o=t!=null?t:{};return"			<div class='additional-info'>\n				<h2>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_ADDITIONAL_INFO"},data:i}))+"</h2>\n				<ul>\n"+((s=n.each.call(o,t!=null?t.additionalField:t,{name:"each",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</ul>\n			</div>\n"},37:function(e,t,n,r,i){return"					<li>"+e.escapeExpression((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||n.helperMissing).call(t!=null?t:{},t!=null?t.field:t,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div role="main" class="'+((s=n["if"].call(o,t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n\n	'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["fluid-group-coverphoto-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(o,t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:"")+"\n	"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["opt-out-widget-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n</div>\n\n"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["signup-footer-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-home-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-opt-out-widget",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" hidden"},3:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'			<input type="hidden" name="'+f((s=(s=n.name||(t!=null?t.name:t))!=null?s:u,typeof s===a?s.call(o,{name:"name",hash:{},data:i}):s))+'" value="'+f((s=(s=n.value||(t!=null?t.value:t))!=null?s:u,typeof s===a?s.call(o,{name:"value",hash:{},data:i}):s))+'">\n'},5:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression((s=(s=n.optOutButtonHoverText||(t!=null?t.optOutButtonHoverText:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"optOutButtonHoverText",hash:{},data:i}):s))+'"'},7:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression((s=(s=n.optOutFeedbackLinkHoverText||(t!=null?t.optOutFeedbackLinkHoverText:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"optOutFeedbackLinkHoverText",hash:{},data:i}):s))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="opt-out-widget'+((s=n["if"].call(u,t!=null?t.hidden:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n	<form action="/help/optin" id="opt-out-form" method="post">\n'+((s=n.each.call(u,t!=null?t.optOutFlippers:t,{name:"each",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		<input type="hidden" name="redirect_url" value="'+l((o=(o=n.optOutRedirectUrl||(t!=null?t.optOutRedirectUrl:t))!=null?o:a,typeof o===f?o.call(u,{name:"optOutRedirectUrl",hash:{},data:i}):o))+'">\n		<input type="hidden" name="csrf" value="'+l((o=(o=n.csrf||(t!=null?t.csrf:t))!=null?o:a,typeof o===f?o.call(u,{name:"csrf",hash:{},data:i}):o))+'">\n		<div class="optout-toggle">\n			<span class="label-beta">'+l((o=(o=n.optOutLabelText||(t!=null?t.optOutLabelText:t))!=null?o:a,typeof o===f?o.call(u,{name:"optOutLabelText",hash:{},data:i}):o))+"</span>\n			<button"+((s=n["if"].call(u,t!=null?t.optOutButtonHoverText:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'></button>\n			<span class="divider"></span>\n			<a href="'+l((o=(o=n.optOutFeedbackUrl||(t!=null?t.optOutFeedbackUrl:t))!=null?o:a,typeof o===f?o.call(u,{name:"optOutFeedbackUrl",hash:{},data:i}):o))+'" target="_new"'+((s=n["if"].call(u,t!=null?t.optOutFeedbackLinkHoverText:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'><i class="feedback">&nbsp;</i></a>\n		</div>\n	</form>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/opt-out-widget",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("opt-out-widget-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.optOutFlippers=e.optOutFlippers||[],this.optOutLabelText=e.optOutLabelText||this.intlMessage({intlName:"common.BETA"}),this.optOutFeedbackUrl=e.optOutFeedbackUrl||"",this.optOutFeedbackLinkHoverText=e.optOutFeedbackLinkHoverText||"",this.optOutButtonHoverText=e.optOutButtonHoverText||"",this.optOutCookieField=e.optOutCookieField||null,this.hidden=e.hidden||!1},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("opt-out-widget",{optOutFlippers:this.optOutFlippers,optOutLabelText:this.optOutLabelText,optOutFeedbackUrl:this.optOutFeedbackUrl,optOutFeedbackLinkHoverText:this.optOutFeedbackLinkHoverText,optOutButtonHoverText:this.optOutButtonHoverText,csrf:this.appContext.auth.csrf||"",optOutRedirectUrl:YUI.Env.isServer?this.appContext.request.url:window.location.pathname,hidden:this.hidden}),this},activate:function(){var t,n=this;return this.widget=this.get("container").one(".opt-out-widget"),this.footerContainer=e.one(".footer-full-view"),this.footer=this.footerContainer?this.footerContainer.one("footer.foot"):null,this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updateWidgetPosition.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updateWidgetPosition.bind(this))),this.updateWidgetPosition(),this.optOutCookieField&&(t=this.widget.one("#opt-out-form"),t&&this.registerEventHandler(t.on("submit",function(r){r.halt(),e.use("opt-outer",function(e){e.optOut(n.optOutCookieField),setTimeout(function(){t.submit()},100)})}))),this},onParentViewEvent:function(e,t){if(t&&t[0]==="footerDisplayChanged")return this.updateWidgetPosition(),!1;t&&t[0]==="showOptOutWidget"&&this.hidden&&(this.widget||(this.widget=this.get("container").one(".opt-out-widget")),this.widget&&this.widget.removeClass("hidden"),this.hidden=!1)},updateWidgetPosition:function(t){var n;this.footer&&(n=e.config.win.pageYOffset+this.appContext.viewportData.getHeight(),this.footerContainer.getComputedStyle("display")!=="none"&&n>=this.footer.getY()?this.widget.hasClass("hugging-footer")||this.widget.addClass("hugging-footer"):this.widget.hasClass("hugging-footer")&&this.widget.removeClass("hugging-footer"))}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-opt-out-widget"],langBundles:["common"]});
YUI.add("hermes-template-group-blast",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'	<div class="blast-block">\n		<a href="'+u(o((s=t!=null?t["group-blast"]:t)!=null?s.blastUserUrl:s,t))+'" data-track="groupBlastUserClick">'+u(o((s=t!=null?t["group-blast"]:t)!=null?s.blastDisplayName:s,t))+"</a>\n		"+((s=n["if"].call(a,t!=null?t.blastStatus:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(a,t!=null?t.addGroupBlast:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		<span class="blast-date">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{blastDateAdded:(s=t!=null?t["group-blast"]:t)!=null?s.blastDateAdded:s,intlName:"groups.BLAST_DATE_ADDED"},data:i}))+'</span>\n		<div style="clear:both;"></div>\n\n		<span class="blast-message '+((s=n["if"].call(a,t!=null?t.addGroupBlast:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n			<div class="blast-message-display">\n				<span class="blast-message-secure">\n					'+u((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||f).call(a,(s=t!=null?t["group-blast"]:t)!=null?s.blastMessageSecure:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+'\n				</span>\n\n			</div>\n			<div class="blast-message-edit">\n				<textarea class="blast-message-edited" wrap="on">'+u((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||f).call(a,(s=t!=null?t["group-blast"]:t)!=null?s.blastMessage:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+'</textarea>\n				<textarea tabIndex="-1" class="blast-message-edited-false" style="display:none;" wrap="on"></textarea>\n\n				<button class="alt blast-cancel-button">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:i}))+'</button>\n				<button class="blast-done-button">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.DONE"},data:i}))+"</button>\n			</div>\n\n		</span>\n	</div>\n"},2:function(e,t,n,r,i){return'<span class="blast-user-status">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:t!=null?t.blastStatus:t},data:i}))+"</span>"},4:function(e,t,n,r,i){return'			<span class="edit-icon"></span>\n			<span class="delete-icon"></span>\n'},6:function(e,t,n,r,i){return"is-editable"},8:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.addGroupBlast:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:""},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'	<div class="blast-empty">\n		<div class="empty-state">\n			<p>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.EMPTY_BLAST"},data:i}))+'</p>\n			<p>\n				<a class="add-blast-block">\n				'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_BLAST"},data:i}))+'\n				</a>\n			</p>\n		</div>\n		<div class="blast-message-edit">\n			<p>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.CREATE_BLAST"},data:i}))+'</p>\n			<textarea class="blast-message-edited">'+a((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||u).call(o,(s=t!=null?t["group-blast"]:t)!=null?s.blastMessage:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+'</textarea>\n			<textarea tabIndex="-1" class="blast-message-edited-false" style="display:none;" wrap="on"></textarea>\n			<button class="alt blast-cancel-button">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:i}))+'</button>\n			<button class="blast-done-button">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.DONE"},data:i}))+"</button>\n		</div>\n	</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return"\n"+((s=n["if"].call(t!=null?t:{},(s=t!=null?t["group-blast"]:t)!=null?s.blastMessageSecure:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-blast",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-blast-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.editMode=!1,this.disableEditing=!1,this},loadState:function(){var t=this;return(new e.FlickrPromise({groupBlast:this.appContext.getModel("group-blast-models",this.groupId),groupInfo:this.appContext.getModel("group-info-models",this.groupId)})).then(function(e){t.set("groupBlastModel",e.groupBlast),t.set("groupInfoModel",e.groupInfo),t.set("groupModel",e.groupInfo.getValue("group"))})},buildContainer:function(){var e=this.get("groupBlastModel"),t=this.get("groupModel").toJSON(),n,r,i,s=t.isAdmin;return e&&(r=["groups.BLAST_INVITED_MEMBER","groups.BLAST_PENDING_MEMBER","groups.BLAST_GROUP_MEMBER","groups.BLAST_MODERATOR","groups.BLAST_ADMIN"],i=r[e.getValue("blastUserStatus")]),n={"group-blast":e.toJSON(),blastStatus:i,addGroupBlast:s,editMode:this.editMode},this.setContainerWithTemplate("group-blast",n),this},activate:function(){var e=this.get("container"),t=e.one(".blast-block"),n=this;return t?(e.one(".edit-icon")&&this.registerEventHandler(e.one(".edit-icon").on("click",function(t){var n=e.one(".blast-message-edited");t.preventDefault(),this.disableEditing||(e.one(".blast-block").addClass("editing"),n&&(n.focus(),n.select()))})),e.one(".delete-icon")&&this.registerEventHandler(e.one(".delete-icon").on("click",function(t){t.preventDefault(),this.disableEditing||n.deleteBlast(e.one(".blast-block"),e.one(".blast-message-secure"))})),e.one(".blast-done-button")&&this.registerEventHandler(e.one(".blast-done-button").on("click",function(t){t.preventDefault(),n.updateBlast(e.one(".blast-block"),e.one(".blast-message-secure"))})),e.one(".blast-cancel-button")&&this.registerEventHandler(e.one(".blast-cancel-button").on("click",function(e){e.preventDefault(),n.buildContainer(),n.activate()}))):(e.one(".blast-done-button")&&this.registerEventHandler(e.one(".blast-done-button").on("click",function(t){t.preventDefault(),n.updateBlast(e.one(".blast-empty"),e.one(".empty-state"),!0)})),e.one(".blast-cancel-button")&&this.registerEventHandler(e.one(".blast-cancel-button").on("click",function(e){e.preventDefault(),n.buildContainer(),n.activate()})),e.one(".add-blast-block")&&this.registerEventHandler(e.one(".add-blast-block").on("click",function(t){t.preventDefault(),this.disableEditing||(e.one(".blast-empty").addClass("editing"),e.one(".blast-message-edited")&&e.one(".blast-message-edited").focus())}))),e.one(".blast-message-edited")&&this.setupBlastEditing(e.one(".blast-message-edited"),e.one(".blast-message-edited-false")),this},setupBlastEditing:function(e,t){this.registerEventHandler(e.on("input",function(n){t.set("value",e.get("value")),e.setStyle("height",t._node.scrollHeight+"px"),e.setStyle("minHeight",t._node.scrollHeight+"px")})),this.registerEventHandler(e.on("keydown",function(n){t.set("value",e.get("value")),e.setStyle("height",t._node.scrollHeight+"px"),e.setStyle("minHeight",t._node.scrollHeight+20+"px")}))},updateBlast:function(t,n,r){var i=this.get("groupBlastModel"),s=this.get("container"),o=this,u=this.get("groupModel").toJSON(),a=i.getValue("blastMessageSecure"),f=s.one(".blast-message-edited").get("value"),l,c=496;if(f.trim()===""){this.deleteBlast(t,n);return}if(f.length>c){l=new e.Views.FluidModal({appContext:o.appContext,title:o.intlMessage({intlName:"common.OOPS"}),message:o.intlMessage({intlName:"groups.LONG_BLAST_ERROR",count:f.length}),actionButtonLabel:o.intlMessage({intlName:"common.OK"}),showCancelButton:!1}),l.show();return}n.set("text",f),this.disableEditing=!0,t.removeClass("editing"),i.registry.remote.update({blast:f,id:this.groupId,user:this.appContext.getViewer().nsid,status:u.isAdmin?4:3},this.appContext).then(function(e){o.buildContainer(),o.activate(),this.disableEditing=!1},function(t){l=new e.Views.FluidModal({appContext:o.appContext,title:o.intlMessage({intlName:"common.OOPS"}),message:o.intlMessage({intlName:"groups.UPDATE_BLAST_ERROR"}),actionButtonLabel:o.intlMessage({intlName:"common.OK"}),showCancelButton:!1}),l.show(),n.setHTML(a),this.disableEditing=!1})},deleteBlast:function(t,n){var r=this.get("groupBlastModel"),i=this,s=this.get("groupModel").toJSON(),o=r.getValue("blastMessageSecure"),u="";n.set("text",this.intlMessage({intlName:"groups.REMOVING_BLAST"})),this.disableEditing=!0,t.removeClass("editing"),r.registry.remote.update({blast:u,id:this.groupId,user:this.appContext.getViewer().nsid,status:s.isAdmin?4:3},this.appContext).then(function(e){i.buildContainer(),i.activate(),this.disableEditing=!1},function(t){var r=new e.Views.FluidModal({appContext:i.appContext,title:i.intlMessage({intlName:"common.OOPS"}),message:i.intlMessage({intlName:"groups.DELETE_BLAST_ERROR"}),actionButtonLabel:i.intlMessage({intlName:"common.OK"}),showCancelButton:!1});r.show(),n.setHTML(o),this.disableEditing=!1})}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-group-blast","fluid-modal-view"],optional:["group-blast-models"],langBundles:["common","groups"]});
YUI.add("fluid-magic-groups-subnav-view",function(e){"use strict";var t;e.FlickrView.create(this.name,e.namespace("Views")["fluid-subnav-view"],[],{langBundles:this.details.langBundles,initializer:function(e){return e.hasJoin=!0,e.fullBleed=!1,this.appStateParams=e,this.groupId=e.groupId||e.nsid,this.skipLoadingPersonModel=!0,t=this.intlMessage({intlName:"groups.GROUPS"})+" BETA",this.constructor.superclass.initializer.call(this,e)},loadState:function(){var e=this,t=[];return t.push(e.appContext.getModel("group-info-models",this.groupId).then(function(t){var n=t;e.set("models",n),e.populateUrls(n),e.set("canEditCoverPhoto",n.getValue("group").getValue("isAdmin"))},function(t){e.set("canEditCoverPhoto",!1)})),this.constructor.superclass.loadState.call(this,t)},populateUrls:function(t){var n=t.getValue("group"),r=n.getValue("isAdmin")||n.getValue("isModerator"),i=n.getValue("isMember"),s=i||n.getValue("showPoolToNonMembers"),o=i||n.getValue("showDiscussionToNonMembers"),u=this,a,f;a=e.URLHelper.generateGroupUrls(t.getValue("group")),this.set("links",[{name:this.intlMessage({intlName:"header.OVERVIEW"}),id:"overview",href:a.about},{name:this.intlMessage({intlName:"header.ADMINISTRATION"}),id:"admin",href:a.admin,disabled:function(){return!r}},{name:this.intlMessage({intlName:"header.DISCUSSIONS"}),id:"discussions",href:a.discussions,disabled:function(){return!o}},{name:this.intlMessage({intlName:"header.PHOTOS"}),id:"pool",href:a.photos,disabled:function(){return!s}},{name:this.intlMessage({intlName:"header.MEMBERS"}),id:"members",href:a.members},{name:this.intlMessage({intlName:"header.MAP"}),id:"map",href:a.map},{name:this.intlMessage({intlName:"header.INVITE"}),id:"invite",href:a.invite,disabled:function(){return!i}}]),this.get("selected")&&(f=this.get("links").filter(function(e){return e.id===u.get("selected")}),f[0].selected=!0)}})},"@VERSION@",{requires:["flickr-view","fluid-subnav-view","url-helper"],langBundles:["header","groups","common"]});
YUI.add("fluid-group-coverphoto-view",function(e){e.FlickrView.create(this.name,e.namespace("Views")["fluid-coverphoto-view"],[],{langBundles:this.details.langBundles,subviewConfig:{"join-group-view":{requiredToShowOnClient:!0,doRefreshOnStatusChange:!0,requiredToShowOnServer:!1}},initializer:function(e){return e.hasJoin=!0,e.fullBleed=!1,this.appStateParams=e,this.groupId=e.groupId||e.nsid,this.subviewConfig["join-group-view"].hasMenu=this.appContext.flipper.isFlipped("enable-feed-card-caret"),this.constructor.superclass.initializer.call(this,e)},loadState:function(){var t=this,n=[];return n.push(t.appContext.getModel("group-info-models",this.groupId)),n.push(this.getViewer()),e.Promise.all(n).then(function(e){var n=t.get("models");n.groupInfo=e[0],n.group=n.groupInfo.getValue("group"),t.set("models",n),t.set("canEditCoverPhoto",n.group.getValue("isAdmin"))})},buildContainer:function(){var t={},n=this.get("models").group,r=e.URLHelper.generateGroupUrls(n);return t=e.merge(t,this.buildGroupCoverPhoto(),this.buildAvatar(),this.buildTitleBlock(r),this.buildMetadata(),this.buildJoinButton()),t.iconMessage=this.intlMessage({intlName:"header.CHANGE_YOUR_GROUP_ICON"}),this.constructor.superclass.buildContainer.call(this,t),this},activate:function(){this.signinPendingQueue=e.SigninHelper.checkPendingQueue(this.appContext);if(this.signinPendingQueue&&this.signinPendingQueue.length>0){var t=this.signinPendingQueue;for(var n=0;n<t.length;n++)if(t[n].key==="joingroup"&&t[n].value.id===this.groupId){this.subviews["join-group-view"].joinGroup(this.groupId);break}}return this.constructor.superclass.activate.call(this)},buildJoinButton:function(){return{"follow-view":this.subviews["join-group-view"].get("container")}},buildTitleBlock:function(e){return{titleBlock:{isGroup:!0,title:this.get("models").groupInfo.getValue("group").getValue("title"),titleLink:e.about,urls:{rules:e.rules}}}},buildMetadata:function(){var t=this.get("models").group,n=e.URLHelper.generateGroupUrls(t),r=t.getValue("poolCount"),i=t.getValue("memberCount"),s=t.getValue("topicCount"),o=t.getValue("dateCreated");return{metadata:[{date:o.toDate(),groupSince:!0},{groupsStats:!0,members:e.Number.format(e.Number.parse(Math.max(0,i)),{thousandsSeparator:",",decimalPlaces:0}),membersLink:n.members,poolLink:n.photos,discussionsLink:n.discussions,photosText:e.flutil.formatIntlPluralNumber(this.intlMessage({intlName:"header.COUNT_PHOTOS",count:r}),r),topicCount:e.Number.format(e.Number.parse(Math.max(0,s)),{thousandsSeparator:",",decimalPlaces:0})}]}},buildAvatar:function(){var t=this.get("models"),n=t&&this.get("models").group,r=n&&n.getValue("iconurls"),i=n&&n.getValue("bestIconURL"),s=n&&e.URLHelper.generateGroupUrls(n),o=!1;return n?(o=r.retina===i,{avatar:{canEdit:n.getValue("isAdmin"),editUrl:"/iconbuilder/?group="+n.getValue("id"),linkUrl:s.about,icon:{retina:o?i:null,lowres:o?null:i},type:"group"}}):null}})},"@VERSION@",{requires:["flickr-view","flickr-promise","url-helper","fluid-coverphoto-view","join-group-view","fluid-modal-view","signin-helper"],optional:["group-models","group-info-models","group-pool-models","photostream-models"],langBundles:["header","common","groups"]});
YUI.add("hermes-template-groups-toolbar-view",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="groups-toolbar-content">\n	<div class="groups-toolbar-share-content">\n		'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["fluid-share-group-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	</div>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/groups-toolbar-view",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-share-group-view",function(e,t){var n=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.namespace("Views")["fluid-share-view"],[],{langBundles:this.details.langBundles,subClassName:t,initializer:function(e){return this.groupId=e.groupId,this.constructor.superclass.buildContainer.call(this,{extraShareButtonIconClassList:"share-group-icon",showShareButtonLabel:!1,sharingDisabled:!1,shareTooltip:this.intlMessage({intlName:"share-modal.SHARE_GROUP"})})},loadState:function(){return this.isEnglishLang?e.Promise.resolve():this.loadRequiredModels()},getItemCount:function(){return this.isEnglishLang?this.loadRequiredModels():e.Promise.resolve(1)},loadRequiredModels:function(){var e=this;return this.appContext.getModel("group-models",e.groupId).then(function(t){return e.set("groupModel",t),e.appContext.getModel("group-pool-models",e.groupId).then(function(t){if(t)return e.isDisabled=t.getValue("group").getValue("privacy")===1||t.getValue("group").getValue("privacy")===2,t.getValue("photoPageList").getPage({perPage:5}).then(function(t){e.set("photos",t)});e.isDisabled=!0},function(t){if(t.code!==2&&t.code!==4)throw t;n.warn("Error loading pool model",{err:t}),e.isDisabled=!0})},function(t){if(t.code!==2&&t.code!==4)throw t;n.warn("Error loading pool model",{err:t}),e.isDisabled=!0})},buildContainer:function(){return this.constructor.superclass.buildContainer.call(this,{extraShareButtonIconClassList:"share-group-icon",showShareButtonLabel:!1,sharingDisabled:this.isDisabled,shareTooltip:this.intlMessage({intlName:"share-modal.SHARE_GROUP"})}),this},prepareFacebookShareParameters:function(){return{url:this.get("groupModel").getValue("url")}},prepareTwitterShareParameters:function(){var t=this.get("groupModel");return{url:e.URLHelper.getShortGroupURL(t.getValue("id")),title:t.getValue("title")}},prepareTumblrShareParameters:function(){var e=this.get("groupModel");return{title:e.getValue("title"),description:e.getValue("description"),displayPhotoURL:this.get("photos").map(function(e){return e.getLargestSize().url}),url:e.getValue("url"),tags:"Flickr"}},preparePinterestShareParameters:function(){var t=this.get("groupModel");return{title:t.getValue("title"),description:t.getValue("description"),displayPhotoURL:this.get("photos").length>0?this.get("photos")[0].getLargestSize().url:null,shortURL:e.URLHelper.getShortGroupURL(t.getValue("id")),url:t.getValue("url"),count:1}},prepareFlickrShareParameters:function(){var e=this.get("groupModel");return{title:e.getValue("title"),modelName:"group",modelId:e.getValue("id"),url:e.getValue("url"),count:1}},prepareLinkShareParameters:function(){var t=this.get("groupModel");return{url:t.getValue("url"),shortURL:e.URLHelper.getShortGroupURL(t.getValue("id")),supportsEmbedr:!0,supportsBBCode:!0,sizes:t.getValue("sizes"),title:t.getValue("title")}},getTitleIntlKey:function(){return"SHARE_GROUP_TO"},getGuestPassParams:function(){return{contentMarkedFriends:!1,contentMarkedFamily:!1,contentMarkedPublic:!0,contentMarkedFriendFamily:!1,canSharePrivate:!1,showGuestPassDropdown:!1,multipleItems:!0}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-share-view","url-helper"],langBundles:["models","default"]});
YUI.add("groups-toolbar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"fluid-share-group-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,parentViewName:this.name,disabled:function(e){return e.isMobile}}},buildContainer:function(){return this.setContainerWithTemplate("groups-toolbar-view"),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-groups-toolbar-view","fluid-share-group-view"],optional:[],langBundles:["groups"]});
YUI.add("group-home-page-view",function(e,t){var n;e.namespace("Views")[this.name]=e.Base.create("group-home-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,e.nsid=e.groupId,this.isTwitterbot=e.isTwitterbot,this.pageParams=e.pageParams,this.notification=e.notification,this.showPool=e.showPool,this.localStorageKey=this.groupId+this.appContext.getViewer().nsid,n=this.intlMessage({intlName:"groups.GROUPS"})+" "+this.intlMessage({intlName:"common.BETA"}),e.subnavConfig={selected:"overview"},this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"group-pool-preview-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,titleKey:"groups.POOL_PREVIEW_HEADER",disabled:function(){return!this.showPool}},"groups-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-magic-groups-subnav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-group-coverphoto-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"group-discussion-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,titleKey:"groups.DISCUSSIONS"},"group-top-contributors-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,titleKey:"groups.TOP_CONTRIBUTORS"},"opt-out-widget-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,optOutLabelText:function(){return n},optOutFeedbackUrl:function(){return e.flutil.getGroupsOptoutValues(this.flippers).url},optOutFlippers:function(){return e.flutil.getGroupsOptoutValues(this.flippers).flippers}},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"group-18-plus-confirmation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"group-blast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,pageType:"group"}},loadState:function(){var t=this,n={groupInfo:this.appContext.getModel("group-info-models",this.groupId),groupBlast:this.appContext.getModel("group-blast-models",this.groupId),groupActivity:this.appContext.getModel("group-activity-models",this.groupId)};return(new e.FlickrPromise(n)).then(function(e){return t.set("needsInterstitial",e.groupInfo.getValue("group").getValue("needsInterstitial")),t.set("groupInfoModel",e.groupInfo),t.set("groupModel",e.groupInfo.getValue("group")),t.set("groupBlastModel",e.groupBlast),t.set("groupActivityModel",e.groupActivity),t.appContext.getModel("group-pool-models",t.groupId).then(function(e){t.set("groupPoolModel",e)},function(e){if(e.code!==2&&e.code!==4)throw e})})},buildContainer:function(){var e,t=!0,n,r=this.makeAdditionalInfo(),i=!1,s=this.get("groupModel").toJSON(),o=this.get("groupInfoModel").toJSON(),u=s.url+"admin/pending",a=s.urlPendingMembersPage,f,l=o.isInvited;o.isMember?f=!1:f=this.get("needsInterstitial");if(s.isModerator||s.isAdmin)s.pendingCount>0&&(i=!0),s.memberPendingCount>0&&(n=!0);return e={"group-info":o,additionalField:r,discussionHidden:t,notification:this.notification,showPool:this.showPool,showPendingCount:i,showMemberPendingCount:n,pendingCount:s.pendingCount,pendingAdminURL:u,pendingMemberCount:s.memberPendingCount,pendingMemberURL:a,needsInterstitial:f,showInvited:l},e.centeredContainerClass="fluid-centered",this.setContainerWithTemplate("group-home-page",e),this},activate:function(){var t=this;return e.StorageHelper.getItem(this.localStorageKey)&&(this.set("needsInterstitial",!1),this.buildContainer()),this.subviews["group-18-plus-confirmation-view"].on("clickSee18Plus",function(e){t.set("needsInterstitial",!1),t.buildContainer()}),this.get("needsInterstitial")&&this.subviews["group-18-plus-confirmation-view"].isActivated&&this.subviews["group-18-plus-confirmation-view"].removeLoadingState(),e.later(100,this,function(){e.use("photo-page-scrappy-view")}),this},makeAdditionalInfo:function(){var e,t=this.get("groupInfoModel"),n=t.getValue("throttle"),r=t.getValue("restrictions"),i,s,o;if(n||r)e=[],n&&n.mode!=="none"&&n.mode!=="disabled"&&(n.mode==="ever"?s="groups.POST_THRESHOLD_EVER":n.mode==="day"?s="groups.POST_THRESHOLD_DAY":n.mode==="month"?s="groups.POST_THRESHOLD_MONTH":n.mode==="week"&&(s="groups.POST_THRESHOLD_WEEK"),e.push({field:this.intlMessage({intlName:s,count:n.count,timeframe:n.mode})})),r&&(i=this.makeAcceptedContentTypes(r),o=this.makeAcceptedSafetyLevels(r),e.push({field:this.intlMessage({intlName:"groups.ACCEPTED_CONTENT_TYPES"})+" "+i.map(function(e){return"<b>"+e+"</b>"}).join(", ")}),e.push({field:this.intlMessage({intlName:"groups.ACCEPTED_SAFETY_LEVELS"})+" "+o.map(function(e){return"<b>"+e+"</b>"}).join(", ")}));return e},makeAcceptedContentTypes:function(e){var t=[],n={photosOk:"groups.PHOTOS",videosOk:"groups.VIDEOS",imagesOk:"groups.IMAGES",artOk:"groups.ART",screensOk:"groups.SCREENSHOTS"},r,i=this,s=function(e){t.push(i.intlMessage({intlName:e}))};for(r in n)e[r]&&s(n[r]);return t},makeAcceptedSafetyLevels:function(e){var t=[],n={safeOk:"groups.SAFE",moderateOk:"groups.MODERATE",restrictedOk:"groups.RESTRICTED"},r,i=this,s=function(e){t.push(i.intlMessage({intlName:e}))};for(r in n)e[r]&&s(n[r]);return t},buildHeadContainer:function(){if(this.get("groupPoolModel")){var t=this.get("groupModel"),n=this.get("groupPoolModel"),r=this.get("groupInfoModel"),i=n.getValue("photoPageList").getList(),s="summary",o=[],u,a,f=(this.pageParams.nominalPage-1)*this.pageParams.viewPageSize||0,l=r.getValue("description"),c;if(this.isTwitterbot&&i.length>=4){s="gallery";for(c=f;c<4;c++)try{o.push({property:"twitter:image"+c,content:i[c].getSizeToFit({width:640,height:640}).url})}catch(h){}}if(i.length>0)try{u=i[f].getSizeToFit({width:640,height:640})}catch(h){u={}}else u={};a=this.templates("dynamic-page-head")({title:t.getValue("title"),description:l,url:t.getValue("url"),fullURL:e.url(t.getValue("url")),openGraphImageURL:u.url?e.URLHelper.addProtocolToURL(u.url):null,openGraphaImageWidth:u.width,openGraphaImageHeight:u.height,twitterCardType:s,ownerURL
:"/groups"+t.getValue("pathAlias"),twitterImages:o,flickrType:"group",domain:e.url(),feeds:[{title:this.intlMessage({intlName:"meta.GROUP_POOL_ATOM_TITLE",groupName:t.getValue("title")}),url:"/services/feeds/groups_pool.gne?id="+t.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"},{title:this.intlMessage({intlName:"meta.GROUP_DISCUSSIONS_ATOM_TITLE",groupName:t.getValue("title")}),url:"/services/feeds/groups_discuss.gne?id="+t.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"}]}),a+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"}),a+=this.templates("head-link")({rel:"canonical",href:e.url(t.getValue("url"))}),this.set("headContainer",a),YUI.Env.isServer||this.updateHead()}}},{ATTRS:{spaceid:{value:792600549}}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","footer-full-view","group-top-contributors-view","group-18-plus-confirmation-view","group-pool-preview-view","hermes-template-group-home-page","hermes-template-dynamic-page-head","storage-helper","opt-out-widget-view","group-blast-view","fluid-magic-groups-subnav-view","fluid-group-coverphoto-view","groups-toolbar-view","hermes-template-head-link","hermes-template-head-meta"],langBundles:["groups","common","meta"]});
