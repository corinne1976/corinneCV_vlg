YUI.add("hermes-template-fluid-modal",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" html-modal"},3:function(e,t,n,r,i){return" subview-modal"},5:function(e,t,n,r,i){return'<div class="close-x" aria-label="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.CLOSE"},data:i}))+'" tabindex="0"></div>'},7:function(e,t,n,r,i){var s;return'		<div class="head">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.navBarView:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:"")+'			<div class="extra"></div>\n		</div>\n'},8:function(e,t,n,r,i){return'				<div class="nav"></div>\n'},10:function(e,t,n,r,i){var s;return'				<div class="title">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.title:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))!=null?s:"")+"				</div>\n"},11:function(e,t,n,r,i){var s;return"						"+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+"\n"},13:function(e,t,n,r,i){return"						"+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},t!=null?t.htmlTitle:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n"},15:function(e,t,n,r,i){return" lines"},17:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing;return'			<div\n				class="content text-only '+((s=n["if"].call(u,t!=null?t.noScroll:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,t!=null?t.showFooter:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"\n				style="'+((s=(n.ifDefined||t&&t.ifDefined||a).call(u,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+e.escapeExpression((o=(o=n.textMessage||(t!=null?t.textMessage:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"textMessage",hash:{},data:i}):o))+"\n			</div>\n"},18:function(e,t,n,r,i){return" no-scroll"},20:function(e,t,n,r,i){return" has-footer"},22:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return"\n					padding-right: "+l((o=(o=n.contentPadding||(t!=null?t.contentPadding:t))!=null?o:a,typeof o===f?o.call(u,{name:"contentPadding",hash:{},data:i}):o))+"px;\n					"+((s=n["if"].call(u,t!=null?t.showFooter:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(23,i,0),data:i}))!=null?s:"")+"\n					padding-left: "+l((o=(o=n.contentPadding||(t!=null?t.contentPadding:t))!=null?o:a,typeof o===f?o.call(u,{name:"contentPadding",hash:{},data:i}):o))+"px;\n				"},23:function(e,t,n,r,i){var s;return"padding-bottom: "+e.escapeExpression((s=(s=n.contentPadding||(t!=null?t.contentPadding:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"contentPadding",hash:{},data:i}):s))+"px;"},25:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return'			<div\n				class="content html-only '+((s=n["if"].call(o,t!=null?t.noScroll:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.showFooter:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"\n				style="'+((s=(n.ifDefined||t&&t.ifDefined||u).call(o,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.htmlMessage:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n			</div>\n"},27:function(e,t,n,r,i){var s,o=t!=null?t:{};return'			<div\n				class="content subview '+((s=n["if"].call(o,t!=null?t.noScroll:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.showFooter:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"\n				style="'+((s=(n.ifDefined||t&&t.ifDefined||n.helperMissing).call(o,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></div>\n'},29:function(e,t,n,r,i){var s;return'		<div class="foot">\n'+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.buttons:t)!=null?s.visible:s,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))!=null?s:"")+"		</div>\n"},30:function(e,t,n,r,i){var s,o=t!=null?t:{};return'			<div class="buttons">\n				'+((s=n["if"].call(o,(s=(s=t!=null?t.buttons:t)!=null?s.action:s)!=null?s.visible:s,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				"+((s=n["if"].call(o,(s=(s=t!=null?t.buttons:t)!=null?s.cancel:s)!=null?s.visible:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.buttons:t)!=null?s.flavorText:s,{name:"if",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+"			</div>\n"},31:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<button class="mini '+((s=n["if"].call(o,(s=(s=t!=null?t.buttons:t)!=null?s.action:s)!=null?s.isDangerous:s,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+' action"'+((s=n["if"].call(o,(s=(s=t!=null?t.buttons:t)!=null?s.action:s)!=null?s.disabled:s,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+e.escapeExpression(e.lambda((s=(s=t!=null?t.buttons:t)!=null?s.action:s)!=null?s.label:s,t))+"</button>"},32:function(e,t,n,r,i){return"danger"},34:function(e,t,n,r,i){return' disabled="disabled"'},36:function(e,t,n,r,i){var s;return'<button class="mini alt cancel">'+e.escapeExpression(e.lambda((s=(s=t!=null?t.buttons:t)!=null?s.cancel:s)!=null?s.label:s,t))+"</button>"},38:function(e,t,n,r,i){var s,o=t!=null?t:{};return'				<div class="flavor-text secondary'+((s=n.unless.call(o,(s=(s=t!=null?t.buttons:t)!=null?s.flavorText:s)!=null?s.visible:s,{name:"unless",hash:{},fn:e.program(39,i,0),inverse
:e.noop,data:i}))!=null?s:"")+'">'+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(o,(s=(s=t!=null?t.buttons:t)!=null?s.flavorText:s)!=null?s.text:s,{name:"renderTrustedMarkup",hash:{},data:i}))+"</div>\n"},39:function(e,t,n,r,i){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'<div class="modal'+((s=n["if"].call(u,t!=null?t.htmlMessage:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,t!=null?t.subview:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+e.escapeExpression((o=(o=n.classList||(t!=null?t.classList:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"classList",hash:{},data:i}):o))+'">\n	'+((s=n["if"].call(u,t!=null?t.showCancelX:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showHeader:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	<div class="body'+((s=n["if"].call(u,t!=null?t.showBodyLines:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(u,t!=null?t.textMessage:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,t!=null?t.htmlMessage:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,t!=null?t.subview:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n"+((s=n["if"].call(u,t!=null?t.showFooter:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-modal-view",function(e,t){"use strict";var n=require("hermes-core/flog")(t),r,i;r={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},i={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.set("isActiveViewAgnostic",!0);var n=this.get("modalOverlayType");return this.alreadyShowingModal=n.alreadyShowingModal(),this.alreadyShowingModal||(n.add(this),e.OverlayManager.ModalOverlay.setOverlayStyle({overlayClassList:this.get("overlayClassList")})),this},activate:function(){var t=this.get("container"),n=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(r.css.closeX).on(["click","keydown"],function(e){(e.type==="click"||e.keyCode===13)&&this.handleX(e)},this)),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(r.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(r.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){n.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){n.reposition()})),this.get("navBarView")&&n.get("navBarView").activate(),this.get("subview")&&(n.get("subview").normalizedActivate(),n.registerEventHandler(n.get("subview").on("actionClick",e.bind(n.handleAction,n)))),this.registerEventHandler(t.delegate("keydown",this.keyboardSelectRadio.bind(this),"label")),this.registerEventHandler(t.ancestor("body").once("key",this.focusOnFirstTab.bind(this),"down:9")),e.Accessibility.manageFocusOutlines(this),this.registerEventHandler(e.on("modal:updateText",function(e){n.set("title",e.title),n.set("cancelButtonLabel",e.cancelText),n.set("actionButtonLabel",e.actionText),t.one(".title").set("textContent",e.title),t.one(".cancel").set("textContent",e.cancelText),t.one(".action").set("textContent",e.actionText)})),this.fire("activated"),this},focusOnFirstTab:function(e){var t=this.get("container").one("[tabindex]");t&&t.focus()},keyboardSelectRadio:function(e){if(e.keyCode===13){var t=this.get("container").one("#"+e.target.getAttribute("for"));t.set("checked",!t.get("checked"))}},clearOutline:function(){var t=e.one(document.activeElement);t&&t.addClass("no-outline")},restoreOutline:function(){var e=this.get("container").one(":focus");e&&e.removeClass("no-outline")},show:function(){return this.initialize().then(null,function(e){n.error("Error initializing modal",{err:e})}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t=this,s=e.one(r.css.destinationContainer),o;o={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),lightOverlay:this.get("lightOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList"),contentPadding:this.get("contentPadding")},this.get("buttonFlavorText")&&(o.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerWithTemplate("fluid-modal",o),i.modal.width=this.get("width"),i.modal.minWidth=this.get("minWidth"),i.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=t.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("subview")&&e.details[0]==="navigation"?t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)):t.get("subview")&&e.details[0]==="search"&&t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(r.css.navBarContent).appendChild(e.get("container")),t.get("subview")||t.activate()})),this.get("subview")?(this.get("subview").appContext=t.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){t.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("navBarView")&&e.details[0]==="backToList"&&t.get("navBarView").fire.apply(t.get("navBarView"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(r.css.subviewContent)
.appendChild(e.get("container")),s&&(s.append(t.get("container")),t.reposition()),t.activate()},function(e){n.error("Error initializing modal subview",{err:e})})):s&&(s.append(this.get("container")),this.reposition())}return this},reposition:function(){var t=this.get("container"),n=t.one(this.get("modalSelector")),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=i.modal.width?parseInt(i.modal.width,10):parseInt(n.getComputedStyle("width"),10),f,l=20,c={},h,p,d=n.one(".body"),v=0,m=this.get("showFooter")?parseInt(n.one(".foot").getComputedStyle("height"),10):0,g=0,y=parseInt(d.getComputedStyle("borderTopWidth"),10)+parseInt(d.getComputedStyle("borderBottomWidth"),10),b={},w;i.modal.height&&(w=n.one(".head"),v=w?parseInt(n.one(".head").getComputedStyle("height"),10):0,g=i.modal.height,n.get("showFooter")&&(m=parseInt(n.one(".foot").getComputedStyle("height"),10)),i.modal.height+v+m+4*l+y>=u&&(u<=700?g=u-v-m-y:g=u-v-m-4*l-y),n.setStyles({maxHeight:"none"}),this.get("fullWindow")?b.height=g+"px":this.get("maxHeight")&&(b.maxHeight=g+"px"),n.one(r.css.modalContent).setStyles(b)),f=parseInt(n.getComputedStyle("height"),10),h=n.getDOMNode().scrollHeight,p=n.getDOMNode().scrollWidth,c={top:"50%",left:"50%",width:i.modal.width?a+"px":"",marginTop:-(f/2)+"px",marginLeft:-(a/2)+"px",minWidth:i.modal.minWidth?i.modal.minWidth+"px":""},f+2*l>u||h>f+1||a+2*l>o||p>a?(u<=700&&i.modal.height?c.maxHeight=u-10+"px":(c.maxHeight=u-2*l+"px",c.overflow="auto"),c.maxWidth=o-2*l+"px",c.marginTop=-(Math.min(parseInt(c.maxHeight,10),f)/2)+"px",c.marginLeft=-(Math.min(parseInt(c.maxWidth,10),a)/2)+"px"):(c.maxHeight="inherit",c.maxWidth="inherit",c.overflow="visible"),n.setStyles(c)},handleX:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),r&&r.handleX&&r.handleX(),this.close(n),this.fire("cancelClick",n)},handleCancel:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick");if(!r||!r.handleCancel||r.handleCancel()!==!1)this.fire("cancelClick",n),this.close(n)},handleAction:function(e){var t=this.get("subview");if(!t||!t.handleAction||t.handleAction()!==!1)this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var n=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),n&&n.remove(!0),this.fire("close",t),this.destroy(),this.get("removeOverlayOnClose")||this.get("modalOverlayType").remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},lightOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0},modalSelector:{value:".modal"},modalOverlayType:{value:e.OverlayManager.ModalOverlay},removeOverlayOnClose:{value:!1},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},contentPadding:{value:undefined,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-modal","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-signup-modal",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return" "+e.escapeExpression((s=(s=n.signUpHeaderClass||(t!=null?t.signUpHeaderClass:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"signUpHeaderClass",hash:{},data:i}):s))},3:function(e,t,n,r,i){var s;return" style=\"background-image:url('"+e.escapeExpression((s=(s=n.signUpHeaderImage||(t!=null?t.signUpHeaderImage:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"signUpHeaderImage",hash:{},data:i}):s))+"')\""},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="signup-modal-body">\n	<div class="head'+((s=n["if"].call(u,t!=null?t.signUpHeaderClass:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"'+((s=n["if"].call(u,t!=null?t.signUpHeaderImage:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'></div>\n	<h3 class="signup-title">'+l((o=(o=n.signUpTitle||(t!=null?t.signUpTitle:t))!=null?o:a,typeof o===f?o.call(u,{name:"signUpTitle",hash:{},data:i}):o))+'</h3>\n	<p class="signup-message">'+l((o=(o=n.signUpMessage||(t!=null?t.signUpMessage:t))!=null?o:a,typeof o===f?o.call(u,{name:"signUpMessage",hash:{},data:i}):o))+'</p>\n	<button class="large action signup-button">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:i}))+'</button>\n</div>\n<div class="signup-modal-footer">\n	<span>'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.HAVE_YAHOO_ACCOUNT"},data:i}))+'</span>\n	<a href="#" class="signin-link">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/signup-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("signup-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").SignUpModal=e.FlickrView.create(this.name,e.Views.FluidModal,[],{initializer:function(e){return this.set("showFooter",!1),this.set("showHeader",!1),this.set("showButtonFlavorText",!1),this.set("showButtons",!1),this.set("showActionButton",!1),this.set("showCancelButton",!1),this.set("signUpHeaderClass",e.signUpHeaderClass),this.set("signUpHeaderImage",e.signUpHeaderImage),this.set("signUpTitle",e.signUpTitle),this.set("signUpMessage",e.signUpMessage),this.set("beaconPrefix",e.beaconPrefix),this.set("classList","signup-modal"),this},buildContainer:function(){if(!this.alreadyShowingModal){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalShow");var t={signUpHeaderClass:this.get("signUpHeaderClass"),signUpHeaderImage:this.get("signUpHeaderImage"),signUpTitle:this.get("signUpTitle"),signUpMessage:this.get("signUpMessage")};this.set("htmlMessage",this.templates("signup-modal")(t)),this.constructor.superclass.buildContainer.call(this)}return this},activate:function(){return this.get("container").one(".signup-button").on("click",this.handleAction.bind(this)),this.get("container").one(".signin-link").on("click",this.handleSignIn.bind(this)),this.constructor.superclass.activate.call(this),this},handleSignIn:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignInClick"),this.fire("signInClick",t),this.constructor.superclass.handleAction.call(this)},handleAction:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignUpClick"),this.fire("signUpClick",t),this.constructor.superclass.handleAction.call(this)},handleCancel:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"CancelClick"),this.constructor.superclass.handleCancel.call(this)}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-modal"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-signup-interstitial",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'<div class="signup-interstitial-body interstitial-fade">\n	<div class="close-x"></div>\n	<div class="body">\n		<div class="logo"></div>\n		<h3 class="signup-interstitial-message">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE"},data:i}))+'</h3>\n		<div><a href="/signup" class="butt large action signup-button">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:i}))+'</a></div>\n		<a href="/signin" class="signin-link">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/signup-interstitial",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("signup-interstitial-view",function(e,t){"use strict";var n;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content",modalSelector:".modal"},options:{}},e.namespace("Views").SignUpInterstitial=e.FlickrView.create(this.name,e.Views.FluidModal,[],{langBundles:this.details.langBundles,buildContainer:function(){var t=e.one(n.css.destinationContainer);if(!this.alreadyShowingModal){var r={signUpMessage:this.get("signUpMessage")};this.setContainerWithTemplate("signup-interstitial",r),t&&(t.append(this.get("container")),this.reposition(),this.get("modalOverlayType").get("overlay").removeClass("interstitial-fade"),this.get("container").one(".signup-interstitial-body").removeClass("interstitial-fade"))}return this},activate:function(){var e=this.get("container");this.registerEventHandler(e.one(".signup-button").on("click",this.instrumentSignupClick.bind(this))),this.registerEventHandler(e.one(".signin-link").on("click",this.instrumentSigninClick.bind(this))),this.constructor.superclass.activate.call(this)},instrumentSignupClick:function(n){e.rapidTracker.beacon(t,"signupIntSignupClick")},instrumentSigninClick:function(n){e.rapidTracker.beacon(t,"signupIntSigninClick")},show:function(){e.rapidTracker.beacon(t,"signupIntShown"),this.constructor.superclass.show.call(this)},close:function(n){e.rapidTracker.beacon(t,"signupIntCancelClick"),this.constructor.superclass.close.call(this,n)}},{ATTRS:{showFooter:{value:!1},showHeader:{value:!1},showButtonFlavorText:{value:!1},showButtons:{value:!1},showActionButton:{value:!1},showCancelButton:{value:!1},modalSelector:{value:".signup-interstitial-body"},modalOverlayType:{value:e.OverlayManager.SignupInterstitialOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-interstitial"],optionalRequires:["fluid"],langBundles:["common","growth"]});
YUI.add("hermes-lang-growth_fr-fr",function(e,t){e.Intl.add("hermes/growth","fr-FR",{MINI_SIGNUP_FOOTER_MESSAGE:["Ne manquez jamais un article de ","${username}"],MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE:["Rejoindre la communaut\u00e9 Flickr pour d\u00e9couvrir des photos exceptionnelles"],MINI_SIGNUP_FOOTER_MESSAGE_SEARCH:["Rejoindre la communaut\u00e9 Flickr pour voir plus de photos de ","${query}","\u00a0!"]})},"@VERSION@",{requires:["intl"]});
YUI.add("signin-helper",function(e){function t(t,n){e.FlickrStorage.store(t,n)}function n(e,n){var r="fave";t(r,e),m(r,n)}function r(e,t){var n="comment";m(n,t)}function i(e,n){var r="share";t(r,e),m(r,n)}function s(e,n){var r="joingroup";t(r,e),m(r,n)}function o(e,n){var r="follow";t(r,e),m(r,n)}function u(e,n){var r="download";t(r,e),m(r,n)}function a(e,n){var r="fave";t(r,e),y(r,n)}function f(e,t){var n="comment";y(n,t)}function l(e,n){var r="joingroup";t(r,e),y(r,n)}function c(e,n){var r="follow";t(r,e),y(r,n)}function h(e,n){var r="download";t(r,e),y(r,n)}function p(t){var n,r,i=[];if(!t)return;if(e.FlickrStorage.hasEntries()){n=e.FlickrStorage.retrieve();for(r in n)d(t,n[r])||i.push(n[r])}return e.FlickrStorage.remove(),i}function d(e,t){var n=t.key,r=t.value;switch(n){case"fave":return v(e,r),!0;case"share":return!1}}function v(e,t){var n=t.id,r=e.getModelRegistry("photo-engagement-models");r.then(function(e){var t=e.proxy(n);t.registry.addAsFave(n)&&t.remoteUpdate()})}function m(t,n){var r,i;n&&n.withPopup?(r=e.config.win.open(g(n),"_blank","height=650,resizable=1,scrollbars=1,location=yes"),i=setInterval(function(){r.closed&&(clearInterval(i),window.location.reload())},1e3)):e.config.win.location=g(n)}function g(t){t=t||{},t.closeWhenDone&&(t.postLoginUrl=e.url("/photo_grease_postlogin.gne",{protocol:!1}));var n=t.postLoginUrl||e.config.win.location.href,r=t.url||e.url("/signin/yahoo/",{protocol:!1});return r+"?redir="+encodeURIComponent(n)}function y(t,n){n=n||{};var r=n.postLoginUrl||e.config.win.location.href,i=n.url||e.url("/signup/",{protocol:!1});e.config.win.location=i+"?redir="+encodeURIComponent(r)}e.FlickrStorage={_storageKey:"flickrStorage",store:function(t,n){try{var r=[];e.StorageHelper.hasEntries(this._storageKey)&&(r=this.retrieve()),r.push({key:t,value:n}),e.StorageHelper.setItem(this._storageKey,JSON.stringify(r))}catch(i){}},retrieve:function(){var t={};try{t=JSON.parse(e.StorageHelper.getItem(this._storageKey))}catch(n){}return t},remove:function(){try{e.StorageHelper.remove(this._storageKey)}catch(t){}},hasEntries:function(){return e.StorageHelper.hasEntries(this._storageKey)}},e.SigninHelper={savePreLoginAction:t,addPendingFave:n,addPendingComment:r,addPendingShare:i,addPendingFollow:o,addPendingJoinGroup:s,addPendingDownload:u,checkPendingQueue:p,_redirectToSignin:m,_redirectToSignUp:y,_getSigninUrl:g,signUpPendingFave:a,signUpPendingComment:f,signUpPendingFollow:c,signUpPendingJoinGroup:l,signUpPendingDownload:h}},"@VERSION@",{requires:["url","storage-helper"]});
YUI.add("hermes-template-mobile-app-upsell",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"is-android"},3:function(e,t,n,r,i){return"http://play.google.com/store/apps/details?id=com.yahoo.mobile.client.android.flickr"},5:function(e,t,n,r,i){return"http://appstore.com/flickr"},7:function(e,t,n,r,i){return"					"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_ANDROID"},data:i}))+"\n"},9:function(e,t,n,r,i){return"					"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_IOS"},data:i}))+"\n"},11:function(e,t,n,r,i){return"					"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_ANDROID_FREE"},data:i}))+"\n"},13:function(e,t,n,r,i){return"					"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_IOS_FREE"},data:i}))+"\n"},15:function(e,t,n,r,i){return"					"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"mobile.INSTALL"},data:i}))+"\n"},17:function(e,t,n,r,i){return"					"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"mobile.GET"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div id="smartbanner" class="ios">\n	<!-- <button class="sb-close close-banner"></button> -->\n	<div class="sb-container">\n		<span class="sb-icon">\n			<svg class="close-banner icon icon-close"><use xlink:href="#icon-close"></use></svg>\n		</span>\n		<span class="sb-flickr-icon">\n			<div class="outer-logo '+((s=n["if"].call(o,t!=null?t.isAndroid:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="ball blue-ball"></div>\n				<div class="ball pink-ball"></div>\n			</div>\n		</span>\n		<div class="sb-info">\n			<a class="sb-button" href="'+((s=n["if"].call(o,t!=null?t.isAndroid:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.isIOS:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<strong>\n'+((s=n["if"].call(o,t!=null?t.isAndroid:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.isIOS:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</strong>\n				<span>\n"+((s=n["if"].call(o,t!=null?t.isAndroid:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))!=null?s:"")+'				</span>\n			</a>\n		</div>\n		<div class="sb-view get-app">\n			<span>\n'+((s=n["if"].call(o,t!=null?t.isAndroid:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.isIOS:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+"			</span>\n		</div>\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/mobile-app-upsell",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("mobile-app-upsell-view",function(e){var t="show-upsell-banner";e.namespace("Views")[this.name]=e.Base.create("mobile-app-upsell-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.buildContainer(),this},buildContainer:function(){var e=this.appContext.getUA().os;return this.setContainerWithTemplate("mobile-app-upsell",{isAndroid:e==="android",isIOS:e==="ios"}),this},setRootViewAdditionalViewClasses:function(){var e=[],n=this.appContext.getUA().os;return e.push(n),e.push(t),this.set("rootViewAdditionalViewClasses",e),this},activate:function(){var t=this.get("container"),n=t.one(".close-banner"),r=t.one(".get-app"),i=this;return n&&this.registerEventHandler(i.addBannerEvent(n,"dism",i.dismissBanner.bind(i))),r&&this.registerEventHandler(i.addBannerEvent(r,"inst",i.installApp.bind(i))),e.rapidTracker.beacon(this.name,"app_promo_interstitial_shown",{section:"app-interstitial"}),this},addBannerEvent:function(e,t,n){var r=this;return e.on("click",function(e){e.preventDefault(),r.appContext.setCookie({cookieName:t,path:"/",cookieValue:!0,remove:!0}),r.fire("subviewViewEvent","removeUpsell"),n()})},dismissBanner:function(){if(!navigator.cookieEnabled){e.rapidTracker.beacon(this.name,"cookies_off",{section:"app-interstitial"});return}var t=parseInt(this.appContext.getCookie("flaidisn"),10);!t||isNaN(t)?t=0:t+=1,e.rapidTracker.beacon(this.name,"app_promo_interstitial_dismissed"+(t>0?"_"+(t+1):""),{section:"app-interstitial"});var n;t<2?n=e.moment().add(3,"days").toDate():t===2?n=e.moment().add(7,"days").toDate():t===3&&(n=e.moment().add(20,"year").toDate()),this.appContext.setCookie({cookieName:"flaidisn",cookieValue:1,expires:n,remove:!0,path:"/"})},installApp:function(){var t=this.appContext.getUA().os,n=this.appContext.getUA().isWebview,r="photos/"+this.nsid+"/"+this.photoId,i=this;e.rapidTracker.beacon(this.name,"app_promo_interstitial_download",{section:"app-interstitial"}),this.appContext.setCookie({cookieName:"flaidis",cookieValue:1,expires:e.moment().add(20,"year").toDate(),remove:!0,path:"/"}),setTimeout(function(){e.use("mobile-actions-helper",function(e){e.MobileActionsHelper.redirectToAppOrStore({os:t,isWebview:n,pageURL:r,beacon:{name:"app_promo_banner_open",section:"appbanner"},viewName:i.name})})},250)}},{ATTRS:{}}),e.namespace("Views")[this.name].shouldShowBanner=function(e){var t=e.getCookie("dism")||e.getCookie("inst"),n=e.getUA().os,r=n==="android";return!t&&r}},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-mobile-app-upsell"],langBundles:["common","mobile"]});
YUI.add("hermes-lang-mobile_fr-fr",function(e,t){e.Intl.add("hermes/mobile","fr-FR",{APP_IOS:["Flickr pour iOS"],APP_ANDROID:["Flickr pour Android"],APP_IOS_FREE:["Gratuit dans l'App\u00a0Store"],APP_ANDROID_FREE:["Gratuit dans Google\u00a0Play"],GET:["Obtenir"],INSTALL:["Installer"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-partner-account-banner",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="banner-container">\n	<p>Dear Flickr Member: due to partnership changes with AT&T, you need to update your primary email address. <a class="learn-more">Learn more</a></p>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/partner-account-banner",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-partner-account-modal",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div>\n	With the launch of the new att.net homepage on June 30, 2017, you will need to change the primary email address you use to sign into your Flickr/Yahoo account. Your data and photos on Flickr will not be deleted or modified in any way. You will need to complete this process before June 30, 2017 in order to continue accessing your Flickr account.\n	<br/><br/>\n	<a href="/partner-account">Click here to learn more about these changes.</a>\n	<br/><br/>\n	<a href="/account/transfer">\n		<button class="update-email">Update your email address</button>\n	</a>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/partner-account-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("partner-account-banner-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{buildContainer:function(){return this.setContainerWithTemplate("partner-account-banner"),this},activate:function(){var n=this.get("container").one(".learn-more");return n&&this.registerEventHandler(n.on("click",this.openModal.bind(this))),e.AnchorRepositioner.addOffset(t,this.get("container")),this},openModal:function(){var t=new e.Views.FluidModal({title:"The way you sign in to Flickr is changing",htmlMessage:this.templates("partner-account-modal")({}),appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelX:!0,showCancelButton:!1,showActionButton:!1,hideModalOverlay:!1,showFooter:!1});t.show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{requires:["flickr-view","hermes-template-partner-account-banner","hermes-template-partner-account-modal"]});
YUI.add("global-nav-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n,r;typeof t.enableBrowserUpgradeBanner=="undefined"&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1);if(YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var i=this.appContext.request.headers["user-agent"],s=e.BrowserSupport.isUnsupportedBrowser(i),o=e.BrowserSupport.isBot(i),u=e.BrowserSupport.isSharingBot(i);s&&!o&&!u&&this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var a=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);a&&a==="true"&&this.set("showBrowserUpgradeBanner",!1)}return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.themeClass=t.theme||"default-theme",n=this.appContext.getLocation(),t.modelParams&&t.modelParams.apiParams?r=t.modelParams.apiParams:r=n.href,this.searchUrl=new e.SearchUrl(r,this.appContext,t.searchType),this.appContext.flipper.isFlipped("enable-signed-out-cta-test")&&(this.signedOutTest=!0),this.appContext.flipper.isFlipped("enable-sign-up-interstitial-test")&&this.appContext.lang.toLowerCase()==="en-us"&&(this.signUpInterstitialTest=!0),this.appContext.flipper.isFlipped("enable-sign-up-rail-test")&&this.appContext.lang.toLowerCase()==="en-us"&&!this.appContext.getViewer().signedIn&&!t.isSOHP&&(this.signUpRailTest=!0),this.isSOHP=t.isSOHP,this.hideBanner=t.isSearchResults,this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:this.isSOHP},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("notifications-menu")}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-hover-account-menu")||!this.appContext.flipper.isFlipped("rebootify-group-discussions-list")}},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-hover-account-menu")||!this.appContext.flipper.isFlipped("rebootify-group-discussions-list")}},"mobile-app-upsell-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(t){return!t.isMobile||!e.Views["mobile-app-upsell-view"].shouldShowBanner(this.appContext)}},"signup-rail-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["collapsed"],disabled:function(e){return e.isMobile||!this.signUpRailTest}},"flickr-chat-center-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(e){return!this.appContext.flipper.isFlipped("flickr-chat")||!this.appContext.getViewer().signedIn}},"partner-account-banner-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1}},loadState:function(){var t=this,n=this.appContext.getViewer(),r;return n.signedIn?r=this.appContext.getModel("person-models",n.nsid).then(function(e){t.set("viewer",e),t.elementStates=t.setElementStates(t.appStateParams),t.hideBanner?t.set("showPartnerAccountBanner",!1):t.set("showPartnerAccountBanner",t.isExpiringPartnerAccount())}):(this.elementStates=this.setElementStates(this.appStateParams),r=e.Promise.resolve()),r},buildContainer:function(){var t={},n=this.appContext.getViewer().signedIn,r;return this.get("viewer")&&(t=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),r={theme:this.themeClass,"show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showPartnerAccountBanner:this.get("showPartnerAccountBanner"),showNotificationsMenu:!1,viewer:t,isSignedIn:n,elements:this.elementStates},this.appContext.flipper.isFlipped("notifications-menu")&&n&&(r["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),r.showNotificationsMenu=!0),this.setContainerWithTemplate("global-nav",r),this},activate:function(){var n=this,r=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,i,s,o=this.get("container"),u=37,a=46;return s=["photo-page-ad-scrappy-view","sohp-view","products-landing-view"],i=this.appContext.flapp.get("activeView").name,o.one(".mobile-nav-toggle")&&this.registerEventHandler(o.one(".mobile-nav-toggle").on("click",function(t){e.rapidTracker.beacon(n.name,"mobile-nav-toggle",{action:o.one(".global-nav").hasClass("menu-open")?"close":"open"}),o.one(".global-nav").toggleClass("menu-open")}.bind(this))),o.one(".mobile-search-button")?(this.registerEventHandler(o.one(".mobile-search-button").on("click",function(t){e.rapidTracker.beacon(n.name,"mobile-nav-search");var r=this.get("container"),i=r.one(".global-nav");i.addClass("search-open"),i.hasClass("menu-open")&&i.removeClass("menu-open"),n.fire("parentViewEvent","focus-search-field"),r.one(".flickr-logo-container").addClass("hidden")}.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",function(e){this.get("container").one(".global-nav").addClass("search-open"),n.fire("parentViewEvent","focus-search-field")},this))):this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(t){var r=e.config.win.innerWidth<=700,i=r?this.appContext.viewportData.getWidth():0,s=r?a:0;r||(o.one(".global-nav").removeClass("search-open"),o.one(".flickr-logo-container").removeClass("hidden")),n.fire("parentViewEvent","resize-search-field",i-s)}.bind(this))),o.one(".mobile-search-close-button")&&this.registerEventHandler(o.one(".mobile-search-close-button").on("click",function(e){o.one(".global-nav").removeClass("search-open"
),o.one(".flickr-logo-container").removeClass("hidden"),n.fire("parentViewEvent","clear-search-field")}.bind(this))),this.appContext.getViewer().signedIn||(this.signedOutTest&&o.one(".gn-upload .gn-title")&&this.registerEventHandler(o.one(".gn-upload .gn-title").on("click",this.signUpAndUpload.bind(this))),s.indexOf(i)<0&&!this.isMobile&&this.signUpInterstitialTest&&this.startInterstitialTimer()),e.AnchorRepositioner.addOffset(t,o),this.registerEventHandler(o.delegate("keydown",this.toggleSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(o.delegate("keydown",this.enterSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(o.on("keydown",this.goToSubmenuHeading.bind(this),"ul.gn-submenu")),this.registerEventHandler(o.delegate("keydown",this.keyboardNavigation.bind(this),"ul.nav-menu")),this.registerEventHandler(o.delegate("mouseup",this.toggleAriaExpanded.bind(this),"a[aria-haspopup=true]")),this.showFeedbackModal(),this},showFeedbackModal:function(){var t=this;if(this.appContext.flipper.isFlipped("enable-feedback-modal")&&this.appContext.lang==="en-US"&&!localStorage.getItem("feedbackModalSeen")){var n=this.templates("feedback-modal-view")({}),r=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,hideModalOverlay:!1,maxHeight:!1,showFooter:!1,classList:"modal-restyle",width:560,htmlMessage:n});r.show(),r.on("activated",function(){r.get("container").one(".cancel-button").on("click",function(e){r.close()}),r.get("container").one(".accept-button").on("click",function(e){window.open("https://www.surveymonkey.com/r/DRRTGRG","_blank"),r.close()})}),r.on("close",function(){localStorage.setItem("feedbackModalSeen",!0)})}},clearKeyboardFocus:function(e){this.get("container").all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("container").all(".nav-menu a[aria-expanded=true]").setAttribute("aria-expanded","false")},toggleAriaExpanded:function(e){e.target.setAttribute("aria-expanded",e.target.getAttribute("aria-expanded")==="false"?"true":"false")},enterSubmenu:function(e){if(e.keyCode===40){e.preventDefault();var t=e.target.next("ul");t&&t.hasClass("has-keyboard-focus")&&t.one(":first-child").one(":first-child").focus()}},toggleSubmenu:function(e){var t=e.keyCode;if(t===13||t===32){e.preventDefault();var n=e.target.next("ul");n&&(n.hasClass("has-keyboard-focus")?this.clearKeyboardFocus():(n.addClass("has-keyboard-focus"),e.target.setAttribute("aria-expanded","true")))}},goToSubmenuHeading:function(e,t){var n;if(t||e.keyCode===27)t||this.clearKeyboardFocus(),e.target.hasClass("gn-submenu")?n=e.target.previous("a"):e.target.ancestor("ul.gn-submenu")&&(n=e.target.ancestor("ul.gn-submenu").previous("a")),n&&n.focus()},keyboardNavigation:function(e){var t=e.keyCode,n=t===9&&e.shiftKey,r=t===9&&!e.shiftKey;e.target.hasClass("gn-title")?(n=(t===37||n)&&e.target.ancestor("li").previous("li"),r=(t===39||r)&&!!e.target.ancestor("li").next("li"),n?(this.clearKeyboardFocus(),this.focusOnPreviousItem(e)):r&&(!e.target.next("ul")||!e.target.next("ul").hasClass("has-keyboard-focus"))&&(this.clearKeyboardFocus(),this.focusOnNextItem(e))):t===38||n?this.focusOnPreviousItem(e):(t===40||r)&&this.focusOnNextItem(e)},focusOnPreviousItem:function(e){e.preventDefault();var t=e.target.ancestor("li").previous("li:not(.divider)");t?t.one(":first-child").focus():e.target.ancestor("ul.gn-submenu")&&this.goToSubmenuHeading(e,!0)},focusOnNextItem:function(e){e.preventDefault();var t=e.target.ancestor("li").next("li:not(.divider)");t&&t.one(":first-child").focus()},startInterstitialTimer:function(){var t=this,n,r=!1,i;n=e.StorageHelper.getItem("signUpInterstitialSeen"),n?(n=e.moment(n,"x"),i=e.moment().subtract(2,"days"),i>n&&(r=!0)):r=!0,r&&(this.signUpInterstitialTimer=setTimeout(function(){if(!e.OverlayManager.hasOverlay()&&e.config.win.innerWidth>700){var n=new e.Views.SignUpInterstitial({appContext:t.appContext});n.show(),e.StorageHelper.setItem("signUpInterstitialSeen",e.moment().format("x"))}},4e3))},signUpAndUpload:function(t){var n=e.url("/upload/"),r=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"}),i=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_MESSAGE"}),s;t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),s=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:r,signUpMessage:i,beaconPrefix:"upload"}),s.on("signUpClick",function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})}),s.on("signInClick",function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})}),s.show()},executeSearch:function(e){var t=this.get("container").one("#gn-search-field").getDOMNode(),n;n=this.searchUrl.createNewSearch(t.value).getURL(),e.halt(),this.appContext.flapp.navigate(n)},setElementStates:function(e){var t=this.appContext.getViewer(),n=e.isSOHP&&!t.signedIn,r={you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,create_link:!1,create_menu:!1,upload_icon:!1,account_menu:!1,search_bar:!1,signup_link:!1,signin_link:!1,right_side_signup:!1,vr_link:!1};return n?(r.search_bar=!0,r.signin_link=!0,r.signup_link=!0):t.signedIn?(r.you_menu=!0,r.explore_menu=!0,r.upload_icon=!0,r.search_bar=!0,r.account_menu=!0):(r.signup_link=!0,r.explore_menu=!0,r.upload_icon=!0,r.search_bar=!0,r.signin_link=!0),this.appContext.flipper.isFlipped("enable-vr-landing")&&(r.vr_link=!0),t.signedIn&&!n?r.create_menu=!0:!t.signedIn&&!n&&(r.create_link=!0),this.get("viewer")&&(this.appContext.flipper.isFlipped("rebootify-stats")||this.get("viewer").getValue("isPro"))&&(r.stats=!0),this.appContext.lang.toLowerCase()==="en-us"&&(r.weekly_flickr=!0),r.set_not_album=!this.appContext.flipper.isFlipped("rename-set-to-album"),this.signedOutTest&&(r.right_side_signup=!0),r},isExpiringPartnerAccount:function(){var e=this.get("viewer").getValue("expiringPartner"),t=["books-cover-route","embedr-route","books-route","books-back-route","books-page-route","wallart-preview-route"
,"wallart-edit-route","wallart-create-route","site-key-route","browser-upgrade-interstitial-route","products-marketplace-eol-route","products-account-payouts-route","error-route"];return this.appContext.flipper.isFlipped("enable-partner-account-banner")&&e&&t.indexOf(this.appContext.routeConfig.module)===-1},onSubviewEvent:function(e,t){t&&e==="mobile-app-upsell-view"&&t[0]==="removeUpsell"&&this.subviews["mobile-app-upsell-view"].destroy({remove:!0})},destructor:function(){clearTimeout(this.signUpInterstitialTimer),e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{requires:["flickr-view","hermes-template-global-nav","hermes-template-feedback-modal-view","search-url","search-autosuggest-field-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","url-helper","person-menu-view","group-menu-view","browser-support","fluid-modal-view","signup-modal-view","signup-interstitial-view","signin-helper","storage-helper","mobile-app-upsell-view","partner-account-banner-view"],langBundles:["global-nav","common","search"]});
YUI.add("hermes-lang-global-nav_fr-fr",function(e,t){e.Intl.add("hermes/global-nav","fr-FR",{FLICKR_LOGO_ALT:["Logo Flickr. Si vous cliquez dessus, vous acc\u00e9dez \u00e0 la page d\u2019accueil"],YOUR_PHOTOSTREAM:["Votre galerie"],FOLLOWING:["Abonn\u00e9"],PHOTOS_OF:["Photos de"],PHOTOS_FROM:["Photos de"],LIST:["Liste"],COMMUNITIES:["Communaut\u00e9s"],GROUPS_LIST:["Liste des groupes"],SEARCH_GROUPS:["Recherchez des groupes"],RECENT_DISCUSSIONS:["Discussions r\u00e9centes"],CREATE_A_GROUP:["Cr\u00e9ez un groupe"],RECENT_PHOTOS:["Photos r\u00e9centes"],THE_COMMONS:["The Commons"],GETTY_COLLECTION:["Collection Getty"],GALLERIES:["Expos"],FLICKR_GALLERIES:["Expos Flickr"],WORLD_MAP:["Carte mondiale"],APP_GARDEN:["App Garden"],THE_WEEKLY_FLICKR:["The Weekly Flickr"],FLICKR_BLOG:["Blog Flickr"],UPLOAD:["Importez"],SIGN_IN:["S\u2019identifier"],SEARCH:["Recherchez"],CAMERA_FINDER:["Recherche d\u2019appareil photo"],RECENT_ACTIVITY:["Activit\u00e9 r\u00e9cente"],STATS:["Stats"],ORGANIZE:["Organisez"],CREATIONS:["Cr\u00e9ations"],FIND_FRIENDS:["Recherchez des amis"],GROUPS:["Groupes"],PEOPLE:["Personnes"],CAMERAROLL:["Pellicule"],CREATE:["Cr\u00e9ez"],CREATE_NEW:["Nouvelle cr\u00e9ation"],CREATE_MY_WALLART:["Ma d\u00e9coration murale"],CREATE_MY_PHOTOS_BOOKS:["Mes livres Photo"],CREATE_ORDER_HISTORY:["Historique de mes commandes"],UPLOAD_MODAL_SIGNUP_TITLE:["Importez vos photos en toute s\u00e9curit\u00e9 et confidentialit\u00e9\u00a0!"],UPLOAD_MODAL_SIGNUP_MESSAGE:["Rejoignez Flickr et profitez de 1\u00a0000\u00a0Go de stockage gratuit pour vos photos."],HOME:["Accueil"],LOG_IN:["Connexion"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-footer-full",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{};return'		<div class="foot-top-row">\n			<ul class="foot-nav-ul">\n'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_about:s,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_jobs:s,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_blog:s,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_mobile:s,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_developers:s,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_guidelines:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_privacy:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_terms:s,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_yahoo_safely:s,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_feedback:s,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_report_abuse:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_help_forum:s,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_language:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+"			</ul>\n		</div>\n"},2:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/about" data-track="footer-about">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+"</a></li>\n"},4:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/jobs" data-track="footer-jobs">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.JOBS"},data:i}))+"</a></li>\n"},6:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//blog.flickr.net/en" data-track="footer-blog">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.BLOG"},data:i}))+"</a></li>\n"},8:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//mobile.yahoo.com/flickr" data-track="footer-mobile">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.MOBILE"},data:i}))+"</a></li>\n"},10:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/services/developer" data-track="footer-developers">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:i}))+"</a></li>\n"},12:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/help/guidelines" data-track="footer-guidelines">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:i}))+"</a></li>\n"},14:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//policies.yahoo.com/privacy/flickr" data-track="footer-privacy">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:i}))+"</a></li>\n"},16:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/help/terms" data-track="footer-terms">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.TERMS"},data:i}))+"</a></li>\n"},18:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//safely.yahoo.com" data-track="footer-safely">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.YAHOO_SAFELY"},data:i}))+"</a></li>\n"},20:function(e,t,n,r,i){return'				<li class="foot-li"><a href="//yahoo.uservoice.com/forums/211185-us-flickr" data-track="footer-feedback">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.FEEDBACK"},data:i}))+"</a></li>\n"},22:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/abuse" data-track="footer-abuse">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.REPORT_ABUSE"},data:i}))+"</a></li>\n"},24:function(e,t,n,r,i){return'				<li class="foot-li"><a href="/help/forum" data-track="footer-forum">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:i}))+"</a></li>\n"},26:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'				<li class="foot-li lang-switcher">\n					<a href="/change_language.gne?lang='+u(o((s=t!=null?t.selectedLang:t)!=null?s.code:s,t))+"&csrf="+u(o((s=t!=null?t.selectedLang:t)!=null?s.csrf:s,t))+'" data-track="footer-language">'+u(o((s=t!=null?t.selectedLang:t)!=null?s.name:s,t))+'</a>\n					<span class="arrow"></span>\n				</li>\n'},28:function(e,t,n,r,i){var s,o=t!=null?t:{};return'		<div class="foot-bottom-row">\n			<div class="foot-yahoo">\n				<ul class="foot-nav-ul">\n'+((s=n["if"].call(o,
(s=t!=null?t.elements:t)!=null?s.bottom_privacy:s,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_terms:s,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_yahoo_safely:s,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_help:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</ul>\n			</div>\n\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_yahoo_company:s,{name:"if",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n			<div class="foot-social">\n				<ul class="foot-nav-ul">\n'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_tumblr:s,{name:"if",hash:{},fn:e.program(40,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_facebook:s,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_twitter:s,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</ul>\n			</div>\n		</div>\n"},29:function(e,t,n,r,i){return'					<li class="foot-li"><a href="//policies.yahoo.com/privacy/flickr" data-track="footer-privacy">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:i}))+"</a></li>\n"},31:function(e,t,n,r,i){var s,o=t!=null?t:{};return'					<li class="foot-li"><a href="/help/terms" data-track="footer-terms"'+((s=n["if"].call(o,t!=null?t.highlightTerms:t,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:i}))+"</a></li>\n"},32:function(e,t,n,r,i){return' class="highlighted"'},34:function(e,t,n,r,i){return'					<li class="foot-li"><a href="//safely.yahoo.com" data-track="footer-safely">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.YAHOO_SAFELY"},data:i}))+"</a></li>\n"},36:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<li class="foot-li"><a href="//help.yahoo.com/kb/index?page=product&locale='+a((s=(s=n.helpLocaleKey||(t!=null?t.helpLocaleKey:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"helpLocaleKey",hash:{},data:i}):s))+'&y=PROD_FLICKR_DESK&actp=productlink" data-track="footer-help">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:i}))+"</a></li>\n"},38:function(e,t,n,r,i){return'			<div class="foot-company">\n				'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"common.A_YAHOO_COMPANY_WITH_LINK"},data:i}))+"\n			</div>\n"},40:function(e,t,n,r,i){return'					<li><a target="_blank" href="http://flickr.tumblr.com/" aria-label="Tumblr" data-track="footer-tumblr">\n						<svg class="ft-icon ft-tumblr"><use xlink:href="#icon-tumblr"></use></svg>\n					</a></li>\n'},42:function(e,t,n,r,i){return'					<li><a target="_blank" href="https://www.facebook.com/flickr" aria-label="Facebook" data-track="footer-facebook">\n						<svg class="ft-icon ft-facebook"><use xlink:href="#icon-facebook"></use></svg>\n					</a></li>\n'},44:function(e,t,n,r,i){return'					<li><a target="_blank" href="https://twitter.com/flickr" aria-label="Twitter" data-track="footer-twitter">\n						<svg class="ft-icon ft-twitter"><use xlink:href="#icon-twitter"></use></svg>\n					</a></li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(o,t!=null?t["privacy-footer-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<footer class="foot">\n	<div class="foot-container" role="contentinfo">\n'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.top_row:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.bottom_row:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	</div>\n</footer>\n\n<span id="tgt"><div id="tgtRS"></div></span>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/footer-full",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("dropdown",function(e){"use strict";var t,n;t={css:{closed:"ui-dropdown-closed",shim:"ui-dropdown-shim",label:'span[data-action="toggle"]',items:"[data-value]",itemSelected:"ui-dropdown-item-selected",hasDialogArrow:"ui-dropdown-has-dialog-arrow",dialogArrow:"ui-dialog-arrow",useCheckMarks:"ui-dropdown-use-checkboxes"},options:{hasDialogArrow:!1,useCheckMarks:!1}},e.namespace("Views").Dropdown=n=e.Base.create("Dropdown",e.FlickrView,[],{initializer:function(e){if(e.activate===!1)return;this.activate()},activate:function(){var n=this,r=this.get("container"),i;this.close(),this._items={},e.Lang.isArray(this.get("selected"))||this.set("selected",[this.get("selected")]),r.all(t.css.items).each(function(e){var t=e.getData();n._items[t.value]={text:t.text||'no data-text for "'+t.value+'"',sub:t.sub,node:e}}),this.labelEl=r.one(t.css.label),this.labelEl||(this.labelEl=e.Node.create('<span class="truncate" data-action="toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" />'),r.insert(this.labelEl,0)),i=this.get("staticLabel")||this.get("defaultLabel"),i&&(i===!0?this.labelEl.set("text","set staticLabel/defaultLabel to a string, not `true`"):this.labelEl.set("text",i)),this.get("hasDialogArrow")&&!r.hasClass(t.css.hasDialogArrow)&&r.addClass(t.css.hasDialogArrow),r.hasClass(t.css.hasDialogArrow)&&(this.dialogArrowEl=r.one(t.css.dialogArrow),this.dialogArrowEl||(this.dialogArrowEl=e.Node.create('<span class="ui-dialog-arrow" />'),r.insert(this.dialogArrowEl,1))),this.get("useCheckMarks")&&!r.hasClass(t.css.useCheckMarks)&&r.addClass(t.css.useCheckMarks),this.select();if(this.get("disabled"))return this.disable();this.attachEvents({":toggle":this.toggle.bind(this),":set":this.setData.bind(this)}),this.registerEventHandler(this.labelEl.on("key",this.toggle,"down:13",this)),this.registerEventHandler(this.labelEl.on("key",this.enterDropdown,"down:40",this));var s=this.labelEl.next("ul");s&&(this.registerEventHandler(s.on("keydown",this.keyboardNavigation,this)),this.registerEventHandler(s.delegate("key",function(e){document.activeElement.dataset&&this.setData(e,document.activeElement.dataset)},"down:13","li",this)))},setData:function(t,n){t.halt();if(!this.get("multiSelect")&&!this.get("multiSelectSub")&&e.Array.indexOf(this.get("selected"),n.value)>=0)return this.close();this.select(n.value,n)},select:function(n,r,i){var s=this,o=n?this._items[n]:null,u=!0,a=[],f;o&&e.Array.indexOf(this.get("selected"),n)>=0&&(this.get("multiSelect")||this.get("multiSelectSub"))?(a=this.get("selected"),!o.sub&&this.get("multiSelect")&&a.length>this.get("minimumSelected")?(a.splice(e.Array.indexOf(this.get("selected"),n),1),u=!1):o.sub&&(a.splice(e.Array.indexOf(this.get("selected"),n),1),u=!1),this.set("selected",a)):o&&(o.sub?(a.push(n),this.get("selectParent")&&a.push(o.sub),e.Array.each(this.get("selected"),function(e){s._items[e].sub===o.sub?a.push(e):s.get("multiSelect")&&!s._items[e].sub&&a.push(e)})):this.get("multiSelect")?(a=this.get("selected"),a.push(n)):a.push(n),this.set("selected",a)),i||this.close(),f={clicked:o?{text:o.text,value:n,sub:o.sub,itemEl:o.node,isChecked:u}:null,data:r,selections:a},this.fire("selected",f),this.update(n,f,t)},update:function(t,n,r){var i=this,s=n.clicked,o=this.get("selected"),u=this.get("defaultLabel")||"[Unable to select a default item]";this.get("staticLabel")||(this.get("labelFunction")?u=this.get("labelFunction").apply(this,[t]):s?n.data&&n.data.text&&n.data.text!==s.text?u=n.data.text:u=s.text:o.length>0&&i._items[o[0]]&&(u=i._items[o[0]].text),this.labelEl.set("textContent",u||"[!empty data-text!]")),this.get("container").all(r.css.items).removeClass(r.css.itemSelected),e.Array.each(o,function(e){i._items[e]&&i._items[e].node.addClass(r.css.itemSelected)})},toggle:function(e){e&&e.halt(),this._open?this.close(e):this.open(e)},open:function(e){var n=this.get("container"),r=0,i=0,s=30;this._open=!0,this.get("shouldCreateShim")&&this._shimUp(),n.removeClass(t.css.closed),this.get("autoSizeMenu")&&(r=parseInt(this.labelEl.getComputedStyle("width"),10),i=parseInt(n.one("ul").getComputedStyle("width"),10),r+s>i&&n.one("ul").setStyles({width:r+s})),(!e||!e.silent)&&this.fire("open",e);var o=n.one("span:first-child");o&&o.setAttribute("aria-expanded","true")},close:function(e){var n=this.get("container");e&&e.halt(),this._open=!1,this._shimUp(!1),this.fire("close",e),n.addClass(t.css.closed);var r=this.labelEl;r&&r.setAttribute("aria-expanded","false")},enterDropdown:function(e){e.preventDefault();var t=this.labelEl.next("ul").one("li");t&&t.focus()},keyboardNavigation:function(e){var t=e.keyCode,n=t===38||t===9&&e.shiftKey,r=t===40||t===9&&!e.shiftKey,i=e.target.ancestor("li",!0);if(n&&i&&i.previous("li"))e.preventDefault(),this.focusOnPreviousItem(e);else if(r)e.preventDefault(),i&&i.next("li")&&this.focusOnNextItem(e);else if(t===27||n)e.preventDefault(),this.labelEl&&(this.labelEl.focus(),this.close())},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var n=t.previous("li");n&&(n.one("a")?n.one("a").focus():n.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var n=t.next("li");n&&(n.one("a")?n.one("a").focus():n.focus())}},_shimUp:function(n){if(n===!1){if(!this._shim)return;this._shim.detach("click").remove(),this._shim=null;return}this._shim=e.Node.create("<div />"),this._shim.addClass(t.css.shim),this._shim.on("click",this.close.bind(this)),this.get("container").appendChild(this._shim)},disable:function(){var e=this.get("container");this.set("disabled",!0),this.close(),e.addClass(t.css.disabled),e.detach()},destructor:function(){this._shimUp(!1),this._items=null,this.labelEl=null,this.set("selected",null),this.detachAll()}},{ATTRS:{selected:{value:[]},disabled:{value:!1},hasDialogArrow:{value:!1},useCheckMarks:{value:!1},multiSelect:{value:!1},multiSelectSub:{value:!1},selectParent:{value:!0},minimumSelected:{value:0},staticLabel:{value:!1},defaultLabel:{value:!1},labelFunction:function(){},shouldCreateShim
:{value:!0},autoSizeMenu:{value:!0}}})},"@VERSION@",{requires:["flickr-view"]});
YUI.add("hermes-template-privacy-footer",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="footer-container">\n	<div class="footer-content">\n		<p>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"privacy.OATH_DATA_USAGE"},data:i}))+' <a href="'+a((s=(s=n.url||(t!=null?t.url:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"url",hash:{},data:i}):s))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.LEARN_MORE"},data:i}))+'</a></p>\n		<button class="dismiss">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.DISMISS"},data:i}))+"</button>\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/privacy-footer",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("privacy-footer-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,buildContainer:function(){var e=["en","nl","es","fr","pt","de","it"],t=this.appContext.lang.substring(0,2),n=e.indexOf(t)!==-1?t:"en";return this.setContainerWithTemplate("privacy-footer",{url:"https://policies.yahoo.com/ie/"+n+"/yahoo/privacy/euoathnoticefaq"}),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-privacy-footer"],langBundles:["common","privacy"]});
YUI.add("hermes-lang-privacy_fr-fr",function(e,t){e.Intl.add("hermes/privacy","fr-FR",{OATH_DATA_USAGE:["Flickr et Yahoo font d\u00e9sormais partie de Oath et de la famille d\u2019entreprises Verizon. \u00c0 compter du 15\u00a0septembre 2017, nous pr\u00e9voyons de partager des informations utilisateur au sein de notre nouvelle famille."]})},"@VERSION@",{requires:["intl"]});
YUI.add("footer-full-view",function(e){var t=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Espa\u00f1ol","fr-FR":"Fran\u00e7ais","ko-KR":"\ud55c\uae00","it-IT":"Italiano","pt-BR":"Portugu\u00eas","vn-VN":"Ti\u1ebfng Vi\u1ec7t","id-ID":"Bahasa Indonesia","zh-HK":"\u7e41\u9ad4\u4e2d\u6587"};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=e,this},subviewConfig:{"privacy-footer-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1,additionalViewClasses:["hidden"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-privacy-footer")}}},loadState:function(){var r,i,s;s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],this.lang==="zh-Hant-HK"&&(this.lang="zh-HK"),this.lang.toLowerCase()==="vi-vn"&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s};for(r=0,i=t.length;r<i;r++){if(t[r]===this.lang)continue;typeof t[r]=="string"&&this.menuLangs.push({code:t[r].toLowerCase(),name:n[t[r]],csrf:s})}return e.Promise.resolve()},buildContainer:function(){var t={},n={};return this.get("viewer")&&(t=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),n={displayLangs:this.displayLangs,selectedLang:this.selectedLang,helpLocaleKey:this.selectedLang.code.replace("-","_")||"en_US",menuLangs:this.menuLangs,elements:this.setElementStates()},n.elements.bottom_row||this.get("container").addClass("compact"),YUI.Env.isServer?n.pageUrl=this.appContext.request.url:n.pageUrl=window.location.pathname,this.setContainerWithTemplate("footer-full",n),this},activate:function(){var t=this.get("container"),n=t.one(".lang-switcher"),r=n.one("a");return this.appContext.flipper.isFlipped("enable-privacy-footer")&&(!this.appContext.hasClientSideRouted()&&!e.StorageHelper.hasEntries("privacyFooterDismissed")&&e.config.flickr.geo.eu&&t.addClass("privacy-footer"),this.registerEventHandler(t.one(".dismiss").on("click",function(){e.StorageHelper.setItem("privacyFooterDismissed",!0),t.removeClass("privacy-footer")}))),this.menuLangsFormatted=this.menuLangs.map(function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}),this.registerEventHandler(n.on("click",function(t){t.preventDefault(),r.addClass("dimmed");var i=new e.Views.FluidDroparound({anchorOffsetHorizontal:15,appContext:this.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:["lang-droparound"],menuItems:this.menuLangsFormatted});i.show(),this.registerEventHandler(i.on("closeDroparound",function(e){r.removeClass("dimmed")}),this)},this)),this},setElementStates:function(){var e={top_row:!0,top_about:!0,top_jobs:!0,top_blog:!0,top_mobile:!0,top_developers:!0,top_guidelines:!0,top_privacy:!1,top_terms:!1,top_yahoo_safely:!1,top_feedback:!0,top_report_abuse:!0,top_help_forum:!0,top_language:!0,bottom_row:!0,bottom_privacy:!0,bottom_terms:!0,bottom_yahoo_safely:!0,bottom_help:!0,bottom_yahoo_company:!0,bottom_tumblr:!0,bottom_facebook:!0,bottom_twitter:!0};return this.appStateParams.isSOHP&&(e.top_privacy=!0,e.top_terms=!0,e.top_yahoo_safely=!0,e.top_feedback=!1,e.top_report_abuse=!1,e.bottom_row=!1),e}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","dropdown","fluid-droparound-view","privacy-footer-view"],langBundles:["common"]});
YUI.add("hermes-template-photo-list-aft",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s=e.lambda,o=e.escapeExpression;return"					img = new Image();\n					img.addEventListener('load', function onImageLoad (event) {\n						this.removeEventListener('load', onImageLoad);\n						timingCache['"+o(s(t!=null?t.id:t,t))+"'] = new Date().getTime();\n					});\n					img.src='"+o(s(t!=null?t.url:t,t))+"';\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<script type="text/javascript" nonce="'+l((o=(o=n.cspNonce||(t!=null?t.cspNonce:t))!=null?o:a,typeof o===f?o.call(u,{name:"cspNonce",hash:{},data:i}):o))+"\">\n	try {\n\n		(function () {\n\n				if (!window.paftTiming) {\n					return;\n				}\n\n				var timingCache = {},\n				    img;\n\n				window.paftTiming['"+l((o=(o=n.photolistId||(t!=null?t.photolistId:t))!=null?o:a,typeof o===f?o.call(u,{name:"photolistId",hash:{},data:i}):o))+"'] = timingCache;\n\n"+((s=n.each.call(u,t!=null?t.photos:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		})();\n\n	} catch (error) {\n\n		if (window.sendRequest){\n			window.sendRequest('flickr.hermes.photolistAFT.failure', 'Photolist timing failed.');\n		}\n	}\n</script>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-list-aft",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
