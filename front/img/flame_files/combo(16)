YUI.add("hermes-template-search-photos-single-row",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'	<h5 class="search-results-header">'+((s=n.unless.call(u,t!=null?t.loading:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+e.escapeExpression((o=(o=n.title||(t!=null?t.title:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"title",hash:{},data:i}):o))+" "+((s=n["if"].call(u,t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</h5>\n"+((s=n["if"].call(u,t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:"")},2:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},t!=null?t.singleResult:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:""},3:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<a href="'+f((o=(o=n.viewAll||(t!=null?t.viewAll:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"viewAll",hash:{},data:i}):o))+'" class="view-more-link"'+((s=n["if"].call(u,t!=null?t.viewAllDataTrack:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{count:t!=null?t.total:t,intlName:"search.VIEW_ALL_COUNT"},data:i}))+"</a>"},4:function(e,t,n,r,i){var s;return' data-track="'+e.escapeExpression((s=(s=n.viewAllDataTrack||(t!=null?t.viewAllDataTrack:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"viewAllDataTrack",hash:{},data:i}):s))+'"'},6:function(e,t,n,r,i){return'<div class="flickr-dots inline"></div>'},8:function(e,t,n,r,i){var s;return'		<div style="height: '+e.escapeExpression((s=(s=n.placeholderHeight||(t!=null?t.placeholderHeight:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"placeholderHeight",hash:{},data:i}):s))+'px;"></div>\n'},10:function(e,t,n,r,i){return"		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["photo-list-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},t!=null?t.emptySearch:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-photos-single-row",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-lite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{update:e.PhotoModelHelper.updateEngagement},toggleFave:e.PhotoModelHelper.toggleFave,addAsFave:e.PhotoModelHelper.addAsFave,getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,attributes:{owner:{readOnly:!0,isModel:!0,getter:function(e,t){var n=this;return{id:n.getValue(t,"ownerNsid"),getValue:function(e){return e==="id"?n.getValue(t,"ownerNsid"):e==="nsid"?n.getValue(t,"ownerNsid"):e==="url"?n.getValue(t,"ownerUrl"):n.getValue(t,e)},toJSON:function(){return{id:n.getValue(t,"ownerNsid"),url:n.getValue(t,"ownerUrl"),pathAlias:n.getValue(t,"pathAlias"),username:n.getValue(t,"username"),realname:n.getValue(t,"realname"),displayname:n.getValue(t,"displayname"),nsid:n.getValue(t,"ownerNsid"),ownerUrl:n.getValue(t,"ownerUrl"),isMe:n.getValue(t,"isMe")}},exists:function(e){return!1}}}},pathAlias:e.PersonModelHelper.attributes.pathAlias,username:e.PersonModelHelper.attributes.username,realname:e.PersonModelHelper.attributes.realname,displayname:e.PersonModelHelper.attributes.displayname,nsid:e.PersonModelHelper.attributes.nsid,ownerUrl:e.PersonModelHelper.attributes.url,isMe:e.PersonModelHelper.attributes.isMe,engagement:{readOnly:!0,isModel:!0,getter:function(e,t){var n=this;return{getValue:function(e){return n.getValue(t,e)},toJSON:function(){return{ownerNsid:n.getValue(t,"ownerNsid"),isFaved:n.getValue(t,"isFaved"),faveCount:n.getValue(t,"faveCount"),commentCount:n.getValue(t,"commentCount"),canFave:n.getValue(t,"canFave")}},exists:function(e){return!1}}}},ownerNsid:e.PhotoModelHelper.attributes.ownerNsid,isFaved:e.PhotoModelHelper.attributes.isFaved,faveCount:e.PhotoModelHelper.attributes.faveCount,commentCount:e.PhotoModelHelper.attributes.commentCount,canFave:e.PhotoModelHelper.attributes.canFave,title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,similaritySearchURL:e.PhotoModelHelper.attributes.similaritySearchURL,basicSimilaritySearchURL:e.PhotoModelHelper.attributes.basicSimilaritySearchURL,oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},hasInvalidColorspaceForPrint:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFriends:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","photo-model-helper","person-model-helper","flickr-favorites-add-updater","flickr-favorites-remove-updater","photo-models","photo-engagement-models","person-models"]});
YUI.add("search-photos-lite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return t.getPhotoLiteModels=!0,e.ListFetchers["flickr-photos-search"].run(t,this.appContext)}},attributes:{photos:{isCollection:!0,pageFetch:{fetchParams:{getPhotoLiteModels:!0},listFetcher:e.ListFetchers["flickr-photos-search"],listItemIdField:"photoId"}},totalItems:{setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},apiParams:{writeOnce:"initOnly"},emptyQuery:{defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-search-fetcher","attribute-helpers"]});
YUI.add("flickr-photos-search-fetcher",function(e,t){"use strict";function i(t,n){var r=e.merge(e.SearchHelper.UNIFIED_DEFAULT_PARAMS,{extras:e.APIHelper.request[t.getPhotoLiteModels?"getRebootPhotoLiteExtras":"getRebootPhotoExtras"](),per_page:t.perPage||50,page:t.page||"1",lang:t.lang}),i;return t.fetchGeo&&(r.extras+=",geo"),t.additionalExtras&&(r.extras+=","+t.additionalExtras.join(",")),i=e.merge(r,t.apiParams||{}),t.privacyFilter&&(i.privacy_filter=t.privacyFilter),YUI.Env.isServer&&e.SearchHelper.unescapeParameters(i),e.SearchHelper.isParameterlessSearch(i)?null:i}function s(t,n){var r=t[0],i=t[1],s=t[2],o,u,a,f={id:n.id||e.SearchUrl.EMPTY_SEARCH_ID,apiParams:{},emptyQuery:!!n.emptyQuery,photos:[]},l,c,h;n.id&&n.id!==e.SearchUrl.EMPTY_SEARCH_ID&&(f.apiParams=e.QueryString.parse(n.id));if(!n.id)throw new ReferenceError("No `id` provided by request.");if(!n.useV2API&&(!r.photos||!r.photos.photo)){var p=new Error("No `photos.photo` property returned by search API v1.");throw p.fatal=!0,p}var d=n.useV2API?r.body:r.photos.photo;return n.getPhotoLiteModels?a=d.map(function(t){return c=e.APIHelper.response.parsePhotoLite(t),s.addOrUpdate(c)}):(a=e.APIHelper.response.parsePhotos({photos:r.photos.photo,photoModelRegistry:s,personModelRegistry:t[3],photoEngagementModelRegistry:t[4],photoStatsModelRegistry:t[5]}),n.fetchGeo&&(o=t[6],r.photos.photo.forEach(function(e){typeof e.latitude!="undefined"?l={id:e.id,hasGeo:!0,latitude:e.latitude,longitude:e.longitude}:l={id:e.id,hasGeo:!1},o.addOrUpdate(l)}))),f.photos={perPage:n.useV2API?n.perPage:r.photos.perpage,page:n.useV2API?n.page:r.photos.page,pageContent:a,totalItems:n.useV2API?r.headers["x-total-count"]:parseInt(r.photos.total,10),totalPages:n.useV2API?parseInt(r.headers["x-total-count"]/n.perPage,10):r.photos.pages/n.perPage},!n.useV2API&&r.photos.maxAllowedResults&&(f.photos.totalItems=Math.min(r.photos.maxAllowedResults,parseInt(r.photos.total,10))),!n.useV2API&&r.photos.maxAllowedPages&&(f.photos.totalPages=Math.min(r.photos.maxAllowedPages,r.photos.pages)),f.totalItems=n.useV2API?r.headers["x-total-count"]:parseInt(r.photos.total,10),i.exists(f.id)?(u=i.getValue(f.id,"photos").getList(),h=u.filter(function(e){return!!e}).reduce(function(e,t){return e[t.id]=!0,e},{}),f.photos.pageContent=f.photos.pageContent.filter(function(e){return!h[e.id]}),f.photos.page===1&&(f.photos.forceAppend=!0),i.addOrUpdate(f)):i.add(f),a}function o(i,s){var o=this,u="flickr.photos.search",a=i.emptyQuery?{}:this._processParams(e.merge({lang:s.lang||e.config.lang},i),s),f;a||(i.emptyQuery=!0);if(i.useV2API){var l=i.apiParams.tags||i.apiParams.text,c={orderBy:"interestingness",query:l,pageNumber:i.page-1>=0?i.page-1:0,pageSize:i.perPage,format:"json",nojsoncallback:1};i.minDateTaken&&i.maxDateTaken&&(i.apiParams.tags||i.apiParams.text)&&(c.query=e.SearchHelper.normalizeTag(l),c.context="tag:"+e.SearchHelper.normalizeTag(l)+" dateUploaded:["+i.minDateTaken+" TO "+i.maxDateTaken+"]"),f=[n.get("https://api.flickr.com/v2/media/search").use(require("hermes-core/req-id")).query(c).catch(function(e){return r.warn("API V2 Search returned a non valid response",{err:e}),{body:[],headers:{"x-total-count":0}}})]}else f=[i.emptyQuery?e.Promise.resolve({photos:{photo:[]}}):s.callAPI(u,a)];return i.getPhotoLiteModels?f=f.concat([s.getModelRegistry("search-photos-lite-models"),s.getModelRegistry("photo-lite-models")]):f=f.concat([s.getModelRegistry("search-photos-models"),s.getModelRegistry("photo-models"),s.getModelRegistry("person-models"),s.getModelRegistry("photo-engagement-models"),s.getModelRegistry("photo-stats-models"),s.getModelRegistry("photo-geo-models")]),e.Promise.all(f).then(function(e){return o._processResponse(e,i)},e.FetcherErrorLogger(t))}var n=require("superagent"),r=require("hermes-core/flog")(t);e.namespace("ListFetchers")["flickr-photos-search"]={run:o,_processParams:i,_processResponse:s}},"@VERSION@",{requires:["flickr-promise","search-helper","search-url","api-helper","querystring-parse-simple"],optional:["search-photos-models","search-photos-lite-models","photo-models","photo-lite-models","person-models","photo-engagement-models","photo-stats-models","photo-geo-models"],optionalRequires:["superagent"]});
YUI.add("search-photos-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photos-search"].run(t,this.appContext)}},attributes:{photos:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photos-search"],listItemIdField:"photoId"}},totalItems:{setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},apiParams:{writeOnce:"initOnly"},emptyQuery:{defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-search-fetcher"]});
YUI.add("photo-selector-limited-rows-photolist-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return t.photolistViewClasses&&(t.additionalViewClasses=t.photolistViewClasses),t.photoListConfig=e.merge(t.primaryPhotoListConfig),this.searchUrl=t.searchUrl,this.listId=t.listId,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){return this.appContext.getModel("search-photos-lite-models",this.searchUrl.getId(),{}).then(function(e){this.searchModel=e,e.getValue("totalItems")<=0&&this.set("emptySearch",!0)}.bind(this))},buildContainer:function(){var e="search.YOUR_PHOTOS";return this.listId==="contacts"?e="search.FROM_YOUR_CONTACTS":this.listId==="everyone"&&(e="search.EVERYONES_PHOTOS"),this.setContainerWithTemplate("search-photos-single-row",{emptySearch:this.get("emptySearch"),total:this.searchModel.getValue("totalItems"),singleResult:this.searchModel.getValue("totalItems")===1,viewAll:"#"+this.listId,"photo-list-view":this.subviews["photo-list-view"].get("container"),title:this.intlMessage({intlName:e})}),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.handleClick.bind(this))),this},handleClick:function(e){e.halt();var t=e.target,n;t.hasClass("view-more-link")&&(n=t.getDOMNode().href.split("#")[1],this.fire("subviewViewEvent","viewEntireSearchList",{list:n,searchUrl:this.searchUrl}))}},{ATTRS:{emptySearch:{value:!1}}})},"@VERSION@",{requires:["flickr-view","photo-list-view","hermes-template-search-photos-single-row","search-photos-lite-models"],langBundles:["common","search"]});
YUI.add("hermes-template-photo-selector-photo-list-photo-interaction",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=e.escapeExpression;return'<a href="'+o(e.lambda((s=(s=t!=null?t.photo:t)!=null?s.owner:s)!=null?s.url:s,t))+'" class="attribution">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{user:(s=(s=t!=null?t.photo:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"common.BY_USER"},data:i}))+"</a>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=e.escapeExpression;return'<div class="photo-list-photo-interaction">\n	<div class="square"></div>\n	<div class="interaction-bar">\n		<div class="text">\n			<a href="'+a((o=(o=n.photoPageUrl||(t!=null?t.photoPageUrl:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"photoPageUrl",hash:{},data:i}):o))+'" class="title">'+a(e.lambda((s=t!=null?t.photo:t)!=null?s.title:s,t))+"</a>\n			"+((s=n["if"].call(u,(s=(s=t!=null?t.photo:t)!=null?s.owner:s)!=null?s.displayname:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		</div>\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-selector-photo-list-photo-interaction",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-selector-photolist-interaction-view",function(e){var t=require("hermes-core/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.hasMultiSelect=e.primaryPhotoListConfig&&e.primaryPhotoListConfig.hasMultiSelect,this.multiSelectLimit=e.primaryPhotoListConfig.multiSelectLimit||1,this},loadState:function(){return this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid).then(function(e){var t=e.getValue("photos");t.getFromListByID(this.get("model").getValue("id"))&&this.set("isActive",!0)}.bind(this))},buildContainer:function(){var e=this.get("model");return this.setContainerWithTemplate("photo-selector-photo-list-photo-interaction",{photo:e.toJSON(),photoPageUrl:this.get("photoPageUrl")}),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectPhoto.bind(this))),this.hasMultiSelect||this.registerEventHandler(e.on("photoSelector:subviewEvent",this.handleOtherPhotoSelected,this)),this.get("isActive")?this.get("isActive")&&this.get("container").addClass("active"):this.get("container").removeClass("active"),this},selectPhoto:function(t){t.halt();if(this.get("isActive")&&this.hasMultiSelect)this.set("isActive",!1),this.get("container").removeClass("active"),e.fire("photoSelector:subviewEvent",{eventName:"unselectPhotoFromPhotoList",id:this.get("id")});else{if(this.hasMultiSelect)return this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid).then(function(t){var n=t.getValue("photos");n.size()+1<=this.multiSelectLimit&&(this.set("isActive",!0),this.get("container").addClass("active"),e.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")}))}.bind(this));this.set("isActive",!0),this.get("container").addClass("active"),e.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")})}},handleOtherPhotoSelected:function(e){if(e.eventName==="selectPhotoFromPhotoList"&&this.get("isActive")){if(e.id===this.get("id"))return;this.set("isActive",!1),this.get("container")._node&&this.get("container").removeClass("active")}}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,n){return t.photoId(e)}},model:{writeOnce:"initOnly"},photoPageUrl:{writeOnce:"initOnly"}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-photo-list-photo-interaction","attribute-helpers"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-photo-selector-sets-photolist-set-interaction",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'				<span class="album-photo-count">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{selectedCount:(s=t!=null?t.album:t)!=null?s.publicPhotosCount:s,intlName:"album-page.PUBLIC_ITEMS_COUNT"},data:i}))+"</span>\n"},3:function(e,t,n,r,i){var s;return'			<span class="album-photo-count">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{selectedCount:(s=t!=null?t.album:t)!=null?s.totalCount:s,intlName:"album-page.PHOTOS_COUNT"},data:i}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="photo-list-album-interaction photo-selector-album dark">\n	<div class="interaction-bar">\n		<h4 class="album-title">'+e.escapeExpression(e.lambda((s=t!=null?t.album:t)!=null?s.title:s,t))+"</h4>\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.publicOnlyPhotos:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-selector-sets-photolist-set-interaction",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-selector-sets-photolist-interaction-view",function(e){var t=require("hermes-core/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.publicOnlyPhotos=e.publicOnlyPhotos,this},loadState:function(){return this.appContext.getModel(this.get("engagementModelName"),this.get("id")).then(function(e){this.set("engagement",e)}.bind(this))},buildContainer:function(){return this.setContainerWithTemplate("photo-selector-sets-photolist-set-interaction",{album:this.get("model").toJSON(),publicOnlyPhotos:this.publicOnlyPhotos,albumPageUrl:this.get("albumPageUrl")}),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectSet.bind(this))),this},selectSet:function(t){t.halt(),e.fire("photoSelector:subviewEvent",{eventName:"selectSetFromPhotoList",id:this.get("id"),title:this.get("model").getValue("title")})},destructor:function(){}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,n){return t.photoId(e)}},model:{writeOnce:"initOnly"},albumPageUrl:{writeOnce:"initOnly"},engagement:{value:null},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(t,n){return e.AttributeHelpers.validateString(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-sets-photolist-set-interaction","attribute-helpers"],optionalRequires:["fluid"],langBundles:["album-page"]});
YUI.add("hermes-lang-album-page_fr-fr",function(e,t){e.Intl.add("hermes/album-page","fr-FR",{PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#}\u00a0photo",other:"${#}\u00a0photos"}}],PUBLIC_PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#}\u00a0photo publique",other:"${#}\u00a0photos publiques"}}],PUBLIC_ITEMS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#}\u00a0\u00e9l\u00e9ment public",other:"${#}\u00a0\u00e9l\u00e9ments publics"}}],VIDEOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#}\u00a0vid\u00e9o",other:"${#}\u00a0vid\u00e9os"}}],VIEWS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#}\u00a0vue",other:"${#}\u00a0vues"}}],BACK_TO_ALBUMS:["Retour \u00e0 la liste d\u2019albums"],EDIT_IN_ORGANIZR:["Modifier dans Organizr"],EDIT_COVER:["Modifier la couverture"],SELECT_COVER_PHOTO:["S\u00e9lectionnez une photo de couverture"],SELECT:["S\u00e9lectionner"],ERROR_COVER_PHOTO:["Un probl\u00e8me s'est produit lors de la tentative de d\u00e9finition de la photo de couverture. Veuillez r\u00e9essayer."],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:["Une erreur s'est produite lors de la mise \u00e0 jour du titre et de la description de l'album."],ALBUM_ADD_DESCRIPTION:["Cliquez ici afin de saisir une description pour cet album"],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:["Un probl\u00e8me s'est produit lors de la cr\u00e9ation du livre pour cet album. Veuillez r\u00e9essayer ult\u00e9rieurement."],ALBUM_DESCRIPTION:["Description de l'album"],CREATE_BOOK_FROM_ALBUM:["Cr\u00e9er un livre \u00e0 partir de cet album"],DOWNLOAD_PHOTOS_AND_VIDEO:["T\u00e9l\u00e9charger ",{type:"plural",valueName:"photoCount",options:{one:"${#}\u00a0photo",other:"${#}\u00a0photos"}}," et ",{type:"plural",valueName:"videoCount",options:{one:"${#}\u00a0vid\u00e9o",other:"${#}\u00a0vid\u00e9os"}}],DOWNLOAD_PHOTOS:["T\u00e9l\u00e9charger ",{type:"plural",valueName:"photoCount",options:{one:"${#}\u00a0photo",other:"${#}\u00a0photos"}}],DOWNLOAD_VIDEOS:["T\u00e9l\u00e9charger ",{type:"plural",valueName:"videoCount",options:{one:"${#}\u00a0vid\u00e9o",other:"${#}\u00a0vid\u00e9os"}}],DOWNLOAD_ZIP:["T\u00e9l\u00e9charger un fichier zip"],DOWNLOAD_ZIP_PART:["T\u00e9l\u00e9charger un fichier zip partie\u00a0","${partSequence}"],ALOT_OF_PHOTOS:["Eh, cela fait beaucoup de photos\u00a0! Cliquez pour t\u00e9l\u00e9charger chaque lot sous forme de fichier zip."],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:["Cet album ne contient aucune photo ni vid\u00e9o que vous pouvez t\u00e9l\u00e9charger."],DOWNLOAD_ALBUM_DISABLED_ERROR:["Le t\u00e9l\u00e9chargement d'album n'est pas disponible actuellement. Veuillez r\u00e9essayer dans quelques minutes."],DOWNLOAD_ALBUM_GENERIC_ERROR:["Une erreur s'est produite lors du t\u00e9l\u00e9chargement de cet album. Veuillez r\u00e9essayer."],DOWNLOAD_ALBUM_LICENSE_MESSAGE:["Ces photos peuvent \u00eatre associ\u00e9es \u00e0 un ou plusieurs types de licence. Consultez la page de photo individuelle pour en savoir plus sur la licence associ\u00e9e avant de t\u00e9l\u00e9charger cet album."],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:["Ces photos peuvent \u00eatre associ\u00e9es \u00e0 un ou plusieurs types de licence. Avant de t\u00e9l\u00e9charger cet album, consultez les diff\u00e9rentes pages de photos pour comprendre le type de licence d\u00e9sign\u00e9 pour chaque image"],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:["Ces photos sont peut-\u00eatre associ\u00e9es \u00e0 un ou plusieurs types de licence, ou leurs droits sont peut-\u00eatre r\u00e9serv\u00e9s. Avant de t\u00e9l\u00e9charger cet album, consultez les diff\u00e9rentes pages de photos pour comprendre le type de licence d\u00e9sign\u00e9 pour chaque image."],DOWNLOAD_ALBUM_LEARN_MORE:['En savoir plus en acc\u00e9dant \u00e0 la page <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a>'],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:["Voulez-vous vraiment supprimer cet album\u00a0? (Ne vous inqui\u00e9tez pas, aucun contenu ne sera supprim\u00e9.)"],DELETE_THIS_ALBUM:["Supprimer cet album"],SHARE_THIS_ALBUM:["Partager cet album"],CREATE_NEW_ALBUM:["Cr\u00e9er un album"],NEW_ALBUM:["Nouvel album"],NEW_COLLECTION:["Nouveau classeur"],VIEW_COLLECTIONS:["Afficher les classeurs"],VIEW_MY_COLLECTIONS:["Afficher mes classeurs"],SORT:["Trier"],SORT_DATE_TAKEN_OLDEST:["Trier par date de prise de vue (la plus ancienne en premier)"],SORT_DATE_TAKEN_NEWEST:["Trier par date de prise de vue (la plus r\u00e9cente en premier)"],SORT_DATE_UPLOADED_OLDEST:["Trier par date d\u2019envoi au serveur (la plus ancienne en premier)"],SORT_DATE_UPLOADED_NEWEST:["Trier par date d\u2019envoi au serveur (la plus r\u00e9cente en premier)"],SORT_ALPHABETICALLY:["Alphab\u00e9tique"],SORT_RANDOMLY:["Al\u00e9atoire"],SORT_REVERSE:["Ordre actuel inverse"],SORT_ALMOST_DONE:["C\u2019est presque fini..."],TIMEOUT_FAILURE:["Nous ne parvenons pas \u00e0 afficher cet album actuellement. Veuillez r\u00e9essayer."],OPENGRAPH_DESCRIPTION:["D\u00e9couvrez cet album photo de ","${owner}"," sur Flickr\u00a0!"]})},"@VERSION@",{requires:["intl"]});
YUI.add("photo-selector-view",function(e,t){var n=require("hermes-core/flog")(t),r=150,i=200,s={};s={horizontal:20,vertical:20},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").getHTML()===""&&this.setContainerWithTemplate("flickr-balls"),this.photoListView,this.searchPhotoListViews=[],this.publicOnlyGroups=e.publicOnlyGroups,this.publicOnlyPhotos=e.publicOnlyPhotos,this.enableMultiSelect=e.enableMultiSelect||!1,this.multiSelectLimit=e.multiSelectLimit||1,this.preSelectedPhotos=e.preSelectedPhotos||[],this.clearRegistriesOnDestroy=e.clearRegistriesOnDestroy||!1,this.selectedModels=[],e.enableVideos&&this.set("itemFilterFunction",!1),this.isUploading=!1,this},loadState:function(){var t=this.appContext.getViewer().nsid;return this.publicOnlyPhotos&&(t+="-public"),this.appContext.getModelRegistry("profile-selected-photos-models").then(function(n){n.removeAll();var r={selectionModel:this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid),photostreamModel:this.appContext.getModel("photostream-models",t,this.publicOnlyPhotos?{viewAs:"public"}:undefined),setModelRegistry:this.appContext.getModelRegistry("set-models"),setsModel:this.appContext.getModel("sets-models",this.appContext.getViewer().nsid,{page:1,perPage:25})};return(new e.FlickrPromise(r)).then(this.onLoadStateResolved.bind(this))}.bind(this))},onLoadStateResolved:function(e){this.set("selectionModel",e.selectionModel),this.set("photostreamModel",e.photostreamModel),this.set("setsModel",e.setsModel),this.set("setModelRegistry",e.setModelRegistry),this.enableMultiSelect&&this.get("selectionModel").setValue("photos",this.preSelectedPhotos?this.preSelectedPhotos:[]),this.get("photostreamModel").getValue("totalItems")===0?this.set("photostreamEmpty",!0):this.set("photostreamEmpty",!1);if(this.get("groupId"))return this.appContext.getModel("group-pool-models",this.get("groupId")).then(function(e){this.set("groupModel",e)}.bind(this),function(e){n.error("error loading group model",{err:e})})},moveElementToFirstInArray:function(e,t,n){var r;return e.forEach(function(e,i){e[n]===t&&(r=i)}),e.unshift(e.splice(r,1)[0]),e},buildContainer:function(){return this.setContainerWithTemplate("photo-selector",{hasUploadCapabilities:this.get("hasUploadCapabilities"),searchable:this.get("searchable"),publicOnlyPhotos:this.get("publicOnlyPhotos"),photostreamEmpty:this.get("photostreamEmpty"),hasGroupCapabilities:this.get("groupId")}),this},loadPhotoList:function(t,i){var o=this,u=this.get("container"),a=u.one(".photo-selector-photos-wrapper"),f;this.photoListView&&this.photoListView.destroy(),i||(i=!1),f={modelParams:t,fetchParams:t.fetchParams,parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,parentContainer:a,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(f.itemFilterFunction=this.get("itemFilterFunction")),f.layout={targetRowHeight:r,containerWidth:f.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:s,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=f,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:f,isActiveViewAgnostic:!0,container:u.one(".photo-selector-photos-container")}).then(function(t){return t.initialize().then(function(t){var n,r=u.one(".photo-selector-photos-container"),s=r.one(".photo-list-view"),f=u.one(".loader");a.getDOMNode().scrollTop=0,o.photoListView=t,f&&f.addClass("loaded"),s.hasChildNodes()||(i?n=e.Node.create('<p class="no-results">'+o.intlMessage({intlName:"search.NO_MATCHES_FOR_QUERY_TERM_YOUR"})+"</p>"):o.publicOnlyPhotos?n=e.Node.create('<p class="no-results">'+o.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"})+"</p>"):n=e.Node.create('<p class="no-results">'+o.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PHOTOS"})+"</p>"),s.empty(),r.prepend(n)),o.addPhotoToSelection(null)})},function(e){n.error("Error getting view",{err:e})})},loadSelectionPhotoList:function(){var t=this,i=this.get("container"),o=i.one(".photo-selector-photos-wrapper"),u;this.photoListView&&this.photoListView.destroy(),u={parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,initialItems:this.get("selectionModel").getValue("photos").getList(),parentContainer:o,relayoutOnResize:!0,interactionViewName:"photo-selector-selection-interaction-view"},u.layout={targetRowHeight:r,containerWidth:u.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:s,forceAspectRatio:1,alwaysDisplayOrphans:!0,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:o.get("offsetHeight")},this.get("itemFilterFunction")&&(u.itemFilterFunction=this.get("itemFilterFunction")),this.appContext.params.primaryPhotoListConfig=u,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:u,isActiveViewAgnostic:!0,nsid:this.appContext.getViewer().nsid,container:i.one(".photo-selector-photos-container")}).then(function(n){return n.initialize().then(function(n){var r,s=i.one(".photo-selector-photos-container"),u=s.one(".photo-list-view"),a=i.one(".loader");s.addClass("photo-selector-selection-photolist"),o.getDOMNode().scrollTop=0,t.photoListView=n,a&&a.addClass("loaded"),u.hasChildNodes()||(r=e.Node.create('<p class="no-results">'+t.intlMessage({intlName:"profile.NO_PHOTOS_SELECTED"})+"</p>"),u.empty(),s.prepend(r))})},function(e){n.error("Error getting view",{err:e})})},loadGroupPhotoList:function(t){var i=this,o=this.get("container"),u=o.one(".group-photo-selector-photos-wrapper"
),a;this.photoListView&&this.photoListView.destroy(),a={modelParams:t,parentName:this.name,paginateOnScroll:!0,parentContainer:u,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(a.itemFilterFunction=this.get("itemFilterFunction")),a.layout={targetRowHeight:r,containerWidth:a.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:s,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:u.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=a,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:a,isActiveViewAgnostic:!0,container:u}).then(function(t){return t.initialize().then(function(t){var n,r=o.one(".group-photo-selector-photos-container"),s=r.one(".photo-list-view");u.getDOMNode().scrollTop=0,i.photoListView=t,o.one(".loader").addClass("loaded"),s.hasChildNodes()||(n=e.Node.create('<p class="no-results">'+i.intlMessage({intlName:"groups.GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS"})+"</p>"),s.empty(),r.prepend(n)),i.addPhotoToSelection(null)})},function(e){n.error("Error getting view",{err:e})})},loadSetsPhotoList:function(e){var t=this,r=this.get("container"),o;this.photoListView&&this.photoListView.destroy(),o={modelParams:e,parentName:this.name,paginateOnScroll:!0,parentContainer:r.one(".photo-selector-photos-wrapper"),relayoutOnResize:!0,interactionViewName:this.get("setsInteractionViewName"),engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial"},o.layout={targetRowHeight:i,containerWidth:o.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:s,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:r.one(".photo-selector-photos-wrapper").get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=o,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:o,isActiveViewAgnostic:!0,container:r.one(".photo-selector-photos-container")}).then(function(e){return e.initialize().then(function(e){var n,i=r.one(".loader"),s=r.one(".photo-selector-photos-container .photo-list-view");r.one(".photo-selector-photos-wrapper").getDOMNode().scrollTop=0,t.photoListView=e,i&&r.one(".loader").addClass("loaded"),t.addPhotoToSelection(null)})},function(e){n.error("Error getting view",{err:e})})},loadSearchPhotoList:function(e){var t=this,i=this.get("container"),o,u=e.photoListContainerSelector?i.one(e.photoListContainerSelector):i.one(".photo-selector-photos-container"),a=e.parentContainerSelector?i.one(e.parentContainerSelector):i.one(".photo-selector-photos-wrapper"),f=e.maxNumRows?this.get("limitedRowsPhotoListViewName"):this.get("photoListViewName");this.searchPhotoListViews&&this.searchPhotoListViews[e.listId]&&this.searchPhotoListViews[e.listId].destroy(),o={modelParams:e.modelParams,parentName:this.name,paginateOnScroll:!0,parentContainer:a,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),engagementModelName:"photo-lite-models"},this.get("itemFilterFunction")&&(o.itemFilterFunction=this.get("itemFilterFunction")),o.layout={targetRowHeight:r,containerWidth:o.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:s,forceAspectRatio:1,maxNumRows:e.maxNumRows?e.maxNumRows:Number.POSITIVE_INFINITY,alwaysDisplayOrphans:e.alwaysDisplayOrphans?e.alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=o,this.appContext.getView(f,{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:o,isActiveViewAgnostic:!0,container:u,searchUrl:e.searchUrl,listId:e.listId}).then(function(n){return n.initialize().then(function(n){t.registerEventHandler(n.on("subviewViewEvent",t.handleSubviewEvent,t)),i.one(".photo-selector-search-lists-wrapper").getDOMNode().scrollTop=0,e.parentContainerSelector&&(i.one(e.parentContainerSelector).getDOMNode().scrollTop=0),t.searchPhotoListViews[e.listId]=n,i.one(".loader").addClass("loaded"),t.addPhotoToSelection(null)})},function(e){n.error("Error getting view",{err:e})})},activate:function(){var t=this.get("container"),n,r=this.get("defaultSelected");return this.registerEventHandler(t.on("click",this.handleClick,this)),this.get("hasUploadCapabilities")&&this.registerEventHandler(t.one(".file-select").on("change",this.handleFileSelect,this)),this.registerEventHandler(e.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),r?r.type==="group"?(n={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId")+"-public",collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(n.fetchParams={privacyFilter:1},n.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(n),this.toggleTitleBar(r.title,"group")):r.type==="gallery"?(n={registryName:"gallery-info-models",modelIdOrAttributes:r.id,collectionAttributeName:"photoList"},this.loadPhotoList(n)):(n={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?r.id+"-public":r.id,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(n.fetchParams={filter:1}),this.loadPhotoList(n),this.toggleTitleBar(r.title,"set")):this.get("photostreamModel").getValue("totalItems")===0?this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"},"empty",!1)):(n={registryName:"photostream-models",modelIdOrAttributes:this.publicOnlyPhotos?this.appContext.getViewer().nsid+"-public":this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(n.fetchParams={viewAs:"public"}),this.loadPhotoList
(n,!1)),this},toggleUploader:function(){this.get("hasUploadCapabilities")&&(this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-upload").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"))},toggleSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").removeClass("is-hiding")},toggleSearchListsSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleGroupSelector:function(){var e=this.get("container").one(".photo-selector-upload");e&&e.addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").removeClass("is-hiding")},toggleTitleBar:function(t,n,r){var i=this.get("container"),s=i.one(".photo-selector-title-bar"),o=s.one(".back-to-list"),u="";typeof r=="undefined"&&(r=!0),n==="search"&&t&&(t='"'+t+'"'),n==="set"?u=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"}):n==="search"&&(u=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_SEARCH_LIST"})),r?o.removeClass("hidden"):o.addClass("hidden"),o.set("text",u),s.one(".title").set("text",e.Handlebars.helpers.truncate(t,120)),s.removeClass("hidden"),i.one(".photo-selector-photos-wrapper").addClass("showing-title"),i.one(".photo-selector-search-lists-wrapper").addClass("showing-title"),this.get("groupId")&&i.one(".group-photo-selector-photos-wrapper").addClass("showing-title")},hideTitleBar:function(){var e=this.get("container"),t=e.one(".photo-selector-title-bar");t.addClass("hidden"),e.one(".photo-selector-photos-wrapper").removeClass("showing-title"),this.get("groupId")&&e.one(".group-photo-selector-photos-wrapper").removeClass("showing-title")},onParentViewEvent:function(t,n){var r=n[1],i,s,o={},u=this.get("searchable"),a=this.get("container").one(".no-results"),f;if(n[0]==="navigation"){i=r.target._node.dataset.value;if(i==="upload")this.get("hasUploadCapabilities")&&(this.toggleUploader(),this.hideTitleBar()),this.get("fileDragDrop")?this.get("fileDragDrop").reset():(this.set("fileDragDrop",new e.HtmlFileDragDrop({dropZone:".photo-selector-upload > .drop-zone"})),this.get("fileDragDrop").on("drop",this.handleFileDrop,this));else{this.get("hasUploadCapabilities")&&this.toggleSelector();if(i==="group")s={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId"),collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(s.fetchParams={privacyFilter:1},s.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(s);else if(i==="photostream"){if(this.get("photostreamModel").getValue("totalItems")===0){a&&a.remove(),this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"},"empty",!1));return}s={registryName:"photostream-models",modelIdOrAttributes:this.publicOnlyPhotos?this.appContext.getViewer().nsid+"-public":this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(s.fetchParams={viewAs:"public"}),this.loadPhotoList(s)}else if(i==="sets"){if(this.get("setsModel").getValue("totalItems")===0){var l=this.get("container").one(".photo-list-view");a&&a.remove(),this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_NO_ALBUMS"},"empty",!1)),l.empty();return}s={registryName:"sets-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"albumsList"},this.loadSetsPhotoList(s)}else i==="gallery"?(s={registryName:"gallery-info-models",modelIdOrAttributes:this.get("galleryId"),collectionAttributeName:"photoList"},this.loadPhotoList(s)):this.loadSelectionPhotoList();this.hideTitleBar()}}else n[0]==="search"&&(f=new e.SearchUrl(r.apiParams,this.appContext),this.toggleSearchListsSelector(),u.yours&&(this.searchUrlYourPhotos=new e.SearchUrl(r.apiParams,this.appContext),this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),!u.contacts&&!u.everyone?(this.toggleSelector(),s={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams(),additionalExtras:["o_dims","is_marketplace_printable","has_invalid_colorspace_for_print"]}},this.publicOnlyPhotos&&(s.fetchParams.privacyFilter=1),this.loadPhotoList(s,!0)):(o.listId="yours",o.photoListContainerSelector=".photo-selector-search-list-yours .photo-selector-search-list-container",o.parentContainerSelector=".photo-selector-search-list-yours",o.maxNumRows=1
,o.alwaysDisplayOrphans=!0,o.searchUrl=this.searchUrlYourPhotos,o.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams()}},this.publicOnlyPhotos&&(s.fetchParams.privacyFilter=1),this.loadSearchPhotoList(o))),u.contacts&&(this.searchUrlContactsPhotos=new e.SearchUrl(r.apiParams,this.appContext),this.searchUrlContactsPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),this.searchUrlContactsPhotos.setAPIParam("contacts","all"),o.listId="contacts",o.photoListContainerSelector=".photo-selector-search-list-contacts .photo-selector-search-list-container",o.parentContainerSelector=".photo-selector-search-list-contacts",o.maxNumRows=1,o.alwaysDisplayOrphans=!0,o.searchUrl=this.searchUrlContactsPhotos,o.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlContactsPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlContactsPhotos.getAPIParams()}},this.loadSearchPhotoList(o)),u.everyone&&(this.searchUrlEveryonePhotos=new e.SearchUrl(r.apiParams,this.appContext),o.listId="everyone",o.photoListContainerSelector=".photo-selector-search-list-everyone .photo-selector-search-list-container",o.parentContainerSelector=".photo-selector-search-list-everyone",o.maxNumRows=1,o.alwaysDisplayOrphans=!0,o.searchUrl=this.searchUrlEveryonePhotos,o.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:r.id,collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlEveryonePhotos.getAPIParams()}},this.loadSearchPhotoList(o)),this.toggleTitleBar(f.getAPIParams().text,"search",!1))},handleSubviewEvent:function(t){var n,r,i;if(t.eventName==="selectPhotoFromPhotoList")return n={photoModel:this.appContext.getModel("photo-models",t.id)},(new e.FlickrPromise(n)).then(function(e){e.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage"));if(this.enableMultiSelect&&this.hasReachMultiSelectLimit())return;this.addPhotoToSelection(e.photoModel.id,e.photoModel)}.bind(this));if(t.eventName==="unselectPhotoFromPhotoList")return n={photoModel:this.appContext.getModel("photo-models",t.id)},(new e.FlickrPromise(n)).then(function(e){e.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(e.photoModel.id,e.photoModel)}.bind(this));if(t.eventName==="selection:remove")return n={photoModel:this.appContext.getModel("photo-models",t.model.getValue("id"))},(new e.FlickrPromise(n)).then(function(e){e.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(e.photoModel.id,e.photoModel,!0)}.bind(this));t.eventName==="selectSetFromPhotoList"?(r={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?t.id+"-public":t.id,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(r.fetchParams={filter:1}),this.loadPhotoList(r,!1),this.toggleTitleBar(t.title,"set")):t.details&&t.details[0]==="viewEntireSearchList"&&(r={registryName:"search-photos-lite-models",modelIdOrAttributes:t.details[1].searchUrl.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:t.details[1].searchUrl.getAPIParams()}},this.publicOnlyPhotos&&(r.fetchParams.privacyFilter=1),this.toggleSelector(),this.loadPhotoList(r),i="search.YOUR_PHOTOS",t.details[1].list==="contacts"?i="search.FROM_YOUR_CONTACTS":t.details[1].list==="everyone"&&(i="search.EVERYONES_PHOTOS"),i=this.intlMessage({intlName:i}),this.toggleTitleBar(i+": "+t.details[1].searchUrl.getAPIParams().text,"search"))},handleClick:function(e){var t=e.target,n,r;if(this.isUploading)return;t.hasClass("back-to-list")?this.fire("subviewViewEvent","backToList"):t.hasClass("simulate-file-select")&&(e.halt(),this.get("container").one(".file-select").set("value",""),this.get("container").one(".file-select").getDOMNode().click())},handleSelectPhoto:function(t){var n;n={photoModel:this.appContext.getModel("photo-models",t.getData("photo-id"))};if(t.hasClass("invalid"))return;return this.set("photoSource",this.get("photoSourceOwnImage")),(new e.FlickrPromise(n)).then(function(e){this.addPhotoToSelection(e.photoModel.id,e.photoModel)}.bind(this))},hasReachMultiSelectLimit:function(){return this.get("selectionModel").getValue("photos").size()===this.multiSelectLimit},addPhotoToSelection:function(t,n){if(t===null)this.set("selected",null),e.fire("photoSelector:unselected");else if(t&&this.enableMultiSelect){var r=this.get("selectionModel").getValue("photos");this.hasReachMultiSelectLimit()||r.find(n)||(r.push(n),e.fire("photoSelector:selected",{hasWarning:!1,photoId:t}),this.updateSelectCountText(r.size()))}else t&&(this.set("selected",t),e.fire("photoSelector:selected",{hasWarning:!1,photoId:t}))},updateSelectCountText:function(t){var n=e.one(".profile-showcase-selector .flavor-text"),r=this.multiSelectLimit-t;n&&(r===1?n.setHTML(this.intlMessage({intlName:"profile.SHOWCASE_ALMOST_FULL"})):r===0?n.setHTML(this.intlMessage({intlName:"profile.SHOWCASE_FULL"})):n.setHTML(this.intlMessage({intlName:"profile.CHOOSE_UP_TO_PHOTOS",limit:r})))},removePhotoFromSelection:function(t,n,r){var i=this.get("selectionModel").getValue("photos");if(i.find(n)){var s=i.removeFromList(t);s&&(e.fire("photoSelector:unselected",{hasWarning:!1,photoId:t,wasLastPhotoSelected:i.size()===0}),this.updateSelectCountText(i.size()),r&&this.loadSelectionPhotoList())}},handlePhotoSetSelector:function(e){var t;this.get("hasUploadCapabilities")&&this.toggleSelector(),t={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?e+"-public":e,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(t.fetchParams={filter:1}),this.loadPhotoList(t)},handlePhotoUploaded:function(e){this.appContext.getModelRegistry("photostream-models").then(function(t){t.attributeSearch({normalizedId:this.appContext.getViewer().nsid},!0).forEach(function(e){t.remove(e)}),this.addPhotoToSelection
(e.id,e),this.fire("actionClick",e),this.resetUploader()}.bind(this),function(e){this.appContext.err(e)}.bind(this))},handleFileSelect:function(e){var t;t=e.target.getDOMNode().files[0],t&&t.name&&this.uploadFile(t)},pollTicket:function(t){var n;if(!this.uploadTimer)this.uploadTimer=e.moment();else{n=e.moment().diff(this.uploadTimer,"seconds");if(n>this.get("maxUploadTimeAllowed"))return this.showUploadError("GENERIC")}this.appContext.callAPI("flickr.photos.upload.checkTickets",{tickets:t}).then(function(e){var n;e&&e.stat&&(e.stat!=="ok"&&this.showUploadError("GENERIC"),e.uploader&&e.uploader.ticket instanceof Array&&(n=e.uploader.ticket[0],n&&n.id===t&&(n.complete===1?this.appContext.getModel("photo-models",n.photoid).then(this.handlePhotoUploaded.bind(this),function(e){this.showUploadError("GENERIC")}):n.complete===2?this.showUploadError("FILE_TYPE"):setTimeout(function(){this.pollTicket(t)}.bind(this),1e3))))}.bind(this),function(e){this.showUploadError("GENERIC")}.bind(this))},resetUploader:function(){this.clearUploadError(),this.get("container").one(".drop-zone").removeClass("uploading"),this.get("container").removeClass("uploading"),this.isUploading=!1,this.uploadTimer=undefined},uploadFile:function(t){var r=new FormData,i,s=e.config.flickr.api.hostname_client_upload,o,u;this.clearUploadError(),this.get("container").one(".drop-zone").addClass("uploading"),this.get("container").addClass("uploading"),this.isUploading=!0,r.append("api_key",e.config.flickr.api.site_key),r.append("csrf",e.config.flickr.csrf.token),r.append("photo",t,t.name),r.append("async","1"),r.append("is_public","0"),r.append("is_friend","0"),r.append("is_family","0"),r.append("content_type","1"),i=this._imgFileXhr=new XMLHttpRequest,i.open("POST",s,!0),i.withCredentials=!0,o=function(e){var t=typeof e=="object"?e.target.statusText:e+"";n.error("Error during upload",{statusText:t}),this.resetUploader(),this.showUploadError("GENERIC")},u=function(t){var n,r,i,s;try{s=e.one(t.currentTarget.responseXML),r=s.one("rsp").getAttribute("stat")}catch(u){r="",n=""}return r!=="ok"?o((r||"empty")+": "+(n||"no message")):(i=s.one("ticketid").get("text"),this.pollTicket(i))},i.addEventListener("load",u.bind(this)),i.addEventListener("error",o.bind(this)),i.send(r)},clearUploadError:function(){this.get("container").one(".upload-error").setHTML("")},showUploadError:function(e){this.resetUploader(),this.get("container").one(".upload-error").setHTML(this.intlMessage({intlName:this.get("errorMessages")[e]})),this.get("fileDragDrop").showError()},handleFileDrop:function(e){if(this.isUploading)return;e instanceof Error?this.showUploadError(e.message):this.uploadFile(e)},destructor:function(){this.photoListView&&this.photoListView.destroy()}},{ATTRS:{maxUploadTimeAllowed:{readOnly:!0,value:20},errorMessages:{readOnly:!0,value:{GENERIC:"common.PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC",FILE_TYPE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE",FILE_SIZE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE",FILE_COUNT:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT",LOW_QUALITY:"common.PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY",COLOR_SPACE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE"}},photoSourceOwnImage:{readOnly:!0,value:1},hasUploadCapabilities:{value:!0},photoListViewName:{value:"photo-selector-photolist-view"},limitedRowsPhotoListViewName:{value:"photo-selector-limited-rows-photolist-view"},searchable:{value:{yours:!0,contacts:!0,everyone:!0}},interactionViewName:{value:"photo-selector-photolist-interaction-view"},setsInteractionViewName:{value:"photo-selector-sets-photolist-interaction-view"},itemFilterFunction:{value:function(e){return!e.getValue("isVideo")}},defaultSelected:{value:!1},selected:{},groupId:{},galleryId:{}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","flickr-api","html-file-dragdrop","hermes-template-photo-selector","photo-selector-photolist-view","photo-selector-limited-rows-photolist-view","photo-selector-photolist-interaction-view","photo-selector-sets-photolist-interaction-view"],optional:["search-photos-lite-models"],langBundles:["common","wallart","search","groups","profile"]});
YUI.add("hermes-lang-wallart_fr-fr",function(e,t){e.Intl.add("hermes/wallart","fr-FR",{WALL_ART:["D\u00e9coration murale"],YOU_CANCELLED_THIS_ITEM_ON_DATE:["Vous avez annul\u00e9 la commande de cet article le ",{type:"date",valueName:"date",format:"monthYear"}],YOU_ORDERED_THIS_ITEM_ON_DATE:["Vous avez command\u00e9 cet article le ",{type:"date",valueName:"date",format:"monthYear"}],RETURN_TO_YOUR_ORDER_HISTORY:["Revenir \u00e0 l\u2019historique de vos commandes"],SELECT_A_PHOTO:["S\u00e9lectionnez une photo"],SELECT_PRODUCT:["S\u00e9lectionner un produit"],PHOTO_MOUNT:["Montage photo"],CANVAS:["Ch\u00e2ssis"],CANVAS_WRAP:["Montage sur ch\u00e2ssis"],PREMIUM_LUSTRE:["Tr\u00e8s brillant"],GLOSSY:["Brillant"],MATTE:["Mat"],SIZE:["Taille"],CHECKOUT:["Passer la commande"],REORDER:["Commander de nouveau"],TOTAL:["Total"],UPLOAD:["Importez"],CURATED_COLLECTIONS:["Collections de nos \u00e9diteurs"],CREATIVE_COMMONS:["Creative Commons"],NASA:["NASA"],ABSTRACT:["Abstrait"],ANIMALS:["Animaux"],PATTERNS:["Motifs"],FOOD:["Cuisine"],LANDSCAPES:["Paysages"],TRAVEL:["Voyage"],MY_ALBUMS:["Mes albums"],PRODUCT_DROPUP_CANVAS:["Ch\u00e2ssis artistique sur cadre en bois de 3,80\u00a0cm"],PRODUCT_DROPUP_MOUNTED:["Impression sur papier photo permanent, bord en texture bois de 2,50\u00a0cm"],MATERIAL_DROPUP_LUSTRE:["Papier permanent Crystal professionnel - Tr\u00e8s brillant"],MATERIAL_DROPUP_GLOSSY:["Papier permanent Crystal professionnel - Brillant"],MATERIAL_DROPUP_MATTE:["Papier permanent Crystal professionnel - Mat"],SIZES_MODAL_SIZES_NOT_AVAILABLE:["Certains formats ne sont pas disponibles en raison de la r\u00e9solution de la photo. En savoir plus."],MOUNTED_SAFE_AREA:["La zone \u00e0 l'ext\u00e9rieur de la ligne pleine ne sera pas imprim\u00e9e. <br>La zone \u00e0 l'int\u00e9rieur de la ligne sera imprim\u00e9e correctement."],CANVAS_SAFE_AREA:["La zone \u00e0 l'ext\u00e9rieur de la ligne en pointill\u00e9 sera imprim\u00e9e sur le champ. <br>La zone \u00e0 l'int\u00e9rieur de la ligne sera imprim\u00e9e sera imprim\u00e9e sur la face avant."],SAVING:["Enregistrement en cours..."],SAVED:["Toutes les modifications sont enregistr\u00e9es"],WITH_CODE:["avec le code\u00a0:"],FREE_SHIPPING_WITH_CODE:["Livraison gratuite avec le code\u00a0:"],PRODUCT_DESCRIPTION_CANVAS_PART_1_8X10:["Ch\u00e2ssis 20,3\u00a0x\u00a025,40\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_10X8:["Ch\u00e2ssis 25,40\u00a0x\u00a020,30\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_12X12:["Ch\u00e2ssis 30,5\u00a0x\u00a030,5\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_11X14:["Ch\u00e2ssis 28\u00a0x\u00a035,5\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_14X11:["Ch\u00e2ssis 35,56\u00a0x\u00a027,94\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_16X20:["Ch\u00e2ssis 40,6\u00a0x\u00a050,8\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X16:["Ch\u00e2ssis 50,80\u00a0x\u00a040,64\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X24:["Ch\u00e2ssis 50,8\u00a0x\u00a061\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_24X20:["Ch\u00e2ssis 60,96\u00a0x\u00a050,80\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X30:["Ch\u00e2ssis 50,8\u00a0x\u00a076,2\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_30X20:["Ch\u00e2ssis 76,20\u00a0x\u00a050,80\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_2:["Barres de montage de 3,20\u00a0cm<br>Montant r\u00e9sistant<br>Comprend le mat\u00e9riel n\u00e9cessaire pour l'accrocher au mur"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10:["Impression sur cadre 20,3\u00a0x\u00a025,40\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8:["Impression sur cadre 25,40\u00a0x\u00a020,32\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12:["Impression sur cadre 30,5\u00a0x\u00a030,5\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14:["Impression sur cadre 28\u00a0x\u00a035,5\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11:["Impression sur cadre 35,56\u00a0x\u00a027,94\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20:["Impression sur cadre 40,6\u00a0x\u00a050,8\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16:["Impression sur cadre 50,80\u00a0x\u00a040,64\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30:["Impression sur cadre 50,8\u00a0x\u00a076,2\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20:["Impression sur cadre 76,20\u00a0x\u00a050,80\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE:["Finition mate<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY:["Finition brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE:["Finition tr\u00e8s brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND:["Finition mate<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND:["Finition brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND:["Finition tr\u00e8s brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre"],PHOTO_TOO_SMALL_IN_SELECTED_SIZE:['Cette photo est trop petite pour \u00eatre imprim\u00e9e au format s\u00e9lectionn\u00e9. Nous allons rechercher automatiquement le meilleur format le plus approchant. <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">En savoir plus.</a>'],BAD_SIZES:['Certains formats ne sont pas disponibles en raison de la r\u00e9solution de la photo. <a target="_blank" href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">En savoir plus</a>'],NOT_AVAILABLE:["Non disponible en raison de la r\u00e9solution de la photo"
],UPLOADR_ERROR_MESSAGE_GENERIC:["Un probl\u00e8me est survenu lors de l'importation de votre photo. Veuillez r\u00e9essayer."],UPLOADR_ERROR_MESSAGE_FILE_TYPE:["Apparemment, le type du fichier de la photo est incorrect. Importez une photo au format PNG ou JPG."],UPLOADR_ERROR_MESSAGE_FILE_SIZE:["Apparemment, la photo \u00e0 importer est trop volumineuse. La taille maximale des photos pouvant \u00eatre import\u00e9es est de 250\u00a0Mo."],UPLOADR_ERROR_MESSAGE_FILE_COUNT:["S\u00e9lectionnez une seule photo \u00e0 importer."],UPLOADR_ERROR_MESSAGE_LOW_QUALITY:['Apparemment, votre photo ne correspond pas aux exigences minimales d\'impression. Choisissez une photo d\'au moins 975\u00a0x\u00a0825\u00a0pixels. En savoir plus sur les <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567" target="_blank">exigences</a> relatives aux produits imprim\u00e9s.'],UPLOADR_ERROR_MESSAGE_COLOR_SPACE:['Nous ne pouvons pas imprimer de photos avec syst\u00e8me de couleurs CMJN ou ProPhoto RVB. Nous recommandons d\'utiliser des photos avec syst\u00e8me de couleurs sRVB. <a href="https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33" target="_blank">En savoir plus</a>.'],DRAG_DROP_TO_UPLOAD:['Faites glisser votre photo pour l\'importer ou <a href="#" class="simulate-file-select">parcourez les dossiers</a>.'],PHOTOS_UPLOADED_AS_PRIVATE:['Les photos import\u00e9es seront ajout\u00e9es \u00e0 votre <a href="/me/">galerie </a> en tant que photos priv\u00e9es.'],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_CANVAS:["\u00c0 ce niveau de zoom, l'impression de votre photo sera de qualit\u00e9 m\u00e9diocre. Effectuez un zoom arri\u00e8re pour pouvoir faire cet achat."],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_MOUNTED:["\u00c0 ce niveau de zoom, l'impression de votre photo sera de qualit\u00e9 m\u00e9diocre. Effectuez un zoom arri\u00e8re pour pouvoir faire cet achat."],INITIAL_DIALOG_CANVAS_DISABLED:["Le format ch\u00e2ssis n'est pas disponible pour cette photo en raison de sa faible r\u00e9solution. Le format ch\u00e2ssis n\u00e9cessite un minimum de 975\u00a0x\u00a0825\u00a0pixels."],INITIAL_DIALOG_MOUNTED_DISABLED:["Le format montage photo n'est pas disponible pour cette photo en raison de sa faible r\u00e9solution. Le montage photo n\u00e9cessite un minimum de 1\u00a0000\u00a0x\u00a0800\u00a0pixels."],GO_BACK:["Pr\u00e9c\u00e9dent"],PHOTO_NOT_LARGE_ENOUGH_TO_ROTATE:["Cette photo n'est pas assez grande pour que son orientation puisse \u00eatre modifi\u00e9e."],CHANGE_SIZE:["Changer de format"],CHANGE_PHOTO:["Changer de photo"],CREATIONS:["Cr\u00e9ations"],VIEW_ORDER_HISTORY:["Afficher l\u2019historique des commandes"],COMPLETED:["Termin\u00e9"],IN_PROGRESS:["En cours"],CREATE_NEW:["Cr\u00e9er"],CREATIONS_EMPTY_WALLART:["Aucune d\u00e9coration murale \u00e0 afficher"],CREATIONS_EMPTY_BOOKS:["Aucun album photo \u00e0 afficher"],CREATIONS_EMPTY_TERTIARY:['Nous afficherons ici les cr\u00e9ations en cours et termin\u00e9es.<br>En savoir plus sur les <a href="/create" title="">d\u00e9corations murales</a> et les <a href="/create" title="">albums photo</a>.'],CREATIONS_NOT_ABLE_DELETE:["Nous n'avons pas pu supprimer cette cr\u00e9ation. Veuillez r\u00e9essayer ult\u00e9rieurement."],PHOTO_FOR_WALLART_DELETED:["La photo de cette d\u00e9coration murale a \u00e9t\u00e9 supprim\u00e9e"],DELETE_THIS_WALLART:["Supprimer cette d\u00e9coration murale"],REORDER_THIS_WALLART:["Commander de nouveau cette d\u00e9coration murale"],EDIT_THIS_WALLART:["Modifier cette d\u00e9coration murale"],CHANGE_PAPER:["Changer de papier"],MATERIAL_DROPUP_LUSTRE_NEW:["La finition brillante et nacr\u00e9e apporte \u00e0 votre photo une touche de r\u00e9alisme. Elle offre la saturation des couleurs de la finition brillante et la r\u00e9sistance aux traces de doigt de la finition mate."],MATERIAL_DROPUP_GLOSSY_NEW:["Finition brillante, \u00e9pur\u00e9e et avec contraste \u00e9lev\u00e9 qui am\u00e9liore la nettet\u00e9 de vos photos. Id\u00e9ale pour les photos de surfaces r\u00e9fl\u00e9chissant la lumi\u00e8re telles que l'eau, le m\u00e9tal ou le ciel."],MATERIAL_DROPUP_MATTE_NEW:["Finition mate, \u00e9l\u00e9gante et avec faible contraste qui am\u00e9liore la texture de vos photos. Parfaitement adapt\u00e9e aux photos en noir et blanc gr\u00e2ce \u00e0 sa r\u00e9sistance aux traces de doigt."],ON_SALE:["Promotion"],PRODUCT_DESCRIPTION_CANVAS_PART_2_PREVIEW:["<span>Barres de montage de 1,25\u00acpouce</span><span>Montant r\u00e9sistant</span><span>Comprend le mat\u00e9riel n\u00e9cessaire pour l'accrocher au mur</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_PREVIEW:["<span>Finition mate</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_PREVIEW:["<span>Finition brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_PREVIEW:["<span>Finition tr\u00e8s brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND_PREVIEW:["<span>Finition mate</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND_PREVIEW:["<span>Finition brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND_PREVIEW:["<span>Finition tr\u00e8s brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre</span>"],PHOTO_BOOK:["Livre photos"],GLOSSY_HARDCOVER_BOOK_PREMIUM_LUSTRE_PAPER
:["Livre de 11\u00a0x 8,5\u00a0pouces (28\u00a0x 21,6\u00a0cm), jaquette brillante et papier finition brillante de grande qualit\u00e9"],LOW_QUALITY_WARNING:["Cette photo ne peut pas \u00eatre imprim\u00e9e, car la r\u00e9solution est trop faible."],INVALID_COLORSPACE_WARNING:["Cette photo ne peut pas \u00eatre imprim\u00e9e, car elle utilise un syst\u00e8me de couleurs qui n\u2019est pas pris en charge."],LOW_QUALITY_TYPE_WARNING:["Cette photo ne peut pas \u00eatre imprim\u00e9e avec ce type de produit Wall Art, car la r\u00e9solution est trop faible."],NO_COMPLETED_ORDER:["Aucune commande termin\u00e9e."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-profile_fr-fr",function(e,t){e.Intl.add("hermes/profile","fr-FR",{MEMBER_DESCRIPTION:["Description"],MEMBER_INFO:["Infos sur ce membre"],EMPTY_DESCRIPTION:["Parlez-nous un peu de vous"],ABOUT_USERNAME:["\u00c0 propos de ","${username}"],MOST_POPULAR_PHOTOS:["Photos les plus populaires"],MOST_POPULAR_PHOTOS_EMPTY_TITLE:["Vos photos les plus appr\u00e9ci\u00e9es appara\u00eetront ici."],MOST_POPULAR_PHOTOS_EMPTY_TEXT:["Rendez vos photos publiques pour obtenir plus de commentaires, de vues et de mises en favoris."],MOST_POPULAR_PHOTOS_EMPTY_TEXT_2:["Pour une meilleure exposition, ajoutez-les \u00e0 des groupes"],HAS_NO_PUBLIC_PHOTOS_YET:["${username}"," n'a pas encore d\u00e9fini de photos comme \u00e9tant publiques."],MOST_POPULAR_PHOTOS_GO_TO_CR:["Acc\u00e9der \u00e0 la pellicule"],TESTIMONIALS:["T\u00e9moignages"],PHOTOS_OF:["Photos de ","${username}"],READ_MORE:["En savoir plus"],READ_LESS:["Moins d\u2019infos"],EDIT_DESCRIPTION:["Modifier la description"],EDIT_INFOS:["Modifiez les informations de votre profil"],EDIT_SHOWCASE:["Modifiez votre vitrine"],CHANGE_SHOWCASE_PHOTOS:["Changez vos photos de pr\u00e9sentation"],SHOWCASE_FULL:["Votre vitrine est compl\u00e8te\u00a0! Changer de photos"],SHOWCASE_ALMOST_FULL:["Plus qu\u2019une photo... Faites le bon choix\u00a0!"],ADD_PHOTOS:["Ajouter des photos"],VIEW_ALL:["Tout afficher"],THIS_YOUR_SHOWCASE:["Voici votre vitrine."],SHOW_OFF_YOUR_PHOTOS:["Affichez jusqu\u2019\u00e0 ","${limit}"," de vos photos."],GET_STARTED:["C'est parti"],CHOOSE_UP_TO_PHOTOS:[{type:"plural",valueName:"limit",options:{one:"Choisissez jusqu\u2019\u00e0 ${#}\u00a0autre photo",other:"Choisissez jusqu\u2019\u00e0 ${#}\u00a0autres photos"}}],SELECT_PHOTOS:["S\u00e9lectionner des photos"],SHOWCASE_ALREADY_THERE:["Cette photo est d\u00e9j\u00e0 dans votre pr\u00e9sentation."],SHOWCASE_ERR:["Une erreur s\u2019est produite. Actualisez la page."],BIO_JOINED:["Membre depuis"],BIO_OCCUPATION:["Poste"],BIO_HOMETOWN:["Ville natale"],BIO_CURRENT_CITY:["Ville actuelle"],BIO_COUNTRY:["Pays"],BIO_WEBSITE:["Site Web"],BIO_EMAIL:["Mail"],BIO_FACEBOOK:["Facebook"],BIO_TWITTER:["Twitter"],BIO_INSTAGRAM:["Instagram"],BIO_PINTEREST:["Pinterest"],BIO_TUMBLR:["Tumblr"],BIO_RELATIONSHIP:["Relation"],COUNTS_GROUPS:[{type:"plural",valueName:"groupsCount",options:{one:"groupe",other:"groupes"}}],COUNTS_GEOTAGGED:[{type:"plural",valueName:"geoCount",options:{one:"photo avec tag g\u00e9ographique",other:"photos avec tag g\u00e9ographique"}}],COUNTS_GEOTAGS:[{type:"plural",valueName:"geoCount",options:{one:"g\u00e9otag",other:"g\u00e9otags"}}],COUNTS_FAVORITES:[{type:"plural",valueName:"favesCount",options:{one:"favori",other:"favoris"}}],COUNTS_TAGS:[{type:"plural",valueName:"tagsCount",options:{one:"tag",other:"tags"}}],COUNT_VIEWS:[{type:"plural",valueName:"viewsCount",options:{one:"vue",other:"vues"}}],BLOCK_USER:["Bloquer un utilisateur"],FILTER_FAVES:["Les plus mises en favori"],FILTER_VIEWS:["Les plus vues"],FILTER_COMMENTS:["Les plus comment\u00e9es"],FILTER_INTERESTING:["Les plus int\u00e9ressantes"],AWESOME:["G\u00e9nial\u00a0!"],REFRESH_NOW:["Actualisez l\u2019affichage pour voir votre pr\u00e9sentation."],TOO_MANY_PHOTOS:["Vous ne pouvez pas ajouter plus de ","${limit}","\u00a0photos \u00e0 votre pr\u00e9sentation."],PROFILE_SHARE_FEEDBACK:['Ce nouveau profil Flickr n\u2019est visible que par les membres du groupe Alpha. Partagez vos avis <a href="',"${url}",'">ici</a>.'],PROFILE_SHARE_FEEDBACK_ONBOARDING:['Les profils ont fait peau neuve. Nous aimerions vraiment savoir ce que vous en pensez. <a href="',"${url}",'">Faites-nous part de votre avis\u00a0!</a>'],PROFILE_CHECK_OUT:['Les profils ont \u00e9t\u00e9 modifi\u00e9s\u00a0: d\u00e9couvrez votre <a href="',"${urlAbout}",'">nouvelle page \u00c0 propos</a>\u00a0! Ensuite, <a href="',"${urlFeedback}",'" target="_blank">donnez-nous votre avis</a>\u00a0!'],PROFILE_PHOTO_NOT_PUBLIC:["Apparemment, cette photo n\u2019est pas publique."],PROFILE_SAVED_MAGICALLY:["Les modifications sont enregistr\u00e9es automatiquement\u00a0!"],PROFILE_SAVED_AUTO:["Les modifications sont enregistr\u00e9es automatiquement\u00a0!"],SAVING:["Enregistrement"],PLACEHOLDER_SOCIAL:["Votre nom d\u2019utilisateur ou le lien vers votre profil"],EVERYONE:["Tout le monde"],ANY_FLICKR_MEMBER:["Tout membre Flickr"],PEOPLE_I_FOLLOW:["Les personnes que je suis"],FRIENDS_AND_FAMILY:["Amis et famille"],ONLY_ME:["Seulement moi"],USER_FOLLOWS_YOU:["${username}"," vous suit."],USER_IS_FAMILY:["${username}"," vous consid\u00e8re comme un membre de sa famille."],USER_IS_FRIEND:["${username}"," vous consid\u00e8re comme un ami."],USER_IS_FRIEND_FAMILY:["${username}"," vous consid\u00e8re comme un ami et un membre de sa famille."],TESTIM_PENDING:["En attente"],TESTIM_EMPTY_SELF:["Personne n\u2019a encore ajout\u00e9 de t\u00e9moignage pour vous."],TESTIM_EMPTY_SOMEONE:["Personne n\u2019a encore ajout\u00e9 de t\u00e9moignage."],TESTIM_EMPTY:["Quelque chose de sympa \u00e0 dire sur ","${username}","\u00a0?"],TESTIM_WRITE:["\u00c9crire un t\u00e9moignage"],TESTIM_POST:["Publier"],TESTIM_SHOW_MORE:["Voir plus"],TESTIM_APPROVE:["Approuver"],TESTIM_REJECT:["Refuser"],TESTIM_SENT_APPROVAL:["Votre t\u00e9moignage sera envoy\u00e9 \u00e0 ","${username}"," pour approbation."],TESTIM_SENT_APPROVAL_SHOWN:["Votre t\u00e9moignage sera affich\u00e9 une fois qu\u2019il sera approuv\u00e9 par ","${username}","."],TESTIM_GREAT_TITLE:["Parfait !"],TESTIM_DELETE_CONFIRM:["Supprimer cette publication\u00a0?"],TESTIM_DELETE_TEXT:["Vous ne pouvez pas annuler cette op\u00e9ration. Voulez-vous vraiment supprimer d\u00e9finitivement cette publication\u00a0?"],TESTIM_EDIT_CONFIRM_TITLE:["Modifier cette publication\u00a0?"],TESTIM_EDIT_CONFIRM_TEXT:["Si vous choisissez de modifier cette publication, elle sera renvoy\u00e9e pour approbation \u00e0 la personne concern\u00e9e."],TESTIM_EDIT_VISIT_PROFILE:["Vous pouvez modifier ce t\u00e9moignage sur le profil de ","${username}","."],TESTIM_EDIT_VISIT_PROFILE_TEXT
:["Si vous choisissez de modifier cette publication, elle sera renvoy\u00e9e \u00e0 ","${username}"," pour approbation."],TESTIM_EDIT_VISIT_PROFILE_GO:["Aller sur le profil"],YOUR_SELECTION_HEADER:["Votre s\u00e9lection"],NO_PHOTOS_SELECTED:["Aucune photo s\u00e9lectionn\u00e9e."],SELECTED:["S\u00e9lectionn\u00e9es"],PROFILE_SHOWCASE_TITLE:["Vitrine du profil"],PROFILE_SHOWCASE_TITLE_SHORT:["Vitrine"],PROFILE_WHATS_NEW:["Nouveaut\u00e9s"],PROFILE_BIO_TOOLTIP:["Ajoutez quelques d\u00e9tails vous concernant pour terminer votre profil."],PROFILE_POPULAR_TOOLTIP:["Voici vos photos les plus populaires sur Flickr. Vous pouvez choisir de rendre cette section visible par tous ou uniquement par vous."],PROFILE_PHOTOSOF_TOOLTIP:["Vous pouvez ajouter et supprimer des tags vous concernant dans des photos en consultant la section \u00ab\u00a0Personnes sur la photo\u00a0\u00bb dans la page des photos."],PROFILE_PHOTOSOF_MODAL_TITLE:["Supprimer de cette photo le tag vous concernant\u00a0?"],PROFILE_CHECK_IT_OUT:["Lancez-vous\u00a0!"],PROFILE_GOT_IT:["OK, merci"],TESTIM_FILTER_RECEIVED:["Re\u00e7u"],TESTIM_FILTER_GIVEN:["Donn\u00e9"],TESTIM_NOTHING_TO_SHOW:["Rien \u00e0 afficher\u00a0!"],TESTIM_POSTED_ON:[{type:"date",valueName:"intlDate",format:"long"}],TESTIM_AUTHOR_SAYS:['<a href="',"${url}",'" class="username">',"${displayname}","</a> a dit\u00a0:"],TESTIM_AUTHOR_FOR:['Pour <a href="',"${url}",'" class="username">',"${displayname}","</a>\u00a0:"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-fluid-modal-nav-bar",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},t!=null?t.disabled:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:""},2:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'			<li data-id="'+l((o=(o=n.id||(t!=null?t.id:t))!=null?o:a,typeof o===f?o.call(u,{name:"id",hash:{},data:i}):o))+'" data-value="'+l((o=(o=n.value||(t!=null?t.value:t))!=null?o:a,typeof o===f?o.call(u,{name:"value",hash:{},data:i}):o))+'" class="link '+((s=n["if"].call(u,t!=null?t.selected:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(u,t!=null?t.hiddenByDefault:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" tabindex="0"><a data-value="'+l((o=(o=n.value||(t!=null?t.value:t))!=null?o:a,typeof o===f?o.call(u,{name:"value",hash:{},data:i}):o))+'">'+l((o=(o=n.name||(t!=null?t.name:t))!=null?o:a,typeof o===f?o.call(u,{name:"name",hash:{},data:i}):o))+"</a></li>\n"},3:function(e,t,n,r,i){return"selected"},5:function(e,t,n,r,i){return"hidden"},7:function(e,t,n,r,i){return'			<form action="/search" method="get" role="search">\n				<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n				<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n			</form>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="fluid-modal-nav-bar">\n	<div class="fluid-modal-nav-content">\n		<ul class="links">\n'+((s=n.each.call(o,t!=null?t.links:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"		</ul>\n"+((s=n["if"].call(o,t!=null?t.enableSearch:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal-nav-bar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-modal-nav-bar-view",function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this;return this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach(function(n){n.selected&&t.set("currentSelection",e.one('.link[data-id="'+n.id+'"]'))}),this},deselectAll:function(){var e=this.get("container"),n=e.one(t.css.nav),r=n.one(t.css.navContent),i=r.one(t.css.links);i.all(t.css.link).removeClass("selected")},handleClick:function(t){var n=t.target,r=n.get("parentNode"),i=this.get("container"),s,o={},u=this.appContext.getViewer().nsid;n.getDOMNode().tagName.toLowerCase()==="a"?(t.halt(),this.deselectAll(),r.addClass("selected"),this.set("currentSelection",r),i.one(".search-field").getDOMNode().value="",this.fire("subviewViewEvent","navigation",t)):n.hasClass("link")?(t.halt(),this.deselectAll(),n.addClass("selected"),this.set("currentSelection",n),i.one(".search-field").getDOMNode().value="",this.fire("subviewViewEvent","navigation",t)):this.get("enableSearch")&&(s=i.one(".search-field").getDOMNode(),n.getDOMNode().type==="submit"&&(t.halt(),o.apiParams={},o.apiParams[e.AttributeHelpers.coerceString(s.name)]=s.value,o.id=e.SearchHelper.generateQueryString(o.apiParams)||e.guid(),o.viewerNsid=u,this.fire("subviewViewEvent","search",o),this.deselectAll(),this.set("currentSelection",{type:"search",modelParams:o})))},onParentViewEvent:function(t,n){var r=this.get("currentSelection");n[0]==="backToList"&&(r instanceof e.Node?this.get("currentSelection").getDOMNode().click():r.type==="search"&&this.fire("subviewViewEvent","search",r.modelParams))}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","attribute-helpers","search-helper"],langBundles:["common","wallart"],optional:["person-models","photo-models"]});
YUI.add("fluid-coverphoto-editor",function(e){"use strict";var t=768,n=2048,r,i=this.details.langBundles;r={dragging:{mouseDownY:0,previousY:0},potential:{y:0,height:0,width:0,url:"",id:0,aspectRatio:0},original:{width:0,height:0,url:""}},e.FluidCoverPhotoEditor=function(e,t){this.coverPhotoElement=e,r.original.url=e.getStyle("backgroundImage"),this.langBundles=i,this.appContext=t},e.FluidCoverPhotoEditor.prototype.loadCoverPhoto=function(t){var n=new Image,i=this,s,o,u;return new e.Promise(function(e,a){n.onload=function(){u=i._determineBoundaries(r.potential.height,r.potential.width),i.coverPhotoElement.setStyles({backgroundImage:"url("+n.src+")",backgroundPosition:"50% "+u.min*-1+"px"}),i.coverPhotoElement.addClass("editing"),i.setupEditorHandlers(),e()},r.potential.id=t.id,o=t.getValue("descendingSizes")[0],s=t.getValue("descendingSizes")[1],r.potential.width=s.width,r.potential.height=s.height,r.potential.url=s.url,r.original.width=o.width,r.original.height=o.height,r.potential.aspectRatio=t.getValue("aspectRatio"),n.src=s.url})},e.FluidCoverPhotoEditor.prototype._convertYPositionForApi=function(e,i){var s=parseInt(this.coverPhotoElement.get("offsetHeight"),10),o=parseInt(this.coverPhotoElement.get("offsetWidth"),10),u,a,f,l;return r.potential.aspectRatio!==r.original.width/r.original.height&&(i=r.original.height),u=Math.abs(e)+s/2,a=u*n/o,f=a-t/2,l=f*i/n,l},e.FluidCoverPhotoEditor.prototype._determineBoundaries=function(e,r){var i=parseInt(this.coverPhotoElement.get("offsetWidth"),10),s=parseInt(this.coverPhotoElement.get("offsetHeight"),10),o,u,a,f,l,c;return o=i*e/r,u=t/2,f=u*i/n,a=f-s/2,l=o-a,c=l-s,{min:a,max:c}},e.FluidCoverPhotoEditor.prototype.setupEditorHandlers=function(){var t=this,n=this._determineBoundaries(r.potential.height,r.potential.width);e.one(e.config.win.document.documentElement).addClass("disable-text-select"),this.coverPhotoElement.on("mousedown",function(e){e.halt();var n=t.coverPhotoElement.getStyle("backgroundPosition").split(" "),i=n.length===2?parseInt(n[1],10):0;r.dragging.mouseDownY=e.pageY,r.dragging.previousY=i,r.dragging.startDrag=!0,t.coverPhotoElement.addClass("grabbing")}),this.coverPhotoElement.on("mouseup",function(){r.dragging.startDrag=!1,t.coverPhotoElement.removeClass("grabbing")}),this.coverPhotoElement.on("mouseout",function(){r.dragging.startDrag=!1,t.coverPhotoElement.removeClass("grabbing")}),this.coverPhotoElement.on("mousemove",function(e){e.halt();if(!r.dragging.startDrag)return;var i=r.dragging.mouseDownY-e.pageY,s=r.dragging.previousY-i,o=n.min*-1,u=n.max*-1;s=s>=u?s:u,s=s>o?o:s,r.potential.y=s,t.coverPhotoElement.setStyle("backgroundPosition","50% "+s+"px")})},e.FluidCoverPhotoEditor.prototype.cancelCoverPhotoEditing=function(){this.coverPhotoElement.removeClass("editing"),this.coverPhotoElement.setStyles({backgroundImage:r.original.url,backgroundPosition:"50% 50%"}),this.coverPhotoElement.detachAll(),e.one(e.config.win.document.documentElement).removeClass("disable-text-select")},e.FluidCoverPhotoEditor.prototype.saveCoverPhoto=function(t){var n=this._convertYPositionForApi(r.potential.y,r.original.width),i={photo_id:r.potential.id,y:n},s;t&&(i.group_id=t,s="group"),this.coverPhotoElement.addClass("saving"),e.coverPhotoSaver.save(i,s).then(function(){e.config.win.location.reload()}).catch(function(t){var n=new e.Views.FluidModal({title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),textMessage:t.message,appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!1,hideModalOverlay:!1,showCancelX:!1});n.show(),n.on("actionClick",function(t){e.config.win.location.reload()})}.bind(this))},e.mix(e.FluidCoverPhotoEditor.prototype,e.Localizable)},"@VERSION@",{affinity:"",requires:["flickr-promise","event-custom"],langBundles:["common"]});
YUI.add("coverphoto-saver",function(e){"use strict";e.coverPhotoSaver={methods:{photostream:"flickr.coverphoto.setAccountCover",group:"flickr.coverphoto.setGroupCover"},save:function(t,n){var r=e.config.win.appContext,i={group_id:t.group_id,photo_id:t.photo_id,x:Math.abs(t.x||0),y:Math.abs(t.y||0)},s=this.methods[n||"photostream"];return new e.Promise(function(e,t){r.callAPI(s,i).then(function(n){var i=0,s=5,o=2e3,u=function(){r.callAPI("flickr.photos.upload.checkTickets",{tickets:n.coverphoto.ticketId}).then(function(n){var r=n&&n.uploader.ticket[0];i++,r&&r.complete===1?e():i>s?t():setTimeout(u,o)})};n&&n.coverphoto&&n.coverphoto.ticketId&&setTimeout(u,o)},function(e){t(new Error("Cover photo could not be saved. "+e.message))})})}}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("avatar-saver",function(e){"use strict";e.AvatarSaver={methods:{people:"flickr.people.setBuddyIcon",group:"flickr.groups.setBuddyIcon"},save:function(t,n){var r=e.config.win.appContext,i=this.methods[n||"people"];return new e.Promise(function(e,n){r.callAPI(i,t).then(function(t){var i=0,s=5,o=2e3,u=function(){r.callAPI("flickr.photos.upload.checkTickets",{tickets:t.ticketid.content}).then(function(t){var r=t&&t.uploader.ticket[0];i++,r&&r.complete===1?e():i>s?n():setTimeout(u,o)})};t&&t.ticketid&&setTimeout(u,o)},function(e){n(new Error("Cover photo could not be saved."))})})}}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("fluid-coverphoto-view",function(e,t){"use strict";var n=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),e.nsid||(n.warn("did not receive an `nsid` param and will default to appContext getViewer() nsid."),e.nsid=this.appContext.getViewer().nsid),this.set("pageNsid",e.nsid),this.set("hasFollow",e.hasFollow),this.set("models",{}),this.set("viewingSelf",!1),this.set("viewerIsGod",!1),this.set("currentHeaderPath",e.currentHeaderPath),this},subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,isFluid:!0,isOnDark:!0,disabled:function(){return!this.get("hasFollow")}}},loadState:function(){return e.Promise.resolve()},getViewer:function(){var t=this.appContext.getViewer(),n=t&&t.signedIn&&t.nsid;return this.set("viewingSelf",n===this.get("pageNsid")),n&&this.set("viewerIsGod",t.isInsecureGod),e.Promise.resolve(null)},buildContainer:function(e){return e=e||{},e.viewingSelf=this.get("viewingSelf"),e.viewerIsGod=this.get("viewerIsGod"),e.isFullBleed=this.get("fullBleed"),e.csrf=this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.get("models").person&&this.appContext.flipper.isFlipped("enable-pro-badge")&&(e.isPro=this.get("models").person.getValue("isPro")),YUI.Env.isServer?e.pageUrl=this.appContext.request.url:e.pageUrl=window.location.pathname,e.iconMessage||(e.iconMessage=this.intlMessage({intlName:"header.CHANGE_YOUR_BUDDY_ICON"})),e.titleBlock&&e.titleBlock.follow&&this.subviews["follow-view"]&&(e.titleBlock.follow=this.subviews["follow-view"].get("container")),this.setContainerWithTemplate("fluid-coverphoto",e),this},buildPersonCoverPhoto:function(){var e=this.get("models").personProfile;return e?{coverPhoto:{urls:e.getValue("coverPhotoUrls"),canEdit:this.get("canEditCoverPhoto"),attribution:""}}:null},buildGroupCoverPhoto:function(){var e=this.get("models").groupInfo;return e?{coverPhoto:{urls:e.getValue("group").getValue("coverPhotoUrls"),canEdit:this.get("canEditCoverPhoto"),attribution:e.getValue("coverPhotoAttribution")}}:null},buildAvatar:function(){var t=this.get("models"),n=t&&this.get("models").person,r=n&&n.getValue("buddyicon"),i=n&&e.URLHelper.generatePersonUrls(n);return n?{avatar:{canEdit:this.get("viewingSelf"),editUrl:"/iconbuilder/",sendFlickrMail:i.sendFlickrMail,linkUrl:i.photostream,icon:{retina:r.retina||r.large||r.medium,lowres:r.default},type:""}}:null},buildTitleBlock:function(){return{titleBlock:null}},buildMetadata:function(){return{metadata:null}},activate:function(){return this.coverPhotoElement=this.get("container").one(".coverphoto"),this.FluidCoverPhotoEditor=new e.FluidCoverPhotoEditor(this.coverPhotoElement,this.appContext),this.get("canEditCoverPhoto")&&this.attachEvents({":pick":this.setupCoverPhotoEditor.bind(this),":cancelEdit":this.FluidCoverPhotoEditor.cancelCoverPhotoEditing.bind(this.FluidCoverPhotoEditor),":saveEdit":this.FluidCoverPhotoEditor.saveCoverPhoto.bind(this.FluidCoverPhotoEditor,this.groupId)}),this.get("container").one(".avatar .edit")&&this.attachEvents({":editAvatar":this.handleAvatarEditClick.bind(this)}),this},setupAvatarEditor:function(t){var r=this,i=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,noScroll:!0,hideModalOverlay:!1,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,width:Math.round(Math.max(1280,e.config.win.innerWidth)*.6),height:Math.round(e.config.win.innerHeight-60),title:this.intlMessage({intlName:"header.POSITION_IMAGE"}),actionButtonLabel:this.intlMessage({intlName:"common.SAVE"}),subview:new e.Views["fluid-avatar-editor-view"]({appContext:this.appContext,photoModel:t,contentHeight:Math.max(400,Math.round(e.config.win.innerHeight)*.6)})});i.on("actionClick",function(t){var i=this.get("subview").get("apiParams");r.groupId&&(i.group_id=r.groupId),r.get("container").one(".avatar").addClass("loading"),e.AvatarSaver.save(i,r.groupId?"group":null).then(function(){setTimeout(e.config.win.location.reload.bind(e.config.win.location),2e3)}).catch(function(e){n.error({err:e}),r.get("container").one(".avatar").removeClass("loading")})}),i.show()},handleAvatarEditClick:function(t){var n=this,r;t.halt();if(this.isMobile)return;return r=this.getPhotoSelector(),r.on("actionClick",function(e){var t=r.get("subview").get("selected");n.appContext.getModel("photo-models",t).then(function(e){r.close(),n.setupAvatarEditor(e)})}),r.registerEventHandler(e.on("photoSelector:selected",function(e){r.enableActionButton()})),r.registerEventHandler(e.on("photoSelector:unselected",function(e){r.disableActionButton()})),r.show(),r},setupCoverPhotoEditor:function(){var t=this,n;return n=this.getPhotoSelector({publicOnlyGroups:!0}),n.on("actionClick",function(e){var r=n.get("subview").get("selected");t.appContext.getModel("photo-models",r).then(function(e){t.FluidCoverPhotoEditor.loadCoverPhoto(e).then(function(){n.close()})})}),n.registerEventHandler(e.on("photoSelector:selected",function(e){n.enableActionButton()})),n.registerEventHandler(e.on("photoSelector:unselected",function(e){n.disableActionButton()})),n.show(),n},getPhotoSelector:function(t){var r=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],i={appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1}},s;if(this.groupId){if(!this.get("models").group)return n.error("Missing group model");r=r.filter(function(e){return e.id!=="upload"}),s=this.intlMessage({intlName:"search.IN_GROUP_POOL",name:this.get("models").group.getValue("title")}),r[0].selected=!1,r.push({id:"group",name:this.intlMessage({intlName:"context.GROUP_CONTEXT_TITLE"}),value:"group",selected:!0}),i.groupId=this.groupId,i.defaultSelected={id:this
.groupId,title:s,type:"group"},t&&t.publicOnlyGroups&&(i.publicOnlyGroups=!0),i.publicOnlyPhotos=!0}return new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!1,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:"",navBarView:new e.Views["fluid-modal-nav-bar-view"]({appContext:this.appContext,links:r,enableSearch:!0}),actionButtonLabel:this.intlMessage({intlName:"common.SELECT"}),actionButtonDisabled:!0,subview:new e.Views["photo-selector-view"](i),width:Math.round(Math.max(1280,e.config.win.innerWidth)*.8),minWidth:800,height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,classList:"photo-selector",hideModalOverlay:!1})}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-coverphoto","hermes-template-flickr-balls","follow-view","fluid-avatar-editor-view","photo-selector-view","fluid-modal-nav-bar-view","fluid-modal-view","fluid-coverphoto-editor","coverphoto-saver","avatar-saver"],optional:["person-models","person-profile-models"],optionalRequires:["fluid"],langBundles:["header","common","global-nav","search","context"]});
