YUI.add("flickr-tag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},photo:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry","photo-model-helper"]});
YUI.add("flickr-tags-getHotList-fetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u={id:n,sort:n};return r.hottags?(u.tags=r.hottags.tag.sort(function(e,t){var n=e?parseInt(e.score,10):0,r=t?parseInt(t.score,10):0;return n>r?-1:r>n?1:0}).map(function(t){var n=null;return t.thm_data&&t.thm_data.photos&&t.thm_data.photos.photo&&t.thm_data.photos.photo.length>0?(n=o.addOrUpdate(e.APIHelper.response.parsePhotoLite(t.thm_data.photos.photo[0])),i.addOrUpdate({id:t.content,photo:n})):i.addOrUpdate({id:t.content,photo:null})}),s.addOrUpdate(u)):[]}function r(e){var t={period:e.id,count:e.count||50};return t}function i(n,i){var s=n.id,o=this,u;return i.flipper.isFlipped("enable-static-tags-data")&&(s==="week"?u=e.Promise.resolve({stat:"ok",hottags:{tag:[{score:"100",content:"focuspocus"},{score:"100",content:"location4"},{score:"100",content:"sotu"},{score:"100",content:"wildgoosechase"},{score:"100",content:"locspring2013"},{score:"100",content:"whitenightmelbourne"},{score:"100",content:"ds106photoblitz"},{score:"100",content:"rosenmontagszug"},{score:"100",content:"myattic"},{score:"100",content:"kl112"},{score:"100",content:"londonicesculptingfestival"},{score:"100",content:"stroll1302"},{score:"96",content:"bemyflickrvalentine"},{score:"96",content:"week8"},{score:"96",content:"australiaday2013"},{score:"96",content:"week5theme"},{score:"96",content:"wolfmoon"},{score:"95",content:"whitenight"},{score:"95",content:"a4p"},{score:"95",content:"giornodellamemoria"},{score:"95",content:"project36517"},{score:"95",content:"week02"},{score:"94",content:"candlemas"},{score:"94",content:"project3655"},{score:"94",content:"valentine\u00b4sday"},{score:"94",content:"saintvalentinesday"},{score:"93",content:"shrovetuesday"},{score:"93",content:"annonuovo"},{score:"93",content:"valentijnsdag"},{score:"93",content:"inaug2013"},{score:"92",content:"katsucon"},{score:"92",content:"hny"},{score:"90",content:"me2yoyphotographylevel1"},{score:"90",content:"bridesmaiddress"},{score:"90",content:"day345"},{score:"90",content:"day314"},{score:"90",content:"quotnikon"},{score:"90",content:"blogfest2009"},{score:"90",content:"comm2034fall11"},{score:"90",content:"gettyjubilee"},{score:"90",content:"ifpaesthetic"},{score:"90",content:"crashedice"},{score:"90",content:"happyvalentine"},{score:"90",content:"trueloveweek"},{score:"90",content:"ysdn200510"},{score:"89",content:"valentinstag"},{score:"89",content:"keepitsimple"},{score:"89",content:"buonanno"},{score:"89",content:"project36521"},{score:"89",content:"marchanegra"}]}}):s==="day"&&(u=e.Promise.resolve({stat:"ok",hottags:{tag:[{score:"100",content:"feb23"},{score:"97",content:"whitenight"},{score:"95",content:"whitenightmelbourne"},{score:"94",content:"farligt"},{score:"93",content:"avstand"},{score:"92",content:"facedowntuesday"},{score:"90",content:"encuentros"},{score:"90",content:"whenigrowup"},{score:"90",content:"dp3merrill"},{score:"90",content:"whitenightmelb"},{score:"84",content:"fdt"},{score:"83",content:"northplatterealestate"},{score:"82",content:"fencefriday"},{score:"82",content:"benchmonday"},{score:"82",content:"genomskinlig"},{score:"81",content:"myvalentine"},{score:"79",content:"tva"},{score:"78",content:"dp3"},{score:"76",content:"happyvalentines"},{score:"75",content:"leicammonochrom"},{score:"75",content:"blackeveningdress"},{score:"73",content:"hff"},{score:"73",content:"parkrun"},{score:"72",content:"fs130210"},{score:"72",content:"residentiallisting"},{score:"72",content:"flindersstreetstation"},{score:"71",content:"tgif"},{score:"70",content:"valentine\u00b4sday"},{score:"69",content:"nahbs"},{score:"69",content:"liked"},{score:"69",content:"longeveningdress"},{score:"69",content:"week31ilove"},{score:"66",content:"macromonday"},{score:"66",content:"valentijnsdag"},{score:"66",content:"happyfencefriday"},{score:"66",content:"cheapdresses"},{score:"65",content:"projectlife365"},{score:"64",content:"fencedfriday"},{score:"63",content:"bemyflickrvalentine"},{score:"63",content:"neu"},{score:"62",content:"urbanlife"},{score:"62",content:"proyecto365"},{score:"60",content:"singlefamilylisting"},{score:"59",content:"hbw"},{score:"58",content:"sanvalent\u00edn"},{score:"58",content:"keepitsimple"},{score:"57",content:"elevated"},{score:"56",content:"photographyfo"},{score:"56",content:"iphone365"},{score:"56",content:"hmm"}]}}))),e.Promise.all([u||i.callAPI("flickr.tags.getHotList",r(n)),i.getModelRegistry("flickr-tag-models"),i.getModelRegistry("flickr-tag-list-models"),i.getModelRegistry("photo-lite-models")]).then(function(e){return o._processResponse(e,s)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-tags-getHotList"]={run:i,_processResponse:n,_processParams:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["flickr-tag-models","flickr-tag-list-models","photo-lite-models"]});
YUI.add("flickr-tags-getTopTagCloud-fetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u={id:n,sort:n};if(!r.tags)return[];var a=r.tags.tag.sort(function(e,t){var n=e?parseInt(e.score,10):0,r=t?parseInt(t.score,10):0;return n>r?-1:r>n?1:0}).map(function(t){var n=null;return t.thm_data&&t.thm_data.photos&&t.thm_data.photos.photo&&t.thm_data.photos.photo.length>0?(n=o.addOrUpdate(e.APIHelper.response.parsePhotoLite(t.thm_data.photos.photo[0])),i.addOrUpdate({id:t.content,photo:n})):i.addOrUpdate({id:t.content,photo:null})}).filter(function(e){return e!==undefined});return u.tags={pageContent:a,page:1,perPage:a.length,totalPages:1,totalItems:a.length,fetchedStart:!0,fetchedEnd:!0},s.addOrUpdate(u)}function r(e){var t={count:e.count||50};return t}function i(n,i){var s=n.id,o=this,u;return n.count=50,i.flipper.isFlipped("enable-static-tags-data")&&(u=e.Promise.resolve({stat:"ok",tags:{tag:[{score:"13920786",content:"art"},{score:"12192922",content:"beach"},{score:"7445067",content:"blue"},{score:"12345111",content:"california"},{score:"7517823",content:"canada"},{score:"18280818",content:"canon"},{score:"9411736",content:"city"},{score:"7639627",content:"concert"},{score:"7838359",content:"europe"},{score:"10552993",content:"family"},{score:"8228318",content:"festival"},{score:"8070788",content:"flower"},{score:"8553792",content:"flowers"},{score:"9837841",content:"france"},{score:"25183101",content:"instagramapp"},{score:"25856027",content:"iphoneography"},{score:"9213244",content:"italy"},{score:"12811479",content:"japan"},{score:"12058754",content:"london"},{score:"12421126",content:"music"},{score:"14571585",content:"nature"},{score:"8431324",content:"newyork"},{score:"7495900",content:"night"},{score:"19052672",content:"nikon"},{score:"8141925",content:"nyc"},{score:"8191189",content:"paris"},{score:"9139813",content:"park"},{score:"12313281",content:"party"},{score:"9579662",content:"people"},{score:"9751819",content:"photography"},{score:"9759644",content:"portrait"},{score:"8099929",content:"sky"},{score:"7851922",content:"snow"},{score:"26886783",content:"square"},{score:"25293170",content:"squareformat"},{score:"9676112",content:"summer"},{score:"15095858",content:"travel"},{score:"7737175",content:"uk"},{score:"12659896",content:"usa"},{score:"9173848",content:"vacation"},{score:"9998363",content:"water"},{score:"17645174",content:"wedding"},{score:"7815057",content:"winter"}]}})),e.Promise.all([u||i.callAPI("flickr.tags.getTopTagCloud",r(n)),i.getModelRegistry("flickr-tag-models"),i.getModelRegistry("flickr-tag-list-models"),i.getModelRegistry("photo-lite-models")]).then(function(e){return o._processResponse(e,s)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-tags-getTopTagCloud"]={run:i,_processResponse:n,_processParams:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["flickr-tag-models","flickr-tag-list-models","photo-lite-models"]});
YUI.add("flickr-tags-getRelated-fetcher",function(e,t){"use strict";function n(e,t){var n=e[0],r=e[1],i=e[2],s={id:t,sort:"related"};return n.tags?(s.tags=n.tags.tag.map(function(e){return r.addOrUpdate({id:e.content,photo:null})}),i.addOrUpdate(s)):[]}function r(t){var n={tag:e.Models["flickr-tag-list-models"].extractTagFromCompoundId(t.id)};return n}function i(n,i){var s=n.id,o=this;return e.Promise.all([i.callAPI("flickr.tags.getRelated",r(n)),i.getModelRegistry("flickr-tag-models"),i.getModelRegistry("flickr-tag-list-models"),i.getModelRegistry("photo-lite-models")]).then(function(e){return o._processResponse(e,s)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-tags-getRelated"]={run:i,_processResponse:n,_processParams:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["flickr-tag-models","flickr-tag-list-models"]});
YUI.add("flickr-tag-list-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){var n=this;t.useV2API=this.appContext.flipper.isFlipped("enable-v2-tags");if(t.useV2API){var r=e.moment().utc(),i={};if(t.id==="DAY")i={day:r.format("DD"),month:r.format("MM"),year:r.format("YYYY")};else if(t.id==="WEEK")i={resolution:"week",firstDayOfTheWeek:r.day("Sunday").format("DD"),month:r.format("MM"),year:r.format("YYYY")};else{if(t.id!=="YEAR")throw new Error("Unknown model id specified for flickr-tag-list-models to fetch with with api v2.");i={year:"2000"}}t.v2params=i}else if(t.id==="DAY"||t.id==="WEEK")t.date=e.moment().utc().format("YYYY-MM-DD");else{if(t.id!=="YEAR")throw new Error("Unknown model id specified for flickr-tag-list-models to fetch with.");t.date="2000-01-01"}return e.ModelFetchers["flickr-aggregation-getTagsTop"].run(t,this.appContext).then(function(e){return n},function(e){return[]})}},attributes:{tags:{isCollection:!0},sort:{setter:function(t){return e.AttributeHelpers.coerceString(t)}}}},{buildCompoundId:function(e,t){return e+"-"+t},extractTagFromCompoundId:function(e){var t=e.split("-");return t.length<=1?null:(t.shift(),t.join("-"))},extractIdFromCompoundId:function(e){var t=e.split("-");return t.shift()}})},"@VERSION@",{requires:["flickr-model-registry","flickr-aggregation-getTagsTop-fetcher","flickr-tags-getHotList-fetcher","flickr-tags-getTopTagCloud-fetcher","flickr-tags-getRelated-fetcher"]});
YUI.add("flickr-aggregation-getTagsTop-fetcher",function(e,t){"use strict";function r(t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a={id:r,sort:r},f;return n.useV2API?f=i.body.map(function(t){var n=null,r=t.photoList;return r!==undefined&&r.length>0?(r[0].id=r[0].id.photoId,n=u.addOrUpdate(e.APIHelper.response.parsePhotoLite(r[0])),s.addOrUpdate({id:t.tagName,photo:n})):!1}):f=i.tags.sort(function(e,t){return e.object_rank-t.object_rank}).map(function(t){var n=null,r=t.photos;if(r&&r.length){var i=r[0];return i.id=i.photoId,n=u.addOrUpdate(e.APIHelper.response.parsePhotoLite(i)),s.addOrUpdate({id:t.object_value.tag,photo:n})}return s.addOrUpdate({id:t.object_value.tag,photo:null})}),a.tags={pageContent:f,page:1,perPage:f.length,totalPages:1,totalItems:f.length,fetchedStart:!0,fetchedEnd:!0},o.addOrUpdate(a)}function i(t){var n={date:t.date,resolution:t.id.toUpperCase(),servingType:"TRENDING",count:t.count||t.perPage||50,extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function s(r,s){var o=r.id,u=this,a=[];if(r.useV2API){var f=r.v2params,l="https://api.flickr.com/v2/tags/trending/";f.year&&f.month&&f.day&&!f.resolution?l+=f.year+"/"+f.month+"/"+f.day:f.year&&f.month&&f.firstDayOfTheWeek&&f.resolution==="week"?l+=f.year+"/"+f.month+"/"+f.firstDayOfTheWeek+"/"+f.resolution:f.year&&(l+=f.year),a=[n.get(l).use(require("hermes-core/req-id")).query({pageNumber:r.pageNumber?r.pageNumber-1:0,pageSize:r.pageSize?r.pageSize:10,format:"json",nojsoncallback:1})]}else a=[s.callAPI("flickr.aggregation.getTagsTop",i(r))];return a=a.concat([s.getModelRegistry("flickr-tag-models"),s.getModelRegistry("flickr-tag-list-models"),s.getModelRegistry("photo-lite-models")]),e.Promise.all(a).then(function(e){return u._processResponse(e,r,o)},function(n){e.FetcherErrorLogger(t).call(this,n)})}var n=require("superagent");e.namespace("ModelFetchers")["flickr-aggregation-getTagsTop"]={run:s,_processResponse:r,_processParams:i}},"@VERSION@",{requires:["flickr-promise","api-helper"],optionalRequires:["superagent"],optional:["flickr-tag-models","flickr-tag-list-models","photo-lite-models"]});
